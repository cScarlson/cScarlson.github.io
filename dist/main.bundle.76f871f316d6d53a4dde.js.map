{"version":3,"sources":["webpack:///./src/@motorman/vertices/core/decorators.ts","webpack:///./src/@motorman/core/utilities/utilities.ts","webpack:///./src/@motorman/core/utilities/patterns/other/deferred.ts","webpack:///./src/@motorman/core/utilities/index.ts","webpack:///./src/@motorman/vertices/core/defaults.js","webpack:///./src/@motorman/core/utilities/patterns/behavioral/chainOfRespnsibility.ts","webpack:///./src/@motorman/core/utilities/patterns/behavioral/command.ts","webpack:///./src/@motorman/core/utilities/patterns/behavioral/mediator/eventhub.ts","webpack:///./src/@motorman/vertices/core/element-engine.ts","webpack:///./src/@motorman/vertices/core/core.ts","webpack:///./src/@motorman/vertices/core/api.js","webpack:///./src/@motorman/vertices/index.ts","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./src/@motorman/vertices/sdk/components/modal/modal.component.ts","webpack:///./src/@motorman/vertices/sdk/components/modal/modal.component.html","webpack:///./src/main.scss?4e53","webpack:///./src/main.scss","webpack:///./src/environments/environment.prod.ts","webpack:///./src/@motorman/models/environment.model.ts","webpack:///./src/@motorman/vertices/director/channels.ts","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isFunction.js","webpack:///./node_modules/rxjs/_esm5/internal/config.js","webpack:///./node_modules/rxjs/_esm5/internal/util/hostReportError.js","webpack:///./node_modules/rxjs/_esm5/internal/Observer.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArray.js","webpack:///./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscription.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isObject.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/noop.js","webpack:///./node_modules/rxjs/_esm5/internal/util/pipe.js","webpack:///./node_modules/rxjs/_esm5/internal/Observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/toSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/canReportError.js","webpack:///./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","webpack:///./node_modules/rxjs/_esm5/internal/SubjectSubscription.js","webpack:///./node_modules/rxjs/_esm5/internal/Subject.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/Action.js","webpack:///./node_modules/rxjs/_esm5/internal/Scheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/queue.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/empty.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js","webpack:///./node_modules/rxjs/_esm5/internal/Notification.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/fromArray.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/throwError.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/of.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/observeOn.js","webpack:///./node_modules/rxjs/_esm5/internal/ReplaySubject.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/filter.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/map.js","webpack:///./src/@motorman/core/store/store.rxjs.ts","webpack:///./src/@motorman/core/mediator/mediator.rxjs.ts","webpack:///./src/@motorman/core/eventhub/eventhub.rxjs.ts","webpack:///./src/@motorman/core/director/director.rxjs.ts","webpack:///./src/@motorman/core/sandbox/sandbox.rxjs.ts","webpack:///./src/@motorman/vertices/director/director.ts","webpack:///./src/app/core/director/director.ts","webpack:///./src/app/core/director/channels.ts","webpack:///./src/app/core/director/handlers/action.ts","webpack:///./src/@motorman/vertices/director/handlers/action.ts","webpack:///./src/app/core/director/handlers/state.ts","webpack:///./src/@motorman/vertices/sandbox.ts","webpack:///./src/app/core/sandbox.ts","webpack:///./src/app/core/constants.ts","webpack:///./src/app/core/bootstrap.ts","webpack:///./src/app/app.ts","webpack:///./src/main.ts"],"names":["DEFAULT_DESCRIPTOR","writable","configurable","enumerable","Element","details","options","data","decorator","members","Class","meta","Component","Directive","Pipe","Service","Metadata","klass","$members","Map","$observedAttributes","$watchers","$elements","$attrs","$listeners","$subscriptions","metadata","this","decorators","object","ns","keys","split","length","shift","Function","namespace","key","value","set","get","observe","attr","thus","target","descriptor","constructor","action","true","false","process","arguments","hasGet","hasSet","hasGetOrSet","hasGetAndSet","name","alias","handler","selector","isHost","matches","RegExp","exec","match","tagName","type","console","log","observee","observer","element","listener","message","CSV","collection","fields","delimiter","$table","$values","$lines","matrix","lines","span","Object","reduce","o","x","i","width","j","height","y","row","rows","col","columns","_id","field","record","column","line","Math","max","apply","join","tabs","Array","map","concat","replace","csv","slice","array","datum","bind","push","Utilities","first","more","k","extend","null","undefined","0","splat","window","setTimeout","timeout","delay","params","call","clearTimeout","fn","timer","context","threshhold","scope","deferTimer","now","Date","last","invoke","c","r","random","toString","s","path","drill","str","a","b","val","escapeHTML","re","matcher","string","result","values","len","url","document","createElement","href","hash","host","hostname","origin","pathname","port","protocol","search","methods","prototype","sortByKey","size","unit","$","toFixed","$bytes","$KB","$MB","$GB","$TB","$PB","bytes","KB","MB","GB","TB","PB","auto","Infinity","datasets","n","Number","round","Deferred","_resolve","_reject","promise","Promise","exe","resolve","reject","DefaultServicesSandbox","utils","DefaultComponentSandbox","Handler","e","detail","ChainOfResponsibility","config","responders","super","cancelable","bubbles","cancelBubble","defaultPrevented","handlers","propagate","event","CustomEvent","next","stopPropagation","execute","respond","stopImmediatePropagation","StrictCommand","EventTarget","component","command","composeCommand","item","composeExecutor","Channels","Comm","channels","channel","dispatchEvent","addEventListener","removeEventListener","ConstructorProxy","comm","Sandbox","director","Target","args","sandbox","Reflect","construct","publish","MemberProxy","source","has","receiver","deleteProperty","MethodProxy","TemplateListener","TemplateManagementOptions","reAttrIn","reStructural","reListener","reListenerValue","MutationManager","MutationObserver","changes","mutation","attributeName","getAttributeNode","attributes","childList","subtree","disconnect","dTemplateReady","$variables","templateListeners","mutations","fragment","DocumentFragment","template","content","pipeNodeHandler","nodeProcessors","processAttributeNodeRepeat","processElementNode","processTextNode","processCommentNode","pipeAttributeHandler","attributeProcessors","handlePropertyBinding","handleListenerBinding","$elementRefs","elementRefs","$attrRefs","attrRefs","listeners","node","cor","isConnected","parentNode","parent","previousSibling","previous","nextSibling","firstChild","child","parseNode","response","nodeType","hasAttribute","attribute","handleStructuralRepeat","ownerElement","instructor","property","items","id","elements","removeAttribute","interpolate","outerHTML","attrs","processAttributeNode","owner","test","createBindingInvoker","method","pTemplateReady","innerHTML","then","bindMutationObservers","bindElementNodeRefs","bindAttributeNodeRefs","bindListeners","destroy","connect","querySelector","forEach","addNodeListener","construction","Proxy","state","membersProxy","methodsProxy","proxy","properties","getOwnPropertyNames","methodBlacklist","from","watchers","mapExecutor","subscriptions","surrogate","create","observedAttributes","templateOptions","HTMLElement","$utils","getConfig","$content","$comparitors","handleTemplate","cycle","handleProxyInvokation","subscribe","bindAttribute","getOwnPropertyDescriptor","getAttribute","setAttribute","v","defineProperty","attrName","oldVal","newVal","$watcher","detachedCallback","disconnectedCallback","refresh","customElements","prepare","define","DEFAULT_CONFIG","bootstrap","dataset","slug","behavior","components","children","resolveScope","services","Vertex","Vertices","Core","Facade","V","register","dConfiguration","pConfiguration","dInitialization","pInitialization","engine","configuration","Error","arm","service","Constructor","definition","startServices","startService","_service","ServiceSandbox","init","warn","ComponentSandbox","instance","core","configure","registerService","registerComponent","memo","isOldIE","Boolean","all","atob","getTarget","styleTarget","HTMLIFrameElement","contentDocument","head","stylesInDom","modulesToDom","moduleId","list","part","css","media","sourceMap","addStyle","insertStyleElement","style","nonce","insert","appendChild","textStore","replaceText","index","replacement","filter","applyToSingletonTag","remove","obj","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","btoa","unescape","encodeURIComponent","JSON","stringify","singleton","singletonCounter","update","styleIndex","removeStyleElement","newObj","module","exports","base","newList","useSourceMap","cssMapping","sourceMapping","base64","sourceURLs","sources","sourceRoot","cssWithMappingToString","modules","mediaQuery","onConnected","old","api","__esModule","default","exported","locals","___CSS_LOADER_API_IMPORT___","environment","extendStatics","d","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","stack","hostReportError","err","empty","closed","error","useDeprecatedSynchronousErrorHandling","complete","isArray","UnsubscriptionError","UnsubscriptionErrorImpl","errors","Subscription","unsubscribe","_parentOrParents","_subscriptions","_unsubscribe","flattenUnsubscriptionErrors","sub","add","teardown","subscription","EMPTY","tmp","indexOf","subscriptionIndex","splice","errs","rxSubscriber","Symbol","_super","Subscriber","destinationOrNext","_this","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","SafeSubscriber","_parentSubscriber","observerOrNext","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","observable","noop","pipeFromArray","fns","input","prev","Observable","_isScalar","_subscribe","lift","operator","sink","nextOrObserver","toSubscriber","_trySubscribe","_a","closed_1","canReportError","promiseCtor","getPromiseCtor","pipe","operations","_i","toPromise","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","SubjectSubscription","subject","observers","subscriberIndex","SubjectSubscriber","Subject","hasError","thrownError","copy","asObservable","AnonymousSubject","QueueAction","scheduler","work","schedule","flush","_execute","requestAsyncId","AsyncAction","pending","recycleAsyncId","setInterval","clearInterval","errored","errorValue","actions","Action","Scheduler","SchedulerAction","queue","QueueScheduler","AsyncScheduler","delegate","active","scheduled","emptyScheduled","isScheduler","NotificationKind","scheduleArray","fromArray","dispatch","Notification","kind","hasValue","do","accept","toObservable","pop","of","createNext","undefinedValueNotification","createError","createComplete","completeNotification","ObserveOnSubscriber","arg","notification","scheduleMessage","ObserveOnMessage","ReplaySubject","bufferSize","windowTime","POSITIVE_INFINITY","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","ReplayEvent","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","FilterOperator","predicate","thisArg","FilterSubscriber","count","MapOperator","project","MapSubscriber","initializations","initialized","channels$","filterChannel","mapData","TypeError","in","publishers","$data","paths","attach","entries","handleState","stateHandlers","ActionHandlers","StateHandlers","Dependencies","dependencies","actionHandlers","detach","request","emit","settings","http","CONSTANTS","SELECTOR","DataDecorator","ids","handleMount","OtherComponent","app","env"],"mappings":"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","file":"main.bundle.76f871f316d6d53a4dde.js","sourcesContent":["\r\n/*\r\n\r\nDecorators\r\n\r\nClass decorators should always contain a \"meta\" property (on their descriptor, Class, or [root] Prototype) with a \"members\" object.\r\nMember decorators always assign metadata to a \"meta\" object on their Class under members[key] providing data for their purpose.\r\nDecorators should have the capability to be leveraged compositively with each other, adding \"meta\" data to the descriptor.\r\n\r\n@observee('prop') x: any;  // prepares metadata for observableAttributes (of \"prop\" with alias \"x\")\r\n@observer('prop') handleChange(...?) {}  // prepares metadata for handler called from attributedChangedCallback\r\n@element('tagName.class[attr]') element: HTMLElement;  // prepares metadata to select & bind an element to component['element'] (if not arguments.length then return HostElement or FirstChild or querySelector('*') or descriptor.name)\r\n@attr('tagName.class[attr]') attr: Attr;  // prepares metadata to select & bind an element's attribute-node to component['attr'] (if not \"[attr]\" then return descriptor.name)\r\n@listener('click') handleClick() {}  // prepares metadata to handle \"click\" on HostElement\r\n----\r\n@listener('click') @element('tagName.class[attr]') handleClick({ target }) {}  // prepares metadata to handle \"click\" on metadata.selector of type \"element\"\r\n@listener('change') @attr('tagName.class[attr]') handleChange({ ownerElement }) {}  // prepares metadata to handle \"change\" on metadata.selector of type \"attr\"\r\n\r\n*/\r\n\r\nvar DEFAULT_DESCRIPTOR = { writable: true, configurable: true, enumerable: true };\r\n\r\n\r\nclass DecoratorUtilities {  // DEP\r\n    namespace(object: any, ns: string, keys: string[] = ns.split('.')): boolean {\r\n        while (keys.length) if (!object[ keys[0] ]) object[ keys.shift() ] = { };\r\n        return !!(new Function(`return constructor.${ns};`))();\r\n    }\r\n    ensure(object, namespace, key, value) {\r\n        var exists = this.namespace(object, namespace);\r\n        var set = new Function('value', `object.${namespace} = value;`);\r\n        // var set = new Function('value', `object.${namespace}.${key} = value;`);\r\n        var get = new Function(`return object.${namespace};`);\r\n        \r\n        set(value);\r\n        return get();\r\n    }\r\n    meta(object, key, meta) {\r\n        this.namespace(object, 'meta.members');\r\n        object.meta.members[key] = meta;\r\n    }\r\n}\r\n\r\nfunction Element(details: any, options?: any): any {\r\n    var data = { ...details, options, decorator: 'element', members: {} };\r\n    \r\n    return function get(Class: any): any {\r\n        Class.meta = data;\r\n        return { ...data, Class };\r\n    };\r\n}\r\n\r\nfunction Component() {}\r\nfunction Directive() {}\r\nfunction Pipe() {}\r\nfunction Service() {}\r\n\r\ntype ObserveeMetadata = {\r\n    decorator: 'attribute:observee',\r\n    name: string,\r\n    alias: string,\r\n    hasGet: boolean,\r\n    hasSet: boolean,\r\n    hasGetOrSet: boolean,\r\n    hasGetAndSet: boolean,\r\n};\r\ntype ObserverMetadata = {\r\n    decorator: 'attribute:observer',\r\n    name: string,\r\n    attr: string,\r\n    handler: (...splat: any[]) => any,\r\n};\r\ninterface ElementRefMetadata {\r\n    decorator: 'reference:element';\r\n    name: string;\r\n    key: string;\r\n    selector: string;\r\n    isHost: boolean;\r\n};\r\ninterface AttrRefMetadata {\r\n    decorator: 'reference:attribute';\r\n    name: string;\r\n    key: string;\r\n    selector: string;\r\n    isHost: boolean;\r\n};\r\ntype ListenerMetadata = {\r\n    decorator: 'handler:dom',\r\n    name: string,\r\n    key: string,\r\n    type: string,\r\n    handler: (...splat: any[]) => any,\r\n    isHost: boolean;\r\n};\r\ntype CommMetadata = {\r\n    decorator: 'handler:comm',\r\n    name: string,\r\n    key: string,\r\n    type: string,\r\n    handler: (...splat: any[]) => any,\r\n};\r\n\r\nclass Metadata {  // TODO: create types for maps\r\n    public $members: Map<string, any> = new Map();\r\n    public $observedAttributes: Map<string, any> = new Map();\r\n    public $watchers: Map<string, any> = new Map();\r\n    public $elements: Map<string, any> = new Map();\r\n    public $attrs: Map<string, any> = new Map();\r\n    public $listeners: Map<string, any> = new Map();\r\n    public $subscriptions: Map<string, any> = new Map();\r\n    \r\n    constructor(protected klass: any) {\r\n        var { metadata } = klass;  // might already exist\r\n        var { $members, $observedAttributes, $watchers, $elements, $attrs, $listeners, $subscriptions } = (metadata || {});\r\n        \r\n        this.$members = $members || this.$members;  // prefer existing if available\r\n        this.$observedAttributes = $observedAttributes || this.$observedAttributes;  // prefer existing if available\r\n        this.$watchers = $watchers || this.$watchers;  // prefer existing if available\r\n        this.$elements = $elements || this.$elements;  // prefer existing if available\r\n        this.$attrs = $attrs || this.$attrs;  // prefer existing if available\r\n        this.$listeners = $listeners || this.$listeners;  // prefer existing if available\r\n        this.$subscriptions = $subscriptions || this.$subscriptions;  // prefer existing if available\r\n        \r\n        klass.metadata = this;  // ensure has structure of this while this.${{x}} originates from first issuance and subsequently klass\r\n        return this;  // `this` maintains references to those members from klass.metadata\r\n    }\r\n    \r\n}\r\n\r\nvar decorators = new (class Decorators extends DecoratorUtilities {\r\n    \r\n    /**\r\n     * @intention Provide a convenience method for mapping to correct behavior depending on input type to keep other methods clean.\r\n     *      * If member is datum : this.observee\r\n     *      * If member is method: this.observer\r\n     *      * Note: data-members are not created until class instance construction (value === undefined)\r\n     */\r\n    observe = (attr?: string): any => {\r\n        var thus = this;\r\n        \r\n        return function get(target: any, key: string, descriptor: any = {}): any {\r\n            var { constructor } = target;\r\n            var { value } = descriptor;\r\n            var metadata = new Metadata(constructor);\r\n            var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n            var action = { true: 'observer', false: 'observee' }[ <any>!!value ];  // this.observee || this.observer\r\n            var process = thus[action](attr);\r\n            var data = process(...arguments);\r\n            \r\n            metadata.$members.set(key, data);\r\n            return descriptor;\r\n        };\r\n    };\r\n    observee(attr?: string): any {  // @usage: @observe('options') options: any;\r\n        var thus = this;\r\n        \r\n        return function get(target: any, key: string, descriptor: any = {}): any {\r\n            var { constructor } = target;\r\n            var { get, set } = descriptor, hasGet = !!get, hasSet = !!set, hasGetOrSet = (hasGet || hasSet), hasGetAndSet = (hasGet && hasSet);\r\n            var metadata = new Metadata(constructor);\r\n            var name = (attr || key), alias = key;  // name === alias if !attr\r\n            var data = { decorator: 'attribute:observee', name, alias, hasGet, hasSet, hasGetOrSet, hasGetAndSet };\r\n            \r\n            if (!hasGetOrSet) descriptor.writable = true;  // do not declare WHATSOEVER unless !hasGetOrSet\r\n            metadata.$members.set(key, data);\r\n            metadata.$observedAttributes.set(key, data);\r\n            \r\n            return data;\r\n        };\r\n    };\r\n    observer(attr: string): any {  // @usage: @observe('options') handleOptionsChange(val, old) {}\r\n        var thus = this;\r\n        \r\n        return function get(target: any, key: string, descriptor: any = {}): any {\r\n            var { constructor } = target;\r\n            var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n            var { value: handler } = descriptor;\r\n            var metadata = new Metadata(constructor);\r\n            var name = key;\r\n            var data = { decorator: 'attribute:observer', name, attr, handler };\r\n            \r\n            metadata.$members.set(key, data);\r\n            metadata.$watchers.set(attr, data);\r\n            \r\n            return data;\r\n        };\r\n    };\r\n    \r\n    element(selector: string): any {\r\n        var thus = this;\r\n        var isHost = (selector === 'this');\r\n        \r\n        return function get(target: any, key: string, descriptor: any = {}): any {\r\n            var { constructor } = target;\r\n            var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n            var metadata = new Metadata(constructor);\r\n            var name = key;\r\n            var data = { decorator: 'reference:element', name, key, selector, isHost };\r\n            \r\n            metadata.$members.set(key, data);\r\n            metadata.$elements.set(key, data);\r\n            \r\n            return descriptor;\r\n        };\r\n    };\r\n    \r\n    attr(selector: string): any {\r\n        var thus = this;\r\n        var re = new RegExp(/^(.*)\\[(.+)\\]$/);\r\n        var matches = re.exec(selector), [ match, tagName, attr ] = matches;\r\n        var isHost = (tagName === 'this');\r\n        \r\n        return function get(target: any, key: string, descriptor: any = {}): any {\r\n            var { constructor } = target;\r\n            var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n            var metadata = new Metadata(constructor);\r\n            var name = attr;\r\n            var data = { decorator: 'reference:attribute', name, key, selector, isHost };\r\n            \r\n            metadata.$members.set(key, data);\r\n            metadata.$attrs.set(key, data);\r\n            \r\n            return descriptor;\r\n        };\r\n    };\r\n    \r\n    listener(type: string) {\r\n        var thus = this;\r\n        var isHost = !type;\r\n        \r\n        return function get(target: any, key: string, descriptor: any = {}): any {\r\n            console.log('----------', target, key, descriptor);\r\n            var { constructor } = target;\r\n            // var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n            var { value: handler } = descriptor;\r\n            var metadata = new Metadata(constructor);\r\n            var name = key;\r\n            var data = { decorator: 'handler:dom', name, key, type, handler, isHost };\r\n            \r\n            metadata.$members.set(key, data);\r\n            metadata.$listeners.set(key, data);\r\n            \r\n            return descriptor;\r\n        };\r\n    };\r\n    \r\n    message(type: string): any {  // TODO\r\n        var thus = this;\r\n        \r\n        return function get(target: any, key: string, descriptor: any = {}): any {\r\n            var { constructor } = target;\r\n            var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n            var { value: handler } = descriptor;\r\n            var metadata = new Metadata(constructor);\r\n            var name = key;\r\n            var data = { decorator: 'handler:comm', name, key, type, handler };\r\n            \r\n            metadata.$members.set(key, data);\r\n            metadata.$subscriptions.set(key, data);\r\n            \r\n            return descriptor;\r\n        };\r\n    };\r\n\r\n})();\r\n\r\n\r\n\r\n// function attr(attr?: string): any {\r\n    \r\n//     return function get(target: any, name: string, descriptor: any = {}): any {\r\n//         var { constructor } = target;\r\n//         var { get, set } = descriptor, hasGetOrSet = !!(get || set);\r\n//         var descriptor = { ...descriptor };\r\n        \r\n//         if (!hasGetOrSet) descriptor.writable = true;\r\n//         constructor.observedAttributes = constructor.observedAttributes || [ ];\r\n//         constructor.observedAttributes.push(name);\r\n        \r\n//         return descriptor;\r\n//     };\r\n// }\r\n// function watch(attr: string): any {\r\n    \r\n//     return function get(target: any, name: string, descriptor: any): any {\r\n//         var { constructor } = target;\r\n//         var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n//         var { value: handler } = descriptor;\r\n        \r\n//         constructor.watchers = constructor.watchers || new Map();\r\n//         constructor.watchers.set(attr, { attr, name, handler });\r\n        \r\n//         return descriptor;\r\n//     };\r\n// }\r\n\r\n// function bind(type: string): any {  // TODO: rename to \"event\"\r\n    \r\n//     return function get(target: any, name: string, descriptor: any): any {\r\n//         var { constructor } = target;\r\n//         var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n//         var { value: handler } = descriptor;\r\n        \r\n//         constructor.listeners = constructor.listeners || [ ];\r\n//         constructor.listeners.push({ type, name, handler });\r\n        \r\n//         return descriptor;\r\n//     };\r\n// }\r\n\r\n// function handle(channel: string): any {\r\n    \r\n//     return function get(target: any, name: string, descriptor: any): any {\r\n//         var { constructor } = target;\r\n//         var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n//         var { value } = descriptor;\r\n        \r\n//         constructor.subscriptions = constructor.subscriptions || [ ];\r\n//         constructor.subscriptions.push({ type: channel, name, value });\r\n        \r\n//         return descriptor;\r\n//     };\r\n// }\r\n\r\n// function cashe$(options: any = {}): any {\r\n//     return function get(): any {};\r\n// }\r\n// function casheP(options: any = {}): any {\r\n//     return function get(): any {};\r\n// }\r\n\r\n// const observe = decorators.observe;\r\n// const observee = decorators.observee;\r\n// const observer = decorators.observer;\r\n// //\r\n// const element = decorators.element;\r\n// const attr = decorators.attr;\r\n// //\r\n// const listener = decorators.listener;\r\n// const comm = decorators.comm;\r\n\r\nconst {\r\n    observe, observee, observer,\r\n    element, attr,\r\n    listener, message,\r\n} = decorators;\r\n\r\nexport { Element, Component, Directive, Pipe, Service };\r\nexport { observe, observee, observer };\r\nexport { element, attr };\r\nexport { listener, message };\r\n// export { attr, watch };\r\n// export { bind };\r\n// export { handle };\r\n","\r\nvar CSV = new class CSV {\r\n    \r\n    // JSON.stringify(value[, replacer[, space]])\r\n    stringify(collection, fields, delimiter) {  // Word Art Cloud: wordToWeight() & weightToWord()\r\n        /**\r\n         * Given: map.get(fields[i]).push( collection[j][ fields[i] ] )\r\n         * Then: every column (fields[i]) contains an equal number of values as any other column.\r\n         * Because: map.get(fields[i])[0] === collection[j][ fields[i] ]\r\n         */\r\n        var $table = new Map();  // Map { 0 => { a, b, c, ... } }\r\n        var $values = new Map();  // Map { a => [ x, y, z, ... ] }\r\n        var $lines = new Map();  // Map { 0 => [ x, y, z, ... ] }\r\n        var matrix = [ ];  // [ [a,b,c,...], [a,b,c,...], ... ]\r\n        var lines = [ ];\r\n        var span = 0;\r\n        \r\n        if (!fields) fields = Object.keys( collection.reduce( (o, x) => ({ ...o, ...x }), { } ) );  // gets all available keys across all objects in collection\r\n        \r\n        for (let i = 0, width  = collection.length; i < width;  i++)\r\n        for (let j = 0, height = fields.length;     j < height; j++)\r\n\t\t(function create(value, [x, y], row, i, rows, col, j, columns) {\r\n            var _id = x, field = col;\r\n            var record = $table.get(_id) || { _id };\r\n            var column = $values.get(col) || [ ];\r\n            var line = $lines.get(x) || [ ];\r\n            \r\n            if ({ 'undefined': true }[ value ]) value = '';\r\n            matrix[x] = matrix[x] || [ ];\r\n            matrix[x][y] = record[field] = column[x] = line[y] = value;\r\n            \r\n            $table.set(_id, record);  // ensure gets set first time\r\n            $values.set(col, column);  // ensure gets set first time\r\n            $lines.set(x, line);  // ensure gets set first time\r\n            \r\n            span = Math.max.apply(null, [ span, col.length, `${value}`.length ]);\r\n            lines[x] = line.join(',');\r\n            \r\n        })(collection[i][ fields[j] ], [i, j], collection[i], i, collection, fields[j], j, fields);\r\n        \r\n        var tabs = Array.apply(null, { length: span });\r\n        var delimiter = {\r\n            '\\t': tabs.map( () => '\\t' ),\r\n            '\\s': tabs.map( () => '\\s' ),\r\n            'undefined': [ ],\r\n        }[ delimiter ].join('');\r\n        var columns = fields.join(',');\r\n        var csv = [ columns ].concat(lines).join('\\n');\r\n        var csv = csv.replace(/,/img, `,${delimiter}`);\r\n        \r\n        return csv;\r\n    }\r\n    \r\n    parse(csv) {\r\n        var lines = csv.split(/\\n+/img), [ fields ] = lines, fields = fields.split(/,\\t*/), rows = lines.slice(1);\r\n\t\tvar collection = rows.reduce( getObject.bind(this, fields), [ ] );\r\n        \r\n        function getObject(fields, array, line, row, lines) {\r\n            var o = fields.reduce( getValue.bind(this, line), { } );\r\n            array.push(o);\r\n            \r\n            function getValue(line, o, key, i, fields) {\r\n                var values = line.split(/,\\s*/), value = values[i], datum = { [key]: value };\r\n                return { ...o, ...datum };\r\n            }\r\n            \r\n            return array;\r\n        }\r\n        \r\n\t\treturn collection;\r\n    }\r\n    \r\n};\r\n\r\n/**\r\n * @ URLComponents\r\n */\r\nclass URLComponents {\r\n    hash: string = '';\r\n    host: string = '';\r\n    hostname: string = '';\r\n    href: string = '';\r\n    origin: string = '';\r\n    pathname: string = '';\r\n    port: string = '';\r\n    protocol: string = '';\r\n    search: string = '';\r\n    \r\n    constructor(url) {\r\n        var parser = document.createElement('a');\r\n        parser.href = url;\r\n\r\n        this.hash = parser.hash;\r\n        this.host = parser.host;\r\n        this.hostname = parser.hostname;\r\n        this.href = parser.href;\r\n        this.origin = parser.origin;\r\n        this.pathname = parser.pathname;\r\n        this.port = parser.port;\r\n        this.protocol = parser.protocol;\r\n        this.search = parser.search;\r\n\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nclass ParameterMap {\r\n    name: string = '';\r\n    value: string = '';\r\n    \r\n    constructor(str) {\r\n        var pair = str.split('=');\r\n        this.name = pair[0];\r\n        this.value = pair[1];\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nclass QueryMap {\r\n    \r\n    constructor(q) {\r\n        var query = decodeURIComponent(q);\r\n        var exp = /[^\\?|\\&]([^=]+)\\=([^&]+)/g;\r\n        var res = query.match(exp);\r\n\r\n        for (var i = 0, len = res.length; i < len; i++) {\r\n            var map = new ParameterMap(res[i]);\r\n            this[map.name] = map.value;\r\n        }\r\n\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nclass Utilities {\r\n    CSV: any = CSV;\r\n    console: any = console;\r\n    \r\n    constructor() {\r\n        return this;\r\n    }\r\n      \r\n    noop() {}\r\n    \r\n    extend(object, first?, ...more) {\r\n        var o = Object.keys(first).reduce( (o, k) => (o[k] = first[k], o), object );\r\n        if (more.length) return this.extend(object, ...more);\r\n        return o;\r\n    }\r\n    \r\n    is(value) {\r\n        var isnt = { null: true, undefined: true, '': true, 0: false }[ value ];\r\n        return !isnt;\r\n    }\r\n    \r\n    timeout(handler, ...splat) {\r\n        var cancel = window.setTimeout(handler, ...splat);\r\n        return cancel;\r\n    }\r\n    \r\n    enqueue(handler, ...splat) {\r\n        var result = this.timeout(handler, 0, ...splat);\r\n        return result;\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @intention\r\n     *  * Leverage global.setTimeout for intervals instead of global.setInterval.\r\n     * @patterns { Curry }\r\n     * @usage \r\n     *  * var clear = utils.interval( () => console.log('called!'), 1000 );\r\n     *  * setTimeout(clear, (1000 * n) );  // clears interval after n seconds\r\n     */\r\n    interval(handler, delay, ...splat) {\r\n        var thus = this, timeout = thus.timeout(set, delay, ...splat);\r\n        \r\n        function set(...params) {\r\n            if ( !timeout ) return console.log('break');  // > -1\r\n            handler.call(this, ...params);\r\n            timeout = thus.timeout(set, delay, ...splat);\r\n        }\r\n        function clear() {\r\n            clearTimeout(timeout);\r\n            timeout = null;\r\n            return !timeout;  // assert is cleared\r\n        }\r\n        \r\n        return clear;\r\n    }\r\n    \r\n    debounce(fn, delay) {  // # thx Remy Sharp\r\n        var timer = null;\r\n        \r\n        function _debounce(...splat) {\r\n            var context = this;\r\n            clearTimeout(timer);\r\n            timer = setTimeout( () => fn.call(context, ...splat), delay);\r\n        };\r\n        \r\n        return _debounce;\r\n    }\r\n    \r\n    throttle(fn, threshhold, scope) {  // # thx Remy Sharp\r\n        var threshhold = threshhold || 250, last, deferTimer;\r\n        \r\n        function _throttle(...splat) {\r\n            var context = scope || this, now = +(new Date()), last = now, final = (last + threshhold);\r\n            var invoke = () => ( fn.call(context, ...splat), last = now );\r\n            \r\n            if (!last || now >= final) return invoke();  // don't hold on to it\r\n            clearTimeout(deferTimer);\r\n            deferTimer = setTimeout(invoke, threshhold);\r\n        };\r\n        \r\n        return _throttle;\r\n    }\r\n    \r\n    uuid() {\r\n        function replace(c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n        }\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, replace);\r\n    }\r\n        \r\n    escapeHTML(s) {\r\n        return s.replace(/[&\"<>]/g, function (c) {\r\n            return {\r\n                '&': '&amp;',\r\n                '\"': '&quot;',\r\n                '<': '&lt;',\r\n                '>': '&gt;'\r\n            }[c];\r\n        });\r\n    }\r\n    \r\n    \r\n    drill(data: any, path: string): any {  // @usage: var x = drill('a.b.c.id', { a: { b: { c: { id: x } } } });\r\n        var keys = path.split('.'), key = keys.shift();\r\n        \r\n        if (!data) return undefined;  // not unlike an operation of { 'existent': true }[ 'absent' ] > undefined\r\n        if (!key) return data;  // data is final\r\n        \r\n        return this.drill( data[key], keys.join('.') );  // TCO/TCE\r\n    }\r\n\r\n\r\n    /**\r\n     * @ Inspiration: Douglas Crockford (String.prototype.supplant)\r\n     */\r\n    interpolate(str) {\r\n        return (o) => str.replace(/{{([^{}]*)}}/g, (a, b) => {\r\n            var value = this.drill(o, b), val = ''+value;  // default & convert to string\r\n            \r\n            if (!value) val = a;  // leave {{key[.x[.y[.z]]]}} syntax in string so that multiple iterations of interpolation may occur\r\n            else if (value.call) val = ''+value();  // get return value\r\n            \r\n            return this.escapeHTML(val);  // assume rational value for string result\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @ THX: Douglas Crockford (String.prototype.supplant)\r\n     * @ INTERPOLATE\r\n     */\r\n    interpolateShallow(str) {\r\n        return (o) => {\r\n            return str.replace(/{{([^{}]*)}}/g, (a, b) => {\r\n                var val = ''+o[b];\r\n                return this.escapeHTML(val);  // TODO: escape HTML-Entities\r\n            });\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @ THX: Douglas Crockford (String.prototype.supplant)\r\n     * @ INSECURE_INTERPOLATE\r\n     */\r\n    INSECURE_INTERPOLATE(str) {\r\n        return function interpolate(o) {\r\n            return str.replace(/{{([^{}]*)}}/g, function (a, b) {\r\n                var val = ''+o[b];\r\n                return val;  // TODO: escape HTML-Entities\r\n            });\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * @ EXTERPOLATE | PARSE ROUTE-URI\r\n     */\r\n    exterpolate(str) {\r\n        var str = str || '';\r\n        var re = /:[^\\s/]+|{+[^\\s/]+}+/g;\r\n        var matcher = new RegExp(str.replace(re, '([\\\\w-]+)'));\r\n\r\n        return function getValues(string) {\r\n            if (!string.match(matcher)) return false;\r\n            var string = string || '';\r\n            var result = string.match(matcher);\r\n            var keys = str.match(re);\r\n            var values = result.slice(1);\r\n            var map = {};\r\n\r\n            if (keys && values) {\r\n                for (var i = 0, len = keys.length; i < len; i++) {\r\n                    var key = keys[i].replace(/[:{}]+/g, '');\r\n                    var val = values[i];\r\n                    if (key !== val) map[key] = val;\r\n                }\r\n            }\r\n\r\n            return map;\r\n        };\r\n    }\r\n    \r\n    parseURL(url) {\r\n        var a = document.createElement('a');\r\n        a.href = url;\r\n        \r\n        return {\r\n            hash: a.hash,\r\n            host: a.host,\r\n            hostname: a.hostname,\r\n            href: a.href,\r\n            origin: a.origin,\r\n            pathname: a.pathname,\r\n            port: a.port,\r\n            protocol: a.protocol,\r\n            search: a.search,\r\n        };\r\n    }\r\n    \r\n    sortByKey(k, a, b) {  // Sort by Multiple keys (Reusable) using sortByKey()\r\n        // USAGE:\r\n        // var sort = sortByKey.bind(collection, 'x');\r\n        // collection.sort(sort);\r\n        if (a[k] > b[k]) return  1;\r\n        if (a[k] < b[k]) return -1;\r\n        return 0;\r\n    }\r\n    \r\n    // Sort by Multiple keys (Reusable + Optimized) using Methods-Array\r\n    priorityMethodSort(methods, a, b) {\r\n        // USAGE:\r\n        // var sort = prioritySort.bind(collection, [ sort$A, sort$B, sort$C, sort$D ]);\r\n        // collection.sort(sort);\r\n        var i = 0, methods = Array.prototype.slice.call(methods || [ ], 0);\r\n        while (i === 0 && methods.length) i = methods.shift().call(this, a, b);\r\n        return i;\r\n    }\r\n    \r\n    priorityKeySort(keys, a, b) {  // Sort by Multiple keys (Reusable + Optimized) using Reusable prioritySort()\r\n        // USAGE:\r\n        // var sort = prioritySort.bind(collection, [ 'a', 'b', 'c', 'd' ]);\r\n        // collection.sort(sort);\r\n        // console.log('>', collection);\r\n        // >  [\r\n        //       { \"a\": 0, \"b\": 0, \"c\": 0, \"d\": 0 },\r\n        //       { \"a\": 0, \"b\": 1, \"c\": 2, \"d\": 2 },\r\n        //       { \"a\": 0, \"b\": 1, \"c\": 2, \"d\": 3 },\r\n        //       { \"a\": 1, \"b\": 1, \"c\": 1, \"d\": 1 },\r\n        //       { \"a\": 1, \"b\": 2, \"c\": 2, \"d\": 1 },\r\n        //       { \"a\": 1, \"b\": 2, \"c\": 3, \"d\": 1 },\r\n        //       { \"a\": 2, \"b\": 2, \"c\": 2, \"d\": 2 },\r\n        //       { \"a\": 3, \"b\": 3, \"c\": 3, \"d\": 3 }\r\n        //    ]\r\n        var i = 0, keys = Array.prototype.slice.call(keys || [ ], 0);\r\n        while (i === 0 && keys.length) i = this.sortByKey.call(this, keys.shift(), a, b);\r\n        return i;\r\n    }\r\n    \r\n    getFileSize(size, unit = 'auto') {  // size: number, unit: 'auto'|'byte'|'KB'|'MG'|'GB'|'TB'|'PB'\r\n        var $ = this.toFixed.bind(this);\r\n        var $bytes = $(size || 0), $KB = $($bytes / 1024), $MB = $($KB / 1024), $GB = $($MB / 1024), $TB = $($GB / 1024), $PB = $($TB / 1024);\r\n        var bytes = `${$bytes} bytes`, KB = `${$KB} KB`, MB = `${$MB} MB`, GB = `${$GB} GB`, TB = `${$TB} TB`, PB = `${$PB} PB`;\r\n        var $auto = $bytes;\r\n        var auto;\r\n        var values = { bytes, KB, MB, GB, TB, PB, auto: undefined };\r\n        var result = { unit: '', value: Infinity };\r\n        var datasets = [\r\n        { unit: 'bytes', value: $bytes },\r\n        { unit: 'KB', value: $KB },\r\n        { unit: 'MB', value: $MB },\r\n        { unit: 'GB', value: $GB },\r\n        { unit: 'TB', value: $TB },\r\n        { unit: 'PB', value: $PB },\r\n        ];\r\n        while ( (result.value / 1024) >= 1 && datasets.length ) result = datasets.shift();\r\n        values.auto = `${result.value} ${result.unit}`;\r\n        \r\n        \r\n        \r\n        return values[unit];\r\n    }\r\n    \r\n    toFixed(n) { return Number( Math.round(+(n + 'e2')) + 'e-2' ); }\r\n    \r\n    exists(n) { return !!~n; }\r\n    \r\n}\r\n\r\nexport { Utilities };\r\n","\r\n/**\r\n * @name: Deferred Promise\r\n * @intention\r\n *  * Externalize the function of a Promise's \"Executor\" parameters so that fulfillment & rejection\r\n *  * can be performed at a later time.\r\n */\r\nclass Deferred<T> {\r\n    private _resolve: Function = () => {};\r\n    private _reject: Function = () => {};\r\n    public promise: Promise<T> = new Promise<T>( this.exe.bind(this) );\r\n        \r\n    constructor() {}\r\n    \r\n    private exe(resolve, reject) {\r\n        this._resolve = resolve;\r\n        this._reject = reject;\r\n    }\r\n    \r\n    resolve(data) {\r\n        this._resolve(data);\r\n        return this.promise;\r\n    }\r\n    reject(data) {\r\n        this._reject(data);\r\n        return this.promise;\r\n    }\r\n    \r\n}\r\n\r\nexport { Deferred };\r\n","\r\nexport { Utilities } from './utilities';\r\nexport { keycodes } from './keycodes';\r\n// export { patterns } from './patterns';\r\n// export { ds } from './ds';\r\nexport { Deferred } from './patterns/other/deferred';\r\n","\r\nfunction bootstrap(target) {\r\n    var element = target;\r\n    var selector = this.selector;\r\n    var data = element.dataset || {};\r\n    var ex = /[\\s]+/img;\r\n    var slug = data.behavior || element.v || '';\r\n    var components = slug.split(ex);\r\n    var children = element.children;// element.querySelectorAll(selector);\r\n    (this, document, data, slug, components, children);\r\n    \r\n    var resolveScope = function resolveScope(parent, child) {\r\n        var isDirectDescendant = (child.parentNode === parent);\r\n        if (isDirectDescendant) bootstrap.call(this, child);\r\n    }.bind(this, element);\r\n    \r\n    // components.forEach(this.bootstrap.bind(this, element));\r\n    // Array.prototype.forEach.call(children, resolveScope);\r\n    \r\n    // ... or? ...\r\n    \r\n    Array.prototype.forEach.call(children, resolveScope);  // TODO: Optimize!!!\r\n    if (!!slug) components.forEach(this.bootstrap.bind(this, element));\r\n}\r\n\r\nfunction $bootstrap(root, medium) {\r\n    var scopeSelector = '[data-behavior]'\r\n      , $root = $(root)\r\n      , $parent = $root.find(scopeSelector)\r\n      , hasBehavior = $root.is(scopeSelector)\r\n      ;\r\n    var slug = $root.attr('data-behavior')\r\n      , formattedSlug = slug && slug.replace(/^[,;\\s]+|[,;\\s]+$/g, '').replace(/[,;\\s]+/g, '|').replace(/[|]+$/g, '') || ''\r\n      , moduleIds = $.unique(formattedSlug.split('|')).sort()\r\n      , scopeId = moduleIds.join(' ')\r\n      ;\r\n    var childMedium = medium.$spawn(new function ChildScope() { this.element = root; });\r\n    \r\n\r\n    var resolveBehavior = function resolveBehavior(scope, behavior, i, a) {\r\n        var scope = ($root.is('html')) ? document : scope;\r\n        this.start(behavior, scope, scopeId, childMedium);\r\n    }.bind(this, $root[0]);\r\n\r\n    var resolveChildren = function resolveChildren(i, scope) {\r\n        var $firstScope = $(scope);\r\n        if (!$($firstScope.parent()).is($parent)) {\r\n            autoRegisterModules.call(this, $firstScope, childMedium);\r\n        }\r\n\r\n    }.bind(this);\r\n\r\n    moduleIds.forEach(resolveBehavior);\r\n    $parent.each(resolveChildren);\r\n\r\n}\r\n\r\nclass DefaultDirector {}\r\n\r\nfunction DefaultServicesSandbox(utils) { return utils; }\r\nfunction DefaultComponentSandbox(element) { return element; }\r\n\r\nexport { bootstrap, $bootstrap, DefaultDirector, DefaultServicesSandbox, DefaultComponentSandbox };\r\n","\r\nclass Handler {\r\n    respond(e: CustomEvent): any {\r\n        // e.preventDefault();\r\n        // e.stopPropagation();\r\n        // e.stopImmediatePropagation();\r\n        // return false;\r\n        return e.detail;\r\n    }\r\n}\r\n\r\n/**\r\n * @intention \r\n * @usage \r\n *  * var cor = new ChainOfResponsibility({ ... });  // see config/constructor\r\n *  * cor.push({ respond(e) {...} });\r\n *  * cor.push({ respond(e) { e.stopPropagation(); return false } }, { respond(e) {...} }, ...);\r\n *  * [EventTarget].addEventListener('click', cor.respond.bind(cor), false);  // only 1st 2 handlers get invoked\r\n *  * \r\n    * private nodeHandlers: ChainOfResponsibility = new ChainOfResponsibility({}, [\r\n    *     { respond: (e: CustomEvent) => console.log('COR: A', e) },\r\n          { respond: (e: CustomEvent) => console.log('COR: B', e) },\r\n          // { respond: (e: CustomEvent) => e.stopPropagation() },\r\n          { respond: ({ detail: value }: CustomEvent) => console.log('COR: C', value) },\r\n    * ]);\r\n */\r\nclass ChainOfResponsibility extends Array {\r\n    protected config: any = { cancelable: false, bubbles: true };\r\n        \r\n    constructor(config, responders: Handler[] = []) {\r\n        super();\r\n        var { bubbles, cancelBubble, cancelable, defaultPrevented } = config;\r\n        \r\n        this.config = { ...this.config, ...config };\r\n        this.push(...responders);\r\n        \r\n        return this;\r\n    }\r\n    \r\n    protected execute(e: CustomEvent, i: number = 0, handlers: Handler[] = this.slice()): CustomEvent {\r\n        var handler = handlers[i] || new Handler();\r\n        var result = this.propagate(e, handler, i, handlers);  // process & reassign in case of change\r\n        var event = new CustomEvent(e.type, { detail: result }), next = handlers[i + 1];\r\n        \r\n        if (e.cancelBubble) event.stopPropagation();\r\n        if (e.cancelBubble) return event;  // if cancelled, stop immediately. return with value from cancellor.\r\n        if (next) return this.execute(event, ++i);  // has sibling handler. continue with new detail.\r\n        return event;  // if end reached and event not cancelled\r\n    }\r\n    \r\n    protected propagate(e: CustomEvent|any, handler: Handler, i: number, handlers: Handler[]): any {  // TODO: use Recursion to avoid unnecessary iterations\r\n        if (e.cancelBubble) return e;\r\n        var { config } = this;\r\n        var value = handler.respond.call(handler, e)\r\n          , cancelBubble = !{ 'undefined': true, 'false': false }[ value ]\r\n          ;\r\n        if (config.cancelable && cancelBubble) ( e.stopPropagation(), e.stopImmediatePropagation() );\r\n        // e.eventPhase = i;\r\n        \r\n        return value;\r\n    }\r\n    \r\n    chain(handler: Handler, ...handlers: Handler[]): ChainOfResponsibility {\r\n        this.push(handler, ...handlers);\r\n        return this;\r\n    }\r\n    \r\n    respond(e: CustomEvent<any>): CustomEvent<any> {\r\n        var event = this.execute(e);\r\n        // var result = this.reduce( this.propagate.bind(this), e );\r\n        return event;  // subclasses can implement return result.cancelBubble or return false;\r\n    }\r\n    \r\n}\r\n\r\nexport { ChainOfResponsibility, Handler };\r\n","\r\n/**\r\n * @intention \r\n * @usage \r\n *  * var command = new Command(console, 'log');\r\n *  * command.execute('This gets logged by the console');\r\n */\r\nclass Command {\r\n    private context: any = null;\r\n    private action: string = '';\r\n        \r\n    constructor(context, action) {\r\n        this.context = context;\r\n        this.action = action;\r\n    }\r\n    \r\n    execute(...splat: any[]) {\r\n        var { context, action } = this;\r\n        var value = context[action](...splat);\r\n        return value;\r\n    }\r\n    \r\n}\r\n\r\nclass StrictCommand extends Command {\r\n    \r\n    public execute = (...splat: any[]) => super.execute(...splat);\r\n    \r\n}\r\n\r\nexport { Command, StrictCommand };\r\n","/**\r\n * THIS SHOULD ACTUALLY BE JUST AN EVENT-AGGREGATOR THAT CAN BE USED [PER USUAL] ACROSS\r\n * THE SYSTEM, WHILE A \"WebSocketDecorator\" CAN BE USED TO NORMALIZE THE EXTERNAL LIBRARY.\r\n */\r\nvar EventEmitter = EventTarget;\r\nclass EventHub extends EventEmitter {\r\n    \r\n    publish(channel, data) {\r\n        var e = new CustomEvent(channel, { detail: data });\r\n        this.dispatchEvent(e);\r\n        return this;\r\n    }\r\n    subscribe(channel, handler) {\r\n        this.addEventListener(channel, handler, false);\r\n        return this;\r\n    }\r\n    unsubscribe(channel, handler) {\r\n        this.removeEventListener(channel, handler, false);  // what is 3rd param again?\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { EventHub };\r\n","\r\nimport { Utilities, Deferred } from \"@motorman/core/utilities\";\r\nimport { IEventAggregator } from \"@motorman/core/eventaggregator.interface\";\r\nimport { StrictCommand as Command } from \"@motorman/core/utilities/patterns/behavioral\";\r\nimport { ChainOfResponsibility } from \"@motorman/core/utilities/patterns/behavioral\";\r\n\r\ntype ListenerMap = { type: string, name: string, handler: (e: Event, ...splat: any[]) => any };\r\ntype EventEmitter = IEventAggregator&(Comm|Hub);\r\n\r\nvar utils = new (class ElementUtilities extends Utilities {\r\n    \r\n    composeCommand(component: any, name: string) {\r\n        var command = new Command(component, name);\r\n        return command;\r\n    }\r\n    composeExecutor(component: any, name: string) {\r\n        var command = this.composeCommand(component, name), { execute } = command;\r\n        return execute;\r\n    }\r\n    mapExecutor(component: any, item: any) {\r\n        var { name } = item;\r\n        var handler = this.composeExecutor(component, name), details = { ...item, handler };\r\n        return details;\r\n    }\r\n    \r\n})();\r\n\r\nclass Channels {\r\n    ['LEFECYCLE:ELEMENT:CREATED'] = 'vcomm://created/element';\r\n    ['LEFECYCLE:ELEMENT:CONNECTED'] = 'vcomm://connected/element';\r\n    ['ELEMENT:TEMPLATE:FOUND'] = 'vcomm://found/element/template';\r\n    ['ELEMENT:MUTATION:OBSERVED'] = 'vcomm://observed/element/mutation';\r\n    ['PROXY:INVOKED'] = 'vcomm://invoked/proxy';\r\n    ['PROXY:CONSTRUCT:INVOKED'] = 'vcomm://invoked/proxy/construct';\r\n    ['PROXY:HAS:INVOKED'] = 'vcomm://invoked/proxy/has';\r\n    ['PROXY:GET:INVOKED'] = 'vcomm://invoked/proxy/get';\r\n    ['PROXY:SET:INVOKED'] = 'vcomm://invoked/proxy/set';\r\n    ['PROXY:DELETE:INVOKED'] = 'vcomm://invoked/proxy/delete';\r\n    ['PROXY:APPLY:INVOKED'] = 'vcomm://invoked/proxy/apply';\r\n    ['PROXY:MOCK:INVOKED'] = 'vcomm://invoked/proxy/mock';\r\n}\r\nclass Hub implements IEventAggregator {\r\n    private subscriptions: any = { };\r\n    public channels: Channels = new Channels();\r\n\r\n    constructor() {}\r\n    \r\n    private invoke(subscription, data) {\r\n        var { channel, handler, context } = subscription;\r\n        var e = new CustomEvent(channel, { detail: data });\r\n        handler.call(context, e);\r\n        return this;\r\n    }\r\n\r\n    publish(channel: string, data?: any, ...more: any[]) {\r\n        if (!this.subscriptions[channel]) this.subscriptions[channel] = [ ];\r\n        var subscriptions = this.subscriptions[channel];\r\n        for (let i = 0, len = subscriptions.length; i < len; i++) this.invoke(subscriptions[i], data);\r\n        return this;\r\n    }\r\n    subscribe(channel, handler) {\r\n        if (!this.subscriptions[channel]) this.subscriptions[channel] = [ ];\r\n        var subscription = { channel, handler, context: this };\r\n        this.subscriptions[channel].push(subscription);\r\n        return this;\r\n    }\r\n    unsubscribe(channel, handler) {\r\n        if (!this.subscriptions[channel]) this.subscriptions[channel] = [ ];\r\n        // this.target.removeEventListener(channel, handler, false);\r\n        return this;\r\n    }\r\n\r\n}\r\nclass Comm implements IEventAggregator {\r\n    private target = new EventTarget();\r\n    public channels: Channels = new Channels();\r\n\r\n    constructor() {}\r\n\r\n    publish(channel: string, data?: any, ...more: any[]) {\r\n        var e = new CustomEvent(channel, { detail: data });\r\n        this.target.dispatchEvent(e);\r\n        return this;\r\n    }\r\n    subscribe(channel, handler) {\r\n        this.target.addEventListener(channel, handler, false);\r\n        return this;\r\n    }\r\n    unsubscribe(channel, handler) {\r\n        this.target.removeEventListener(channel, handler, false);\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nclass ConstructorProxy {\r\n    private comm: any;\r\n    private Sandbox: any;\r\n    private element: HTMLElement;\r\n    private director: any;\r\n    public sandbox: any;\r\n\r\n    constructor({ comm, Sandbox, element, director }) {\r\n        this.comm = comm;\r\n        this.Sandbox = Sandbox;\r\n        this.element = element;\r\n        this.director = director;\r\n    }\r\n\r\n    construct(Target, args) {\r\n        var { Sandbox, comm, element, director } = this;\r\n        var sandbox = new Sandbox(element, comm, director);\r\n        var params = [].concat(sandbox, 'extra');\r\n        var data = { type: 'construct', Target, args };\r\n        var result = Reflect.construct(Target, params /*, PrototypeConstructor*/);\r\n        \r\n        this.sandbox = sandbox;\r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:CONSTRUCT:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n    \r\n}\r\n\r\nclass MemberProxy {\r\n    private comm: any;\r\n    private source: any;\r\n    private element: HTMLElement;\r\n\r\n    constructor({ comm, source, element }) {\r\n        this.comm = comm;\r\n        this.source = source;\r\n        this.element = element;\r\n    }\r\n\r\n    has(target: any, key: any) {\r\n        var { source, comm } = this;\r\n        var data = { type: 'has', source, key };\r\n        var result = Reflect.has(source, key);\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:HAS:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n\r\n    get(target: any, key: any, receiver: any) {\r\n        // if (target[key].call) return new Proxy( target[key], new MethodProxy({ comm: this.comm, source: this.source, element: this.element }) );\r\n        var { source, comm, element } = this;\r\n        var data = { type: 'get', source, key };\r\n        var result = Reflect.get(source, key);  // omit receiver to get key of source\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:GET:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n\r\n    set(target: any, key: any, value: any, receiver: any) {\r\n        var { source, comm } = this;\r\n        var data = { type: 'set', source, key, value };\r\n        var result = Reflect.set(source, key, value);\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:SET:INVOKED'], data);\r\n        \r\n        return result\r\n    }\r\n\r\n    deleteProperty(target: Function, key: any) {\r\n        var { source, comm } = this;\r\n        var data = { type: 'delete', source, key };\r\n        var result = Reflect.deleteProperty(source, key);\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:DELETE:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nclass MethodProxy {\r\n    private comm: any;\r\n    private source: any;\r\n    private element: HTMLElement;\r\n\r\n    constructor({ comm, source, element }) {\r\n        this.comm = comm;\r\n        this.source = source;\r\n        this.element = element;\r\n    }\r\n\r\n    apply(target, thus, args) {\r\n        var { source, comm } = this;\r\n        var data = { type: 'apply', source, target, thus, args };\r\n        var result = target.call(source, ...args);\r\n        // var result = source[target.name](...args);\r\n        // var result = target.call(thus, ...args);\r\n        // var result = Reflect.apply(target, thus, args);\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:APPLY:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nclass ProxyManager {  // sets up & manages proxy relationships\r\n    \r\n}\r\n\r\nclass Comparitor {\r\n    public previous: any = undefined;\r\n    get name(): string { return this.attr.name; }\r\n    get current(): any { return this.component[ this.name ]; }\r\n    set current(value: any) { this.attr.value = value; }\r\n    get equal(): boolean { return this.detect(); }\r\n    get dirty(): boolean { return !this.equal; }\r\n    \r\n    constructor(private comm: EventEmitter, private component: any, private attr: Attr) {\r\n        var { name, value } = attr;\r\n        this.previous = value;\r\n        return this;\r\n    }\r\n    \r\n    detect() {\r\n        var { comm, name, previous, current } = this;\r\n        var equal = (previous === current);\r\n        var details = { name, previous, current, equal };\r\n        \r\n        if (!equal) comm.publish(comm.channels['ELEMENT:ATTRIBUTE:CHANGE'], details);\r\n        return equal;\r\n    }\r\n    \r\n    update() {\r\n        var { name, component } = this;\r\n        this.previous = this.current = component[name];\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nclass TemplateVariable {  // TODO: this could probably just have attr passed in while using getters for everything\r\n    name: string = '';\r\n    attr: Attr = null;\r\n    element: HTMLElement = null;\r\n    \r\n    constructor(options: any = {}) {\r\n        var { name, attr, element } = options;\r\n        \r\n        this.name = name || this.name;\r\n        this.attr = attr || this.attr;\r\n        this.element = element || this.element;\r\n        \r\n        return this;\r\n    }\r\n    \r\n}\r\nclass TemplateListener extends TemplateVariable {\r\n    type: string = '';\r\n    handler: (e: Event) => any;\r\n    \r\n    constructor(options: any = {}) {\r\n        super(options);\r\n        var { type, handler } = options;\r\n        \r\n        this.type = type || this.type;\r\n        this.handler = handler || this.handler;\r\n        \r\n        return this;\r\n    }\r\n    \r\n}\r\nclass TemplateManagementOptions {\r\n    // reReference: RegExp = /^#(.+)$/;\r\n    reAttrIn: RegExp = /\\[(\\w*)\\]/;\r\n    reStructural: RegExp = /^\\*(\\w*)$/;\r\n    reListener: RegExp = /\\((\\w*)\\)/;\r\n    reListenerValue: RegExp = /(\\w*)\\((.*)\\)/;\r\n    // reInterpolable: RegExp = /{{([^{}]*)}}/g;\r\n}\r\nclass AttributeManager {\r\n    get name() { return this.attr.name; }\r\n    get value() { return this.attr.value; }\r\n    get element() { return this.attr.ownerElement; }\r\n    \r\n    constructor(protected attr: Attr) {\r\n        var { name, value, ownerElement: element } = attr;\r\n        attr.addEventListener('attributechange', this.handleChange, true);\r\n        attr.addEventListener('mutation', (e) => console.log('MUTATION IS A NATIVE EVENT!'), true);\r\n        attr.addEventListener('attributechange', (e) => console.log('MUTATION EVENT!'), true);\r\n        return this;\r\n    }\r\n    \r\n    destroy() {\r\n        var { attr } = this;\r\n        attr.removeEventListener('change', this.handleChange, false);\r\n        return this;\r\n    }\r\n    \r\n    private handleChange = (e: CustomEvent) => {\r\n        var { name, value, element, attr } = this;\r\n        var detail = { name, value, element, attr }, event = new CustomEvent('attributechange', { detail });\r\n        console.log('@AttrManager # handleChange', e, this);\r\n        element.dispatchEvent(event);\r\n        \r\n    };\r\n    \r\n}\r\n\r\nclass MutationManager {\r\n    protected observer: MutationObserver = new MutationObserver( (r, o) => this.observe(r, o) );\r\n    protected element: Element;\r\n    \r\n    constructor(protected comm: EventEmitter, protected component: any) {}\r\n    \r\n    private observe(changes: MutationRecord[], observer: MutationObserver) {\r\n        for(let mutation of changes) this[mutation.type](mutation);\r\n    }\r\n    \r\n    private ['childList'](mutation: MutationRecord) {\r\n        var { element, component, comm } = this;\r\n        console.log('A child node has been added or removed.');\r\n        comm.publish(comm.channels[''], { mutation, element });\r\n    }\r\n    private ['attributes'](mutation: MutationRecord) {\r\n        var { component, comm } = this;\r\n        var { attributeName: name, target: element } = mutation;\r\n        var attr = (element as Element).getAttributeNode(name);\r\n        var detail = mutation, e = new CustomEvent('attributechange', { detail }), a = new CustomEvent('mutation', { detail });\r\n        \r\n        comm.publish(comm.channels['ELEMENT:MUTATION:OBSERVED'], mutation);\r\n        element.dispatchEvent(e);\r\n        attr.dispatchEvent(a);\r\n    }\r\n    private ['subtree'](mutation: MutationRecord) {\r\n        var { element, component, comm } = this;\r\n    }\r\n    \r\n    connect(element: Element, config?: any) {\r\n        var { observer } = this;\r\n        var config = { attributes: true, childList: true, subtree: true, ...config };\r\n        \r\n        this.element = element;\r\n        observer.observe(element, config);\r\n        \r\n        return this;\r\n    }\r\n    \r\n    destroy() {\r\n        this.observer.disconnect();\r\n        // destroy all attribute listeners as well\r\n    }\r\n    \r\n}\r\nclass ContentManager {\r\n    protected dTemplateReady: Deferred<boolean> = new Deferred();\r\n    protected $variables: Map<string, Element> = new Map();\r\n    protected attributes: AttributeManager[] = [ ];\r\n    protected templateListeners: TemplateListener[] = [];\r\n    protected mutations: MutationManager = new MutationManager(this.comm, this.component);\r\n    public fragment: DocumentFragment|Element = new DocumentFragment();\r\n    public template: string = '';\r\n    public content: string = '';\r\n    get component() { return this.element.component; }\r\n    get comm() { return this.element.comm; }\r\n    get $elementRefs() { return this.element.$elementRefs; }\r\n    get elementRefs() { return this.element.elementRefs; }\r\n    get $attrRefs() { return this.element.$attrRefs; }\r\n    get attrRefs() { return this.element.attrRefs; }\r\n    get listeners() { return this.element.listeners; }\r\n    get reAttrIn() { return this.options.reAttrIn; }\r\n    get reStructural() { return this.options.reStructural; }\r\n    get reListener() { return this.options.reListener; }\r\n    get reListenerValue() { return this.options.reListenerValue; }\r\n    protected pipeNodeHandler = (handler: Function) => (e: CustomEvent) => handler.call(this, e.detail, e);\r\n    protected nodeProcessors: ChainOfResponsibility = new ChainOfResponsibility({}, [\r\n        { respond: this.pipeNodeHandler(this.processAttributeNodeRepeat) },  // note Execution Guards in method\r\n        { respond: this.pipeNodeHandler(this.processElementNode) },\r\n        { respond: this.pipeNodeHandler(this.processTextNode) },\r\n        { respond: this.pipeNodeHandler(this.processCommentNode) },\r\n        { respond: this.pipeNodeHandler(this.processAttributeNodeRepeat) },\r\n    ]);\r\n    protected pipeAttributeHandler = (handler: Function) => (e: CustomEvent) => handler.call(this, e.detail, e);\r\n    protected attributeProcessors: ChainOfResponsibility = new ChainOfResponsibility({}, [\r\n        { respond: this.pipeAttributeHandler(this.handlePropertyBinding) },\r\n        { respond: this.pipeAttributeHandler(this.handleListenerBinding) },\r\n    ]);\r\n    \r\n    constructor(private element: HTMLElement&any, private options: TemplateManagementOptions) {}\r\n    \r\n    parseNode(node: Node): Node {\r\n        var { nodeProcessors: cor } = this;\r\n        var e = new CustomEvent('domnodeprocess', { detail: <any>node })\r\n          , e = cor.respond(e)\r\n          , { detail: result } = e\r\n          ;\r\n        var { isConnected, parentNode: parent, previousSibling: previous, nextSibling: next, firstChild: child } = result;\r\n        \r\n        // RECURSION\r\n        if (result !== node) return this.parseNode(result);  // reparse. assume replacement occurred. do not continue for next or child.\r\n        if (child) this.parseNode(child);  // TCO???\r\n        if (next) this.parseNode(next);  // TCO???\r\n        this.dTemplateReady.resolve(true);  // gets fulfilled after last element processed. noop after that.\r\n        \r\n        return node;  // result can still equal node\r\n    }\r\n    \r\n    private processAttributeNodeRepeat(node: Node&Element, response: CustomEvent): Node&Element {\r\n        if (!{ '1': true }[ node.nodeType ]) return node;  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\r\n        \r\n        if ( !node.hasAttribute('*each') ) return node;\r\n        else response.stopPropagation();  // discontinue processing. abort/break chain. do not pass into next process\r\n        \r\n        var attribute: Attr = node.getAttributeNode('*each')\r\n          , replacement: Node&Element = this.handleStructuralRepeat(attribute)\r\n          ;\r\n        return replacement;\r\n    }\r\n    private handleStructuralRepeat(attr: Attr) {\r\n        var { reStructural, component } = this;\r\n        var { name, value, ownerElement: instructor } = <any>attr;\r\n        var { previousSibling: previous } = instructor;\r\n        var matches = reStructural.exec(name), [ match, type ] = matches;\r\n        var [ namespace, property ] = value.split(' of ');\r\n        var items = component[property] || [ { id: 3 }, { id: 2 }, { id: 1 } ];\r\n        var ignore = instructor.removeAttribute(match);  // avoid infinite loop\r\n        var clones = items.map( (item) => utils.interpolate(instructor.outerHTML)({ ...component, [namespace]: item }) )  // not working because utils.interpolate doesn't account for namespaces (x.y.z)\r\n          , elements = clones.join('\\n')\r\n          ;\r\n        instructor.outerHTML = elements;  // replace current element with clones. create real Nodes in DOM Tree & [Heap] memory.\r\n        \r\n        return previous.nextSibling;  // that node which now exists at instructor's index due to replacement\r\n    }\r\n    \r\n    private processElementNode(node: Node&Element): Node&Element {  // Node.ELEMENT_NODE === 1\r\n        if (!{ '1': true }[ node.nodeType ]) return node;  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\r\n        var attributes: NamedNodeMap = node.attributes, attrs = Array.prototype.slice.call(attributes), attr = attrs.shift();\r\n        var result = this.processAttributeNode(attr, ...attrs);\r\n        \r\n        return node;\r\n    }\r\n    private processAttributeNode(node: Node&Attr, ...more: (Node&Attr)[]): Node&Attr {  // Node.ATTRIBUTE_NODE === 2\r\n        if (!node) return node;\r\n        if (!{ '2': true }[ node.nodeType ]) return node;  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\r\n        var { name, value, ownerElement: owner } = node;\r\n        var { attributeProcessors: cor } = this;\r\n        var e = new CustomEvent('domnodeattributeprocess', { detail: <any>node })\r\n          , e = cor.respond(e)\r\n          , { detail: result } = e\r\n          ;\r\n        var next: Node&Attr = more.shift();\r\n        \r\n        if (next) this.processAttributeNode(next, ...more);  // TCO???\r\n        return node;\r\n    }\r\n    private handlePropertyBinding(node: Node&Attr): Node&Attr {\r\n        if (!{ '2': true }[ node.nodeType ]) return node;  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\r\n        if ( !this.reAttrIn.test(node.name) ) return node;\r\n        var { reAttrIn, component } = this;\r\n        var { name, value, ownerElement: owner } = node;\r\n        var matches = reAttrIn.exec(name), [ match, property ] = matches;\r\n        var { [value]: datum } = component;\r\n        \r\n        // console.log('ATTR (IN) %O', node, property, node.value, datum);\r\n        // ownerElement.setAttribute(property, datum);\r\n        owner[property] = datum;\r\n        \r\n        return node;\r\n    }\r\n    private handleListenerBinding(node: Node&Attr): Node&Attr {\r\n        if (!{ '2': true }[ node.nodeType ]) return node;  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\r\n        if ( !this.reListener.test(node.name) ) return node;\r\n        var { templateListeners, reListener } = this;\r\n        var { name, ownerElement: element } = node, matches = reListener.exec(name), [ match, type ] = matches;\r\n        var handler = this.createBindingInvoker(node);\r\n        var details = new TemplateListener({ name, type, node, element, handler });\r\n        // console.log('LISTENER %O', node);\r\n        \r\n        templateListeners.push(details);\r\n        return node;\r\n    }\r\n    private createBindingInvoker(attr: Attr): Function {\r\n        var { component, reListenerValue } = this;\r\n        var { name, value } = attr;\r\n        var [ match, method, args ] = value.match(reListenerValue);\r\n        var exe = utils.composeExecutor(component, method);\r\n        var op = `with($_) return eval(\"h(${args})\");`;\r\n        var fn = new Function('$_', 'h', '$event', op);\r\n        var f = (e) => fn(component, exe, e);\r\n        \r\n        return f;\r\n    }\r\n    \r\n    private processTextNode(node: Node&Text): Node&Text {  // Node.TEXT_NODE === 3\r\n        if (!{ '3': true }[ node.nodeType ]) return node;  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\r\n        // var { component} = this;\r\n        // var { data } = node;\r\n        // var interpolated = utils.interpolate(data)(component);\r\n        \r\n        // console.log('TEXT %O', node);\r\n        // // node.replaceWith(interpolated);\r\n        // // console.log('TEXT %O', node, data, interpolated);\r\n        \r\n        return node;\r\n    }\r\n    \r\n    private processCommentNode(node: Node&Comment): Node&Comment {  // Node.COMMENT_NODE === 8\r\n        if (!{ '8': true }[ node.nodeType ]) return node;  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\r\n        // var attrs: NamedNodeMap = node.attributes;\r\n        \r\n        // console.log('COMMENT %O', node);\r\n        // for (let i = 0, len = attrs.length; i < len; i++) this.parseChildAttr(attrs[i], i, attrs);\r\n        // this.parse(node.childNodes);\r\n        \r\n        return node;\r\n    }\r\n    \r\n    /**\r\n     * @intention : Leverage <template> &| DocumentFragment so that DOM objects do not change between parsing template variables & processing event-bindings.\r\n     */\r\n    refresh(template: string = '') {\r\n        var { component, element, dTemplateReady } = this;\r\n        var { promise: pTemplateReady } = dTemplateReady;\r\n        var temp = document.createElement('template');\r\n        var innerHTML = utils.interpolate(template)(component);\r\n        \r\n        // temp.innerHTML = innerHTML;\r\n        // console.log('TEMPLATE %O', temp.content.childNodes);\r\n        \r\n        element.innerHTML = innerHTML;\r\n        this.template = template;\r\n        pTemplateReady\r\n            .then( () => this.bindMutationObservers() )\r\n            .then( () => this.bindElementNodeRefs() )\r\n            .then( () => this.bindAttributeNodeRefs() )\r\n            .then( () => this.bindListeners() )\r\n            .then( () => this.dTemplateReady = new Deferred() )\r\n            // .then( () => this.comm.publish(READY) )\r\n            ;\r\n        this.destroy()\r\n            .parseNode(element.firstChild)\r\n            ;\r\n        return this;\r\n    }\r\n    \r\n    appendTo(element: Element) {\r\n        // var { content } = this;\r\n        // this.element = element;\r\n        // this.element.innerHTML = content;\r\n        \r\n        return this;\r\n    }\r\n    \r\n    bind() {  // convert all of this to Promises using new Deferred() at this.processNode Tail-Call.\r\n        this.bindMutationObservers()\r\n            .bindListeners()\r\n            .dTemplateReady = new Deferred()\r\n            ;\r\n        return this;\r\n    }\r\n    bindMutationObservers() {\r\n        var { element, mutations } = this;\r\n        mutations.connect(element);\r\n        return this;\r\n    }\r\n    bindElementNodeRefs() {\r\n        var { element, component, elementRefs } = this;\r\n        // element.matches(selector);\r\n        for (let { isHost, selector, key } of elementRefs) if (!{ 'function': true }[ typeof component[key] ]) isHost ? component[key] = element : component[key] = element.querySelector(selector);\r\n        return this;\r\n    }\r\n    bindAttributeNodeRefs() {\r\n        var { element, component, attrRefs } = this;\r\n        // console.log('>>>>>>>', attrRefs);\r\n        for (let { isHost, selector, key, name } of attrRefs) if (!{ 'function': true }[ typeof component[key] ]) isHost ? component[key] = element.getAttributeNode(name) : component[key] = element.querySelector(selector).getAttributeNode(name);\r\n        return this;\r\n    }\r\n    bindListeners() {\r\n        var { element, listeners, templateListeners, $elementRefs } = this;\r\n        listeners.forEach( ({ key, type, handler }) => this.addNodeListener(key, type, handler ) );\r\n        templateListeners.forEach( ({ element: target, type, handler }) => target.addEventListener(type, handler, false) );\r\n        return this;\r\n    }\r\n    addNodeListener(key: string, type: string, handler: Function) {\r\n        var { element, $elementRefs, $attrRefs } = this;\r\n        var metadata = $elementRefs.get(key) || $attrRefs.get(key) || { };\r\n        var { decorator, selector, isHost, name } = metadata;\r\n        var target = {\r\n            'true': element,\r\n            'false': element['querySelector'](selector),\r\n        }[ isHost ];\r\n        var node = {\r\n            'reference:element': target,\r\n            'reference:attribute': target['getAttributeNode'](name),\r\n        }[ decorator ];\r\n        \r\n        if ( !$elementRefs.get(key) && !$attrRefs.get(key) ) return this;\r\n        if (  $elementRefs.get(key) &&  $attrRefs.get(key) ) return this;\r\n        \r\n        node.addEventListener(type, handler, false);\r\n        \r\n    }\r\n    \r\n    destroy() {\r\n        var { listeners, templateListeners } = this;\r\n        \r\n        templateListeners.forEach( ({ element, type, handler }) => element.removeEventListener(type, handler, false) );\r\n        templateListeners.length = 0;\r\n        \r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\n\r\nclass ElementEngine {\r\n    \r\n    constructor(private Sandbox: any, private director: any) {}\r\n    \r\n    private getConfig(Class, element) {  // TODO: fractionate routine\r\n        var { director, Sandbox } = this;\r\n        var { metadata } = Class;\r\n        var { $members, $observedAttributes, $watchers, $elements: $elementRefs, $attrs: $attrRefs, $listeners, $subscriptions } = metadata;\r\n        \r\n        var comm = new Comm();\r\n        var construction = new ConstructorProxy({ comm, Sandbox, element, director }); \r\n        var ClassProxy = new Proxy(Class, construction);\r\n        var component = new ClassProxy({ state: false });\r\n        var membersProxy = new MemberProxy({ comm, source: component, element });\r\n        var methodsProxy = new MethodProxy({ comm, source: component, element });\r\n        var proxy = new Proxy(component, membersProxy);\r\n        var properties = Object.getOwnPropertyNames(Class.prototype);\r\n        var methodBlacklist = { 'constructor': true, 'connectedCallback': true, 'attributeChangedCallback': true, 'disconnectedCallback': true, 'adoptedCallback': true };\r\n        \r\n        var members = Array.from( $members.values() )\r\n          , watchers = Array.from( $watchers.values() )\r\n          , elementRefs = Array.from( $elementRefs.values() )\r\n          , attrRefs = Array.from( $attrRefs.values() )\r\n          , listeners = Array.from( $listeners.values() ).map( (item) => utils.mapExecutor(component, item) )  // map each handler to a handler bound to \"component\"\r\n          , subscriptions = Array.from( $subscriptions.values() ).map( (item) => utils.mapExecutor(component, item) )  // map each handler to a handler bound to \"component\"\r\n          ;\r\n        \r\n        var surrogate = Object.create(proxy);  // use Object.create to carry over get|set; spread op fails to do so\r\n        for (let key in proxy) if (proxy[key] && proxy[key].call) surrogate[key] = new Proxy(proxy[key], methodsProxy);\r\n        properties.forEach( (key) => { if (!!component[key] && component[key].call && !methodBlacklist[key]) surrogate[key] = new Proxy(component[key], methodsProxy); });\r\n        \r\n        var config = {  // TODO: create fn\r\n            comm,\r\n            director,\r\n            Sandbox,\r\n            Class,\r\n            ...{\r\n                sandbox: construction.sandbox,\r\n            },\r\n            ...{\r\n                $members, members,\r\n            },\r\n            ...{\r\n                $watchers, watchers,\r\n            },\r\n            ...{\r\n                $elementRefs, elementRefs,\r\n                $attrRefs, attrRefs,\r\n            },\r\n            ...{\r\n                $listeners, listeners,\r\n                $subscriptions, subscriptions,\r\n            },\r\n            ...{\r\n                component,\r\n                surrogate,\r\n            },\r\n        };\r\n        \r\n        return config;\r\n    }\r\n    \r\n    private prepare(Class) {\r\n        var thus = this;\r\n        var { metadata } = Class;\r\n        var { $observedAttributes } = metadata;\r\n        var observedAttributes = Array.from( $observedAttributes.values() ).map( ({ name }) => name )\r\n        var templateOptions = new TemplateManagementOptions();\r\n        // alert('needs element-selector-binding responsibility-handler in ContentManager');\r\n        \r\n        return class Element extends HTMLElement {  // https://alligator.io/web-components/attributes-properties/\r\n            static get observedAttributes(): string[] { return observedAttributes }  // native HTML Custom Elements\r\n            protected $utils: Utilities = new Utilities();\r\n            private config: any = thus.getConfig(Class, this);\r\n            private comm: EventEmitter = this.config.comm;\r\n            private $: any = this.config.sandbox;\r\n            private component: any = this.config.component;\r\n            private surrogate: any = this.config.surrogate;\r\n            //\r\n            private $observedAttributes: Map<string, any> = this.config.$observedAttributes;\r\n            private observedAttributes: any[] = this.config.observedAttributes;\r\n            private $watchers: Map<string, any> = this.config.$watchers;\r\n            private watchers: any[] = this.config.watchers;\r\n            private $elementRefs: Map<string, any> = this.config.$elementRefs;\r\n            private elementRefs: any[] = this.config.elementRefs;\r\n            private $attrRefs: Map<string, any> = this.config.$attrRefs;\r\n            private attrRefs: any[] = this.config.attrRefs;\r\n            private $listeners: Map<string, any> = this.config.$listeners;\r\n            private listeners: ListenerMap[] = this.config.listeners;\r\n            private $subscriptions: Map<string, any> = this.config.$subscriptions;\r\n            private subscriptions: any[] = this.config.subscriptions;\r\n            //\r\n            private $content: ContentManager = new ContentManager(this, templateOptions);\r\n            private template: string = '';  // this.config.template;\r\n            // private pTemplate: Promise<string> = this.config.pTemplate;\r\n            private $comparitors: Map<string, Comparitor> = new Map();\r\n            private handlers: any[] = [ ];\r\n            get comparitors(): Comparitor[] { return Array.from( this.$comparitors.values() ); }\r\n            // get content(): string { return this.$utils.interpolate(this.template)(this.component); }\r\n            // set content(value: string) { this.innerHTML = value; }\r\n            get attrs() { return observedAttributes; }\r\n            get channels() { return this.comm.channels; }\r\n            // get $elements() { return this.$content.$elements; }\r\n            \r\n            constructor() {\r\n                super();\r\n                var { comm } = this;\r\n                \r\n                this.bind();\r\n                comm.subscribe(comm.channels['ELEMENT:MUTATION:OBSERVED'], (e) => console.log('@MUTATION', e) );\r\n                comm.subscribe(comm.channels['ELEMENT:TEMPLATE:FOUND'], this.handleTemplate );\r\n                comm.subscribe(comm.channels['PROXY:INVOKED'], this.handleProxyInvokation);\r\n                comm.subscribe(comm.channels['PROXY:MOCK:INVOKED'], this.handleProxyInvokation);\r\n                comm.publish(comm.channels['LEFECYCLE:ELEMENT:CREATED']);\r\n                \r\n                return this;\r\n            }\r\n            \r\n            private bind() {\r\n                var { comm, component, subscriptions } = this;\r\n                var { observedAttributes: attributes } = Element;\r\n                \r\n                attributes.forEach( (key) => this.bindAttribute(key) );\r\n                subscriptions.forEach( ({ type, handler }) => comm.subscribe(comm.channels[type], handler) );\r\n                \r\n                return this;\r\n            }\r\n            private bindAttribute(key: string) {  // KEEP?!!!\r\n                var { component } = this;\r\n                var descriptor = Object.getOwnPropertyDescriptor(Class.prototype, key)\r\n                  , descriptor = { ...descriptor }\r\n                  , { get, set } = descriptor\r\n                  ;\r\n                var value = this.getAttribute(key);\r\n                if (!value) this.setAttribute(key, component[key]);\r\n                if (descriptor.get && descriptor.set) descriptor = { get, set };\r\n                else if (!descriptor.get && !descriptor.set) descriptor = { get: () => this.getAttribute(key), set: (v) => this.setAttribute(key, v) };\r\n                else if (!descriptor.get && descriptor.set) descriptor = { get: () => this.getAttribute(key), set };\r\n                else if (descriptor.get && !descriptor.set) descriptor = { get, set: () => this.setAttribute(key, component[key]) };\r\n                Object.defineProperty(component, key, descriptor);\r\n                \r\n                return this;\r\n            }\r\n            \r\n            // https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#Using_the_lifecycle_callbacks\r\n            connectedCallback() {\r\n                var { comm, component } = this;\r\n                // if (component.attachedCallback) component.connectedCallback();\r\n                // this.$load();\r\n                comm.publish(comm.channels['LEFECYCLE:ELEMENT:CONNECTED']);\r\n            }\r\n            attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\r\n                var { component, $watchers } = this;\r\n                // // var action = `[${attrName}]`, handler = component[action];\r\n                // // var any = `[*]`, all = component[any];\r\n                var $watcher = $watchers.get(attrName);\r\n                \r\n                // // if (component.attributeChangedCallback) component.attributeChangedCallback(attrName, oldVal, newVal);\r\n                // // if (all) all.call(component, attrName, oldVal, newVal);\r\n                // // if (handler) handler.call(component, newVal, oldVal);\r\n                if ($watcher) $watcher.handler.call(component, newVal, oldVal);\r\n                console.log('-------------', newVal, oldVal);\r\n                // // this.$load();\r\n            }\r\n            disconnectedCallback() {\r\n                var { component, listeners, subscriptions } = this;\r\n                if (component.detachedCallback) component.disconnectedCallback();\r\n                // listeners.forEach( (map) => this.unbindListener(component, map) );\r\n                // subscriptions.forEach( (map) => this.unbindMessageHandler(component, map) );\r\n                // this.$unload();\r\n            }\r\n            adoptedCallback() {\r\n                var { component } = this;\r\n                // if (component.adoptedCallback) component.adoptedCallback();\r\n                // this.$load();\r\n                console.log('--adoptedCallback--');\r\n            }\r\n            \r\n            cycle() {\r\n                var { template } = this;\r\n                setTimeout( () => this.$content.refresh(template), 0 );  // let current callStack clear while element may still be mounting\r\n            }\r\n            \r\n            private handleTemplate = (e: CustomEvent) => {\r\n                var { type, detail: template } = e;\r\n                this.template = template;\r\n                this.cycle();\r\n                // console.log('\\n\\n', 'WORKING ON TEMPLATE-HANDLING', '\\n', template, '\\n\\n');\r\n            };\r\n            \r\n            private handleProxyInvokation = (e: CustomEvent) => {  // KEEP?\r\n                // var { component, attributes, content } = this;\r\n                // var { type, detail } = e, { type: method } = detail;\r\n                // var dirty = this.getDirtyAttributeStates(this.comparitors);\r\n                \r\n                // dirty.forEach( ({ name }) => this.initAttribute(component, attributes[name]) );\r\n                // this.$load();\r\n            };\r\n            \r\n        };\r\n    }\r\n    \r\n    define(name, Class, options?: any) {\r\n        if ( !!customElements.get(name) ) return this;\r\n        var Element = this.prepare(Class);\r\n        window.customElements.define(name, Element, options);\r\n        \r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { ElementEngine };\r\n\r\n/* ================================================================================================================================\r\nTODO\r\n\r\nRefactor\r\nDo less; simplify. Use EDA for more. Lifecycle Hooks should be CustomEvents from Comm.\r\n - ProxyManager: Create \"ProxyManager\" class -- passing in comm -- to manage Proxy operations & triggers.\r\n - AttributeValueProxy: R&D; see if a Proxy Trap can be set on attributes so that Events can be setup on `set()` for `.value`.\r\n    - @watch: @watch Decorator should STILL be used ONLY for Host's observedAttributes -- BUT it should drive a subscription to an event\r\n              published from attributeChangedCallback, which can be on the same or similar channel as other AttrValProxy events.\r\n    - MutationObserver: R&D https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\r\n - Lifecycle Hooks: Lifecycle Hooks should be driven through Comm.\r\n    - TODO: Define Lifecycle Flow.\r\n - @message: @message Decorator should be used for subscribing to Comm; leave assumption about Sandbox alone!\r\n    - Operators: This will obviate the complexity around operators/operands etc! :-D\r\n - Comm: Comm should remain as disperate EventTarget as to not conflate DOM events with Object-to-Object tether.\r\n - Templates: Templates should have their own Channel while `component` is responsible for BOTH getting AND `.publish`ing a template. This\r\n              way, components have control over lazyLoading and swapping out the template on the fly.\r\n    - Templates should be loaded into a detached element, such as a DOMFragment, before interations to discover template refs, \r\n      bindings, and other variables.\r\n    - TemplateRefs should be accessed through the element's $children Map.\r\n - Event Listeners: If there is a way to bind event-handlers before appending Content to DOM, after interpolation, this would be helpful.\r\n - Comm & Channels: Comm should be phased out using an @Decorator for subscriptions while providing access to Comm AND comm Channels ONLY\r\n                    through methods (get|set for channels) on element.\r\n - Slots: Need <slot>s\r\n \r\n - EDA\r\n    - Events can be published for TemplateRef variables while letting Developer decide what to do with them & their .ownerElement.\r\n    \r\n - LEFECYCLE EVENTS & CHANNELS\r\n    - ELEMENT:TEMPLATE:FOUND (watch out for Race Conditions)\r\n    - ELEMENT:CREATED (constructor)\r\n    - ELEMENT:TEMPLATE:CHECKED (DOM Fragment evaluation)\r\n        // -? ELEMENT:TEMPLATE:VARIABLE:FOUND (DOM Fragment evaluation, TemplateRef)\r\n        // -? ELEMENT:TEMPLATE:VARIABLES:FOUND (DOM Fragment evaluation, TemplateRef)\r\n    - ELEMENT:CONTENT:CREATED (interpolated)\r\n    - ELEMENT:CONTENT:CHECKED (injected/appended)\r\n        // -? ELEMENT:TEMPLATE:LISTENER:BOUND (DOM Fragment evaluation, event-handler bound)\r\n        // -? ELEMENT:TEMPLATE:LISTENERS:BOUND (DOM Fragment evaluation, event-handlers bound)\r\n        // -? ELEMENT:TEMPLATE:ATTRIBUTE:BOUND (DOM Fragment evaluation, AttrValTrap & Listener bound)\r\n        // -? ELEMENT:TEMPLATE:ATTRIBUTES:BOUND (DOM Fragment evaluation, AttrValTraps & Listeners bound)\r\n    - ELEMENT:CONTENT:READY (checked + bound)\r\n    - ELEMENT:READY (everything in its right place)\r\n      [ADDITIONAL] ... which part of the sequence do these fall in?\r\n    - ELEMENT:CONNECTED (LIFECYCLE METHOD)\r\n    - ELEMENT:DISCONNECTED (LIFECYCLE METHOD)\r\n    - ELEMENT:ADOPTED (LIFECYCLE METHOD)\r\n    - ELEMENT:ATTRIBUTE:CHANGED (LIFECYCLE METHOD, could be same channel as AttrValTraps, but could also or instead be ELEMENT:OBSERBED-ATTRIBUTE:CHANGED)\r\n\r\n\r\nREFACTOR 2\r\n\r\n\r\nSyntax\r\n\r\nTemplate (<input {{attr}}=\"{{variable}}\"  />)\r\nEvent: Uses (click)=\"handle($event, variable, 'literal')\"\r\nAttribute: type=\"text\", type=\"{{var}}\", {{var}}=\"literal\", {{attr}}=\"{{var}}\"\r\nProperty I (ctrl -> el): [value]=\"var\" (update element)\r\n// Property O (el -> ctrl): {value}=\"var\" (update controller)\r\nTextNode: {{interpolation}}\r\n\r\n\r\nBehavior\r\n\r\nTemplate: Template gets inserted into element and immediately crawled.\r\nParsing: Parsing crawls element.childNodes to include TextNodes, crawls child.attributes, and recurses from child.childNodes.\r\nAttributes: Each attribute is tested for its binding type, handled accordingly, and evaluated using an \"evaluator\".\r\nTextNodes: TextNodes always get interpolated using an \"evaluator\".\r\nChildNodes: ChildNodes are parsed using strategy above.\r\nEvaluator: Evaluator\r\n\r\n\r\nChange Detection\r\n\r\n\r\n\r\n\r\nDecorators\r\n\r\nClass decorators should always contain a \"meta\" property (on their descriptor, Class, or [root] Prototype) with a \"members\" object.\r\nMember decorators always assign metadata to a \"meta\" object on their Class under members[key] providing data for their purpose.\r\nDecorators should have the capability to be leveraged compositively with each other, adding \"meta\" data to the descriptor.\r\n\r\n@observe('prop') x: any;  // prepares metadata for observedAttributes (of \"prop\" with alias \"x\")\r\n@observer('prop') handleChange(...?) {}  // prepares metadata for handler called from attributedChangedCallback\r\n@element('tagName.class[attr]') element: HTMLElement;  // prepares metadata to select & bind an element to component['element'] (if not arguments.length then return HostElement or FirstChild or querySelector('*') or descriptor.name)\r\n@attr('tagName.class[attr]') attr: Attr;  // prepares metadata to select & bind an element's attribute-node to component['attr'] (if not \"[attr]\" then return descriptor.name)\r\n@listener('click') handleClick() {}  // prepares metadata to handle \"click\" on HostElement\r\n@dispatcher('some-type') unique: EventTarget<CustomElement, 'some-type'>; this.unique.dispatchEvent(detail);\r\n----\r\n@listener('click') @element('tagName.class[attr]') handleClick({ target }) {}  // prepares metadata to handle \"click\" on metadata.selector of type \"element\"\r\n@listener('change') @attr('tagName.class[attr]') handleChange({ ownerElement }) {}  // prepares metadata to handle \"change\" on metadata.selector of type \"attr\"\r\n\r\n\r\nMISC\r\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf\r\n\r\n\r\n\r\nRESOURCES\r\nMutationObserver (AttrValProxy): https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\r\nDocumentFragment (Preparations): https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\r\nShodowDOM: https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM\r\n================================================================================================================================ */\r\n","\r\nimport { Utilities, Deferred } from '@motorman/core/utilities';\r\nimport { bootstrap, $bootstrap, DefaultDirector, DefaultComponentSandbox, DefaultServicesSandbox } from './defaults';\r\nimport { ElementEngine } from './element-engine';\r\n\r\nvar director = new DefaultDirector();\r\nvar DEFAULT_CONFIG = {  // ... defaults\r\n    director,\r\n    selector: '[data-v]' || '[data-behavior]',\r\n    datasets: '[v-attribute]',  // includes <script type=\"application/json\"> { items: [...] } </scrpt>\r\n    bootstrap: bootstrap,\r\n    decorators: { services: DefaultServicesSandbox, components: DefaultComponentSandbox, },\r\n};\r\n\r\nclass Core {\r\n    private dConfiguration: Deferred<any> = new Deferred();\r\n    private pConfiguration: Promise<any> = this.dConfiguration.promise;\r\n    private dInitialization: Deferred<any> = new Deferred();\r\n    private pInitialization: Promise<any> = this.dInitialization.promise;\r\n    private utils: Utilities = new Utilities();\r\n    private engine: ElementEngine = new ElementEngine(DefaultComponentSandbox, director);\r\n    private services: any = { };\r\n    private components: any = { };\r\n    private elements: any = { };\r\n    private configuration: any = DEFAULT_CONFIG;\r\n    \r\n    constructor() {\r\n        var { pInitialization, elements } = this;\r\n        \r\n        pInitialization\r\n            .then( (options) => console.log('INIT', options) )\r\n            ;\r\n        this.pConfiguration\r\n            .then( (config) => this.dInitialization.resolve({ target: document }) )\r\n            ;\r\n        return this;\r\n    }\r\n    \r\n    init(options) {\r\n        if (!options) throw Error(\"Vertices Core initialized without options\");\r\n        this.arm(options);\r\n        // this.registerComponent = this.utils.noop;\r\n        // this.registerService = this.utils.noop;\r\n        // this.dInitialization.resolve(options);\r\n        \r\n        return this;\r\n    }\r\n    \r\n    configure(config) {\r\n        this.utils.extend(this.configuration, config);\r\n        this.engine = new ElementEngine(this.configuration.decorators.components, this.configuration.director);\r\n        this.dConfiguration.resolve(this.configuration);\r\n        return this.utils.extend({ }, this.configuration);\r\n    }\r\n    registerService(Service) {\r\n        var id = Service.constructor;\r\n        var service = { id, Constructor: Service };\r\n        this.services[id] = this.services[id] || service;\r\n        \r\n        return this;\r\n    }\r\n    registerComponent(id, Component) {\r\n        var component = { id, Constructor: Component };\r\n        this.components[id] = this.components[id] || component;\r\n        return this;\r\n    }\r\n    define(definition) {\r\n        var { name, Class, options } = definition;\r\n        var { dConfiguration } = this, { promise: pConfiguration } = dConfiguration;\r\n        \r\n        pConfiguration\r\n            .then( (config) => this.engine.define(name, Class, options) )\r\n            ;\r\n        return this;\r\n    }\r\n    \r\n    arm(options) {  // automatically register modules\r\n        var config = this.configuration\r\n          , bootstrap = config.bootstrap\r\n          , target = options.target\r\n          ;\r\n        \r\n        this.startServices();\r\n        bootstrap.call(config, target, this);\r\n    }\r\n    \r\n    startServices() {\r\n        var config = this.configuration, decorators = config.decorators;\r\n        for (var id in this.services) this.startService(this.services[id], id, this.services);\r\n        return this;\r\n    }\r\n    private startService(_service, id, services) {\r\n        var { configuration, utils } = this, { director, decorators } = configuration;\r\n        var { services: ServiceSandbox = DefaultServicesSandbox } = decorators;\r\n        var Service = _service.Constructor\r\n          , sandbox = new ServiceSandbox(utils, director)\r\n          , service = new Service(sandbox)\r\n          ;\r\n        service.init();\r\n    }\r\n    \r\n    /**\r\n     * Gets called by this.configuration.bootstrap\r\n     * TODO: Rename `details` to `api` and provide an API for mapping, starting, stopping & destroying (etc) modules.\r\n     */\r\n    bootstrap(element, data, id) {\r\n        if (!element || !id) return null;\r\n        if (!this.components[id]) return this.utils.console.warn(\"Unregistered Component: \" + id) && null || null;\r\n        \r\n        var { configuration: config } = this\r\n          , { director, decorators } = config\r\n          , { components: ComponentSandbox = DefaultComponentSandbox } = decorators\r\n          ;\r\n        var component = this.components[id]\r\n          , Component = component.Constructor\r\n          , sandbox = new ComponentSandbox(element, director)\r\n          , instance = new Component(sandbox)\r\n          , data = data || { }\r\n          ;\r\n        var details = {\r\n            id: id,\r\n            instance: instance,\r\n            element: element,\r\n            data: data,\r\n        };\r\n        instance.init(data);\r\n        \r\n        return details;\r\n    }\r\n    \r\n}\r\n\r\nexport { Core };\r\n","\r\nimport { Core } from './core';\r\n\r\n\r\nvar Facade = function Facade(core) {\r\n    var thus = this;\r\n    \r\n    function configure() {\r\n        return core.configure.apply(core, arguments);\r\n    }\r\n    function service(Service) {\r\n        core.registerService.apply(core, arguments);\r\n        return this;\r\n    }\r\n    function element(definition) {\r\n        core.define(definition);\r\n        return this;\r\n    }\r\n    function component(id, Directive) {\r\n        core.registerComponent.apply(core, arguments);\r\n        return this;\r\n    }\r\n    \r\n    function register(item, Class) {\r\n        var type = { 'string': 'component', 'function': 'service', 'object': item.decorator }[ typeof item ];\r\n        this[type].call(this, item, Class);\r\n        return this;\r\n    }\r\n    \r\n    function bootstrap(options) {\r\n        core.init(options);\r\n        return this;\r\n    }\r\n    \r\n    // export precepts\r\n    this.utils = core.utils;\r\n    this.config = configure;\r\n    this.service = service;\r\n    this.element = element;\r\n    this.component = component;\r\n    this.register = register;\r\n    this.bootstrap = bootstrap;\r\n    \r\n    return this;\r\n};\r\n\r\n/**\r\n * API\r\n */\r\nvar Vertex = new (function Vertices(Core, Facade) {\r\n    \r\n    var V = Facade.call( function V() {\r\n        if (this instanceof V) return ( new Vertices(Core, Facade) );\r\n        return V.register.apply(V, arguments);\r\n    }, new Core() );\r\n    \r\n    return V;\r\n})(Core, Facade);\r\n\r\nexport { Vertex };\r\n","\r\nexport { Vertex as V } from './core';\r\nexport { Element, Component, Directive, Pipe, Service } from './core';\r\nexport { observe, observee, observer, element, attr, listener, message } from './core';\r\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = {};\n\nfunction modulesToDom(moduleId, list, options) {\n  for (var i = 0; i < list.length; i++) {\n    var part = {\n      css: list[i][1],\n      media: list[i][2],\n      sourceMap: list[i][3]\n    };\n\n    if (stylesInDom[moduleId][i]) {\n      stylesInDom[moduleId][i](part);\n    } else {\n      stylesInDom[moduleId].push(addStyle(part, options));\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (moduleId, list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  moduleId = options.base ? moduleId + options.base : moduleId;\n  list = list || [];\n\n  if (!stylesInDom[moduleId]) {\n    stylesInDom[moduleId] = [];\n  }\n\n  modulesToDom(moduleId, list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    if (!stylesInDom[moduleId]) {\n      stylesInDom[moduleId] = [];\n    }\n\n    modulesToDom(moduleId, newList, options);\n\n    for (var j = newList.length; j < stylesInDom[moduleId].length; j++) {\n      stylesInDom[moduleId][j]();\n    }\n\n    stylesInDom[moduleId].length = newList.length;\n\n    if (stylesInDom[moduleId].length === 0) {\n      delete stylesInDom[moduleId];\n    }\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    for (var i = 0; i < modules.length; i++) {\n      var item = [].concat(modules[i]);\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\r\nimport { Queue } from '@motorman/core/utilities/ds';\r\nimport { V } from '@motorman/vertices';\r\n// import { Element, attr, watch, bind, handle } from '@motorman/vertices/core/decorators';\r\nimport { Element, observe, element, attr, listener, message } from '@motorman/vertices/core/decorators';\r\nimport { Sandbox } from '@motorman/vertices/sandbox';\r\nimport template from './modal.component.html';\r\n\r\nclass SingletonComponentRequest { constructor(options: any = {}) {} }  // MOCK/TEMP\r\n\r\nclass ModalRequest extends SingletonComponentRequest {\r\n    id: string = '';\r\n    template: string = '';  // <template id=\"selector\">\r\n    \r\n    constructor(options: any = {}) {\r\n        super(options);\r\n        var { id } = options;\r\n        this.id = id || this.id;\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\n@Element({\r\n    name: 'v-modal',\r\n    // template,\r\n    // template: './modal.component.html',\r\n    // lazy: !true,  // tells Vertices to expect a url\r\n})\r\nclass ModalComponent {\r\n    @observe('options') options: any = { };\r\n    // @observe() get active(): boolean { return !this.requests.isEmpty(); }\r\n    // protected requests: Queue<ModalRequest> = new Queue();\r\n    // get request(): ModalRequest { return this.requests.front(); }\r\n    get comm() { return this.$.comm; }\r\n    test: string = 'this is some content';\r\n    @element('this') modal: Element;\r\n    @element('.id[data-test]') el: Element;\r\n    @attr('this[data-test]') attr: Attr;\r\n    \r\n    type(e) {\r\n        console.log('######', e);\r\n    }\r\n    \r\n    @observe('options') handleOptionsChange(val, old) {\r\n        console.log('@options-change', val, old);\r\n    }\r\n    \r\n    // @listener('click') @element('this') handleSomeEvent(e: Event) {\r\n    //     console.log('@ MODEL - LISTENER #this', e.type, e);\r\n    // }\r\n    // @listener('click') @element('.id[data-test]') handleSomeEvent(e: Event) {\r\n    //     console.log('@ MODEL - LISTENER #.id[data-test]', e.type, e);\r\n    // }\r\n    // @listener('mutation') @attr('this[data-test]') handleSomeEvent(e: Event) {\r\n    //     console.log('@ MODEL - LISTENER #this[data-test]', e.type, e);\r\n    // }\r\n    @listener('mutation') @attr('.id[data-test]') handleSomeEvent(e: Event) {\r\n        console.log('@ MODEL - LISTENER #.id[data-test]', e.type, e);\r\n    }\r\n    \r\n    constructor(private $: Sandbox) {\r\n        // var { comm } = this;\r\n        // comm.subscribe(comm.channels['ELEMENT:CREATED'], () => comm.publish(comm.channels['ELEMENT:TEMPLATE:FOUND'], template) );\r\n        // $.in($.channels['MODAL:REQUESTED']).subscribe(this.handleRequest);\r\n        // $.in($.channels['MODAL:DISMISSED']).subscribe(this.handleDismiss);\r\n        // console.log('>->', this.modal, this.el);\r\n        // setTimeout( () => console.log('>->', this.modal, this.el), (1000 * 1) );\r\n        // setTimeout( () => console.log('>->', this.attr), (1000 * 1) );\r\n        setTimeout( () => this.attr.addEventListener('change', () => console.log('GOT CHANGE'), false), (1000 * 1) );\r\n    }\r\n    \r\n    // // @listener('this') handleClick(e: Event) {  // needs option for selector?\r\n    // //     var { $, requests } = this;\r\n    // //     console.log('@modal # click', e);\r\n    // // }\r\n    \r\n    // handleClique(e, active, adHoc) {\r\n    //     var { $, requests } = this;\r\n    //     console.log('\\n\\n @event', e.type, active, adHoc, '\\n\\n');\r\n    //     // requests.dequeue();\r\n    //     // $.publish($.channels['BACKDROP:DISMISSED'], { test: true });\r\n    // }\r\n    \r\n    @message('LEFECYCLE:ELEMENT:CREATED') onConnected = () => this.comm.publish(this.comm.channels['ELEMENT:TEMPLATE:FOUND'], template);\r\n    @message('ELEMENT:MUTATION:OBSERVED') handleMutation(e: CustomEvent) {\r\n        console.log('HANDLING MUTATION', e);\r\n    }\r\n    \r\n    // private handleRequest = (e: CustomEvent) => {\r\n    //     var { $, requests } = this;\r\n    //     var { type, detail }: { type: string, detail: ModalRequest } = e;\r\n    //     requests.enqueue(detail);\r\n    //     $.publish($.channels['BACKDROP:REQUESTED'], { test: true });\r\n    // };\r\n    \r\n    // private handleDismiss = (e: CustomEvent) => {\r\n    //     var { $, requests } = this;\r\n    //     var { type, detail } = e;\r\n    //     console.log('@ ModalComponent', type, detail);\r\n    //     requests.dequeue();\r\n    // };\r\n    \r\n    \r\n    \r\n    \r\n    ////////////////////////////////////////////////////////\r\n    \r\n    // @attr() options: any = { };\r\n    // // @attr() get options() { return new Function(`return ${value};`); }\r\n    // //         set options(value: string) { this.config = `${value}`; }\r\n    // @attr() get active(): boolean { return !this.requests.isEmpty(); }\r\n    // //         set active(value: boolean) {  }\r\n    // //         set active(value: boolean) { if (!value) this.requests.dequeue(); }\r\n    // protected requests: Queue<ModalRequest> = new Queue();\r\n    // get request(): ModalRequest { return this.requests.front(); }\r\n    // // @attr() ['onclick']: Function = () => {};\r\n    // get comm() { return this.$.comm; }\r\n    \r\n    // constructor(private $: Sandbox) {\r\n    //     var { comm } = this;\r\n    //     // comm.subscribe(comm.channels['ELEMENT:CREATED'], () => comm.publish(comm.channels['ELEMENT:TEMPLATE:FOUND'], template) );\r\n    //     $.in($.channels['MODAL:REQUESTED']).subscribe(this.handleRequest);\r\n    //     $.in($.channels['MODAL:DISMISSED']).subscribe(this.handleDismiss);\r\n    // }\r\n    \r\n    // @bind('click') handleClick(e: Event) {  // needs option for selector?\r\n    //     var { $, requests } = this;\r\n    //     console.log('@modal # click', e);\r\n    // }\r\n    \r\n    // handleClique(e, active, adHoc) {\r\n    //     var { $, requests } = this;\r\n    //     console.log('\\n\\n @event', e.type, active, adHoc, '\\n\\n');\r\n    //     // requests.dequeue();\r\n    //     // $.publish($.channels['BACKDROP:DISMISSED'], { test: true });\r\n    // }\r\n    \r\n    // @handle('LEFECYCLE:ELEMENT:CREATED') onConnected = () => this.comm.publish(this.comm.channels['ELEMENT:TEMPLATE:FOUND'], template);\r\n    \r\n    // private handleRequest = (e: CustomEvent) => {\r\n    //     var { $, requests } = this;\r\n    //     var { type, detail }: { type: string, detail: ModalRequest } = e;\r\n    //     requests.enqueue(detail);\r\n    //     $.publish($.channels['BACKDROP:REQUESTED'], { test: true });\r\n    // };\r\n    \r\n    // private handleDismiss = (e: CustomEvent) => {\r\n    //     var { $, requests } = this;\r\n    //     var { type, detail } = e;\r\n    //     console.log('@ ModalComponent', type, detail);\r\n    //     requests.dequeue();\r\n    // };\r\n    \r\n}\r\n\r\nexport { ModalComponent };\r\n","export default \"\\r\\n<div #container id=\\\"test\\\" class=\\\"vertices modal\\\">\\r\\n    <div class=\\\"id\\\" data-test>\\r\\n        ...\\r\\n    </div>\\r\\n    <div id=\\\"wrap\\\" class=\\\"modal container\\\" (attributechange)=\\\"handleClique($event, active, 'other')\\\">\\r\\n        Modal is active: {{active}} {{test}}\\r\\n        <p><span><b>Bolder!</b><b>Boulder!</b></span></p>\\r\\n    </div>\\r\\n    <input id=\\\"{{item.id}}\\\" type=\\\"literal\\\" [value]=\\\"test\\\" {{key}}=\\\"{{value}}\\\" (input)=\\\"type($event)\\\" *each=\\\"item of items\\\" />\\r\\n    <input id=\\\"xxx\\\" type=\\\"input\\\" value=\\\"test\\\" {{key}}=\\\"{{value}}\\\" (input)=\\\"type($event)\\\" />\\r\\n</div>\\r\\n<!-- My Comment has=\\\"attr\\\" -->\";","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./main.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(module.id, content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body{background:#ddd}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\r\nimport { Environment } from '@motorman/models';\r\n\r\nvar environment = new Environment({\r\n    type: 'PROD',\r\n});\r\n\r\nexport { environment };\r\n","\r\nclass Environment {\r\n    type: string = '';\r\n    get production() { return !!{ 'production': true }[ this.type ]; }\r\n    \r\n    constructor(options: any = { }) {\r\n        var { type } = options;\r\n        \r\n        this.type = type || this.type;\r\n        \r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { Environment };\r\n","\r\nclass Channels {\r\n    ['BACKDROP:REQUESTED'] = 'v://requested/backdrop';\r\n    ['BACKDROP:INSPECTED'] = 'v://inspected/backdrop';\r\n    ['BACKDROP:DISMISSED'] = 'v://dismissed/backdrop';\r\n    ['MODAL:REQUESTED'] = 'v://requested/modal';\r\n    ['MODAL:DISMISSED'] = 'v://dismissed/modal';\r\n}\r\n\r\nvar channels = new Channels();\r\nexport { Channels, channels };\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map\n","/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\nimport { noop } from './noop';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nexport function canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar QueueAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\nexport { QueueAction };\n//# sourceMappingURL=QueueAction.js.map\n","/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Action } from './Action';\nvar AsyncAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map\n","var Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map\n","/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */\nimport { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\nexport var queue = /*@__PURE__*/ new QueueScheduler(QueueAction);\n//# sourceMappingURL=queue.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar QueueScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\nexport { QueueScheduler };\n//# sourceMappingURL=QueueScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport var EMPTY = /*@__PURE__*/ new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nexport var NotificationKind;\n/*@__PURE__*/ (function (NotificationKind) {\n    NotificationKind[\"NEXT\"] = \"N\";\n    NotificationKind[\"ERROR\"] = \"E\";\n    NotificationKind[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\nexport { Notification };\n//# sourceMappingURL=Notification.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeToArray } from '../util/subscribeToArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return scheduleArray(input, scheduler);\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n//# sourceMappingURL=throwError.js.map\n","/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { isScheduler } from '../util/isScheduler';\nimport { fromArray } from './fromArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n        return scheduleArray(args, scheduler);\n    }\n    else {\n        return fromArray(args);\n    }\n}\n//# sourceMappingURL=of.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) {\n        delay = 0;\n    }\n    return function observeOnOperatorFunction(source) {\n        return source.lift(new ObserveOnOperator(scheduler, delay));\n    };\n}\nvar ObserveOnOperator = /*@__PURE__*/ (function () {\n    function ObserveOnOperator(scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    ObserveOnOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n    };\n    return ObserveOnOperator;\n}());\nexport { ObserveOnOperator };\nvar ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        var destination = this.destination;\n        destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nexport { ObserveOnSubscriber };\nvar ObserveOnMessage = /*@__PURE__*/ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\nexport { ObserveOnMessage };\n//# sourceMappingURL=observeOn.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { queue } from './scheduler/queue';\nimport { Subscription } from './Subscription';\nimport { ObserveOnSubscriber } from './operators/observeOn';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nvar ReplaySubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) {\n            bufferSize = Number.POSITIVE_INFINITY;\n        }\n        if (windowTime === void 0) {\n            windowTime = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\nvar ReplayEvent = /*@__PURE__*/ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n//# sourceMappingURL=ReplaySubject.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","\r\nimport { Reactive as Mediator } from '../mediator';\r\n\r\n\r\nclass Store extends Mediator {\r\n    private $data: Map<any, any> = new Map();\r\n    public id: string;\r\n\r\n    constructor(options: any = {}) {\r\n        super();\r\n        var { id } = options;\r\n        this.id = id;\r\n\r\n        return this;\r\n    }\r\n\r\n    next(e: CustomEvent, key: any) {\r\n        var { type, detail } = e;\r\n        var child = this.get(key)\r\n          , data = child.data()\r\n          ;\r\n        var paths = {\r\n            'parent/child/datum': `${this.id}/${key}/${type}`,\r\n            'parent/*/datum': `${this.id}/*/${type}`,\r\n            '**/child/datum': `**/${key}/${type}`,\r\n            '**/*/datum': `**/*/${type}`,\r\n        };\r\n        \r\n        this.publish(paths['parent/child/datum'], detail);\r\n        this.publish(paths['parent/*/datum'], detail);\r\n        this.publish(paths['**/child/datum'], detail);\r\n        this.publish(paths['**/*/datum'], detail);\r\n    }\r\n    error(error: Error) {}\r\n    complete() {}\r\n\r\n    has(key: any) {\r\n        var has = this.$data.has(key);\r\n        return has;\r\n    }\r\n\r\n    get(key: any) {\r\n        var value = this.$data.get(key);\r\n        return value;\r\n    }\r\n\r\n    set(key: any, value: any) {\r\n        this.$data.set(key, value);\r\n        this.publish(key, value);\r\n        this.publish('*', value);\r\n        this.publish('**/*', value);\r\n        this.publish(`**/${key}`, value);\r\n        if (value instanceof Store) value.attach({ next: (e) => this.next(e, key) });\r\n        \r\n        return this;\r\n    }\r\n\r\n    data() {\r\n        var entries = Array.from( this.$data.entries() ), o = { };\r\n        for (let [key, value] of entries) o[key] = value;\r\n        return o;\r\n    }\r\n\r\n    toJSON() {\r\n        return this.data();\r\n    }\r\n\r\n}\r\n\r\nexport { Store };\r\n","\r\nimport { IEventAggregator } from '../eventaggregator.interface';\r\nimport { Reactive as EventHub } from '../eventhub';\r\n\r\n\r\nclass Mediator extends EventHub implements IEventAggregator {\r\n    private publishers: any = { };\r\n    private context: any = this;\r\n    \r\n    constructor() {\r\n        super();\r\n    }\r\n    \r\n    private registerPublishers(handlers: any) {\r\n        this.publishers = handlers;\r\n        return this;\r\n    }\r\n    protected register(type: 'publishers', handlers: any) {\r\n        var action = { 'publishers': 'registerPublishers' }[ type ];\r\n        this[action](handlers);\r\n        return this;\r\n    }\r\n  \r\n    protected dispatch(channel: string, data?: any, ...more: any[]) {\r\n      super.publish.call(this, channel, data, ...more);\r\n      return this;\r\n    }\r\n    \r\n    publish(channel: string, data?: any, ...more: any[]) {\r\n        var { publishers } = this;\r\n        if (!channel) console.warn(`Mediator.publish expected a channel-value but got \"${channel}\". Please check the spelling of your channel-key.`);\r\n        if (channel in publishers) publishers[channel].call(publishers, channel, data, ...more);\r\n        else this.dispatch.call(this, channel, data, ...more);\r\n        \r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { Mediator };\r\n","\r\n// https://stackblitz.com/edit/rxjs-mediator-with-operators?file=index.ts\r\nimport { of, from } from 'rxjs';\r\nimport { Observable, Subject, BehaviorSubject, ReplaySubject } from 'rxjs';\r\nimport { map, filter, last } from 'rxjs/operators';\r\n//\r\nimport { ISubscriber } from '../subscriber.interface';\r\nimport { IEventAggregator } from '../eventaggregator.interface';\r\n\r\nclass EventHub implements IEventAggregator {\r\n  private initializations: object = { errors: 0 };\r\n  private initialized: CustomEvent = new CustomEvent('$initialized', { detail: this.initializations });\r\n  public channels$: ReplaySubject<CustomEvent> = new ReplaySubject(1);\r\n\r\n  in(channel: string): Observable<CustomEvent> {\r\n    var filterChannel = filter( (o: CustomEvent) => channel === o.type )\r\n      , mapData = map( (o: CustomEvent) => o )\r\n      ;\r\n    var subscription = this.channels$.pipe(filterChannel).pipe(mapData);\r\n\r\n    return subscription;\r\n  }\r\n  \r\n  publish(channel: string, data: any = {}, ...more: any[]): IEventAggregator {\r\n    var event = new CustomEvent(channel, { detail: data });\r\n    this.channels$.next(event);\r\n    return this;\r\n  }\r\n\r\n  subscribe(channel: string, handler?: (data?: any) => {}): Observable<CustomEvent> {\r\n    var subscription = this.in(channel);\r\n    if (handler) subscription.subscribe(handler);\r\n    return subscription;\r\n  }\r\n\r\n  unsubscribe(channel: string, handler: (data?: any) => {}): IEventAggregator {\r\n    // this.channels$.unsubscribe();\r\n    return this;\r\n  }\r\n\r\n  attach(observer: ISubscriber): Observable<CustomEvent> {\r\n    var subscription = this.channels$;\r\n    if (observer) subscription.subscribe(observer);\r\n    return subscription;\r\n  }\r\n  \r\n  detach(observer: ISubscriber) {\r\n    // this.channels$.unsubscribe();\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\nexport { EventHub };\r\n","\r\nimport { IEventAggregator } from '../eventaggregator.interface';\r\nimport { IDirectorOptions } from './options.interface';\r\nimport { Reactive as Store } from '../store';\r\nimport { Utilities } from '../utilities';\r\n\r\n\r\nclass Director extends Store implements IEventAggregator {\r\n    private dependencies: IDirectorOptions;\r\n    private actionHandlers: any;\r\n    private stateHandlers: any;\r\n    public utils: Utilities = new Utilities();\r\n    public channels: any;\r\n\r\n    constructor(options: IDirectorOptions) {\r\n        super({ id: 'app' });\r\n        var { channels, ActionHandlers, StateHandlers, Dependencies } = options;\r\n        var dependencies = new Dependencies(this);\r\n        var actionHandlers = new ActionHandlers(this, dependencies)\r\n          , stateHandlers = new StateHandlers(this, dependencies)\r\n          ;\r\n        \r\n        this.channels = channels;\r\n        this.dependencies = dependencies;\r\n        this.actionHandlers = actionHandlers;\r\n        this.stateHandlers = stateHandlers;\r\n        this.register('publishers', actionHandlers);\r\n        this.attach({ next: this.handleState });\r\n    }\r\n\r\n    private handleState = (e: CustomEvent) => {\r\n        var { type, detail } = e;\r\n        var { stateHandlers: handlers } = this;\r\n        var action = handlers[type];\r\n\r\n        if (action) action.call(handlers, e);\r\n        // else setTimeout( () => console.log('@ OBSERVED STATE', type, detail), (1000 * 10) );\r\n    };\r\n\r\n    emit(channel: string, data?: any) {\r\n        this.dispatch(channel, data);\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nexport { Director };\r\n","\r\nimport { ISubscriber } from '../subscriber.interface';\r\nimport { Reactive as Director, IDirectorOptions } from '../director';\r\n\r\n\r\nclass Sandbox {\r\n    get utils() { return this.director.utils; }\r\n    get channels() { return this.director.channels; }\r\n\r\n    constructor(private director: Director) {\r\n        return this;\r\n    }\r\n\r\n    in(channel: string) {\r\n        return this.director.in(channel);\r\n    }\r\n    publish(channel: string, data?: any, ...more: any[]) {\r\n        return this.director.publish(channel, data);\r\n    }\r\n    subscribe(channel: string, handler: () => {}) {\r\n        return this.director.subscribe(channel, handler);\r\n    }\r\n    unsubscribe(channel: string, handler: () => {}) {\r\n        return this.director.unsubscribe(channel, handler);\r\n    }\r\n    attach(observer: ISubscriber) {\r\n        return this.director.attach(observer);\r\n    }\r\n    detach(observer: ISubscriber) {\r\n        return this.director.detach(observer);\r\n    }\r\n\r\n}\r\n\r\nexport { Sandbox };\r\n","\r\nimport { Director as CommonDirector } from '@motorman/core';\r\n\r\nclass Director extends CommonDirector {}\r\n\r\nexport { Director };\r\n","\r\nimport { Director as CommonDirector } from '@motorman/vertices/director';\r\n\r\n\r\nclass Director extends CommonDirector {}\r\n\r\nexport { Director };\r\n","\r\nimport { Channels as CommonChannels } from '@motorman/vertices/director';\r\n\r\nclass Channels extends CommonChannels {\r\n    ['JOHN:WILL:LIKE:THIS:STRATEGY'] = 'app://preferred-by-john/this/strategy';\r\n    ['SOMETHING:ELSE:HAPPENED'] = 'app://happened/something/else';\r\n}\r\n\r\nvar channels = new Channels();\r\n\r\nexport { Channels, channels };\r\n","\r\nimport { ActionHandlers as CommonHandlers } from '@motorman/vertices/director';\r\nimport { channels as e } from '../channels';\r\nimport { Director } from '../director';\r\n\r\nclass Dependencies {\r\n    public stats: Console = console;\r\n\r\n    constructor(private Director: Director) {}\r\n}\r\n\r\nclass ActionHandlers extends CommonHandlers {\r\n    \r\n    constructor(director: Director, $: Dependencies) {\r\n        super(director, $);\r\n    }\r\n    \r\n    [ e['JOHN:WILL:LIKE:THIS:STRATEGY'] ](channel: string, data: { id: number, datum: string }) {\r\n        var { id, datum } = data;\r\n        if ({ '999': true }[ id ]) console.log('@ Director: Caught', data.id);\r\n        this.director.set(datum, data);\r\n        this.director.emit(channel, data);\r\n    }\r\n    \r\n}\r\n\r\nexport { ActionHandlers };\r\n","\r\nimport { channels as e } from '../channels';\r\nimport { Director } from '../director';\r\n\r\n\r\nclass Dependencies {}\r\nclass ActionHandlers {\r\n    \r\n    constructor(protected director: Director, protected $: Dependencies) {}\r\n    \r\n    [ e['BACKDROP:INSPECTED'] ](channel: string, request: any) {\r\n        var { id } = request;\r\n        console.log('V:Director; modal dismissed', id, request);\r\n        if ({ 'some:nondismissable:ui': true }[ id ]) return;\r\n        this.director.emit(channel, request);\r\n        this.director.publish(e['BACKDROP:DISMISSED'], request);\r\n        this.director.publish(e['MODAL:DISMISSED'], request);\r\n    }\r\n    \r\n}\r\n\r\nexport { ActionHandlers };\r\n","\r\nimport { Reactive as Store } from '@motorman/core/store';\r\nimport { Director } from '../director';\r\n\r\nclass Dependencies {\r\n    public stats: Console = console;\r\n\r\n    constructor(private Director: Director) {}\r\n}\r\n\r\nclass StateHandlers {\r\n    \r\n    constructor(private director: Director, private $: Dependencies) {\r\n        setTimeout( () => this.init(), (1000 * 2) );\r\n    }\r\n    \r\n    init() {\r\n        var settings: Store = new Store({ id: 'settings' });\r\n        var token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwiaWF0IjoxNTE2MjM5MDIyLCJ1c2VyIjp7Im5hbWUiOnsiZmlyc3QiOiJDb2R5IiwibGFzdCI6IkNhcmxzb24ifSwidXNlcm5hbWUiOiJvdG9jYXJsc29uQGdtYWlsLmNvbSJ9fQ._XjXROxwEV6iJTsgkTVjVfJt4K-ojw8IbHzvkauqfFU';\r\n        var user = {\r\n            \"name\": { \"first\": \"Cody\", \"last\": \"Carlson\" },\r\n            \"username\": \"otocarlson@gmail.com\"\r\n        };\r\n        this.director.set('token', token);\r\n        this.director.set('user', user);\r\n        // this.in('settings[bbbb]').subscribe(this.handleState);\r\n        this.director.set(settings.id, settings);\r\n        [\r\n            { id: 0, name: 'aaaa' },\r\n            { id: 1, name: 'bbbb' },\r\n            { id: 2, name: 'cccc' },\r\n        ].forEach( (d) => settings.set(d.name, d) );\r\n    }\r\n    \r\n    log(e: CustomEvent, ...more: any[]) {\r\n        var { type, detail } = e;\r\n        console.log('@ STATE', type, detail);\r\n    }\r\n\r\n    // 'token': log,\r\n    // 'user': log,\r\n    ['app/settings'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n    ['app/settings/aaaa'](e: CustomEvent) {\r\n        this.log(e, '<-- specifically targeted');\r\n    }\r\n    ['app/settings/*'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n    ['**/settings/*'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n    ['**/*/*'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n    ['A'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n\r\n}\r\n\r\nexport { StateHandlers };\r\n","\r\nimport { Sandbox as CommonSandbox } from '@motorman/core';\r\nimport { Director } from '@motorman/vertices/director';\r\n\r\nclass Sandbox extends CommonSandbox {\r\n    \r\n    constructor(public element: any, public comm: any, director: Director) {\r\n        super(director);\r\n    }\r\n    \r\n}\r\n\r\nexport { Sandbox };\r\n","\r\nimport { Reactive as CommonSandbox } from '@motorman/core/sandbox';\r\nimport { Sandbox as CommonComponentSandbox } from '@motorman/vertices/sandbox';\r\nimport { Utilities } from '@motorman/core/utilities';\r\nimport { Director, ActionHandlers, StateHandlers, channels } from './director';\r\n\r\n// class Dependencies {};  // mock\r\n// var director = new Director({ channels, Dependencies, ActionHandlers, StateHandlers });\r\n\r\nclass Sandbox extends CommonSandbox {\r\n    \r\n}\r\n\r\nclass ServiceSandbox extends Sandbox {\r\n    public http: any = { };\r\n    \r\n    constructor(utils: Utilities, director: Director) {\r\n        super(director);\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nclass ComponentSandbox extends CommonComponentSandbox {\r\n    \r\n    constructor(element: any, comm: any, director: Director) {\r\n        super(element, comm, director);\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { Sandbox, ServiceSandbox, ComponentSandbox };\r\n","\r\nclass CONSTANTS {\r\n    static readonly SELECTOR: string = 'v';\r\n}\r\n\r\nexport { CONSTANTS };\r\n","\r\nimport { Utilities } from '@motorman/core/utilities';\r\nimport { CONSTANTS } from './constants';\r\n\r\nconst {\r\n    SELECTOR,\r\n} = CONSTANTS;\r\n\r\nvar utils = new Utilities();\r\nclass DataDecorator {\r\n    \r\n    constructor(private dataset: any = {}) {\r\n        utils.extend(this, dataset);\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nfunction bootstrap(target, core) {\r\n    var element = target;\r\n    var selector = this.selector;\r\n    var data: any = new DataDecorator(element.dataset);\r\n    var ex = /[\\s]+/img;\r\n    var slug = data[SELECTOR] || '';\r\n    var ids = slug.split(ex);\r\n    var children = element.children;// element.querySelectorAll(selector);\r\n    var components = [ ];\r\n    \r\n    var resolveScope = function resolveScope(parent, child) {\r\n        var isDirectDescendant = (child.parentNode === parent);\r\n        if (isDirectDescendant) bootstrap.call(this, child, this);\r\n    }.bind(core, element);\r\n    \r\n    if (!!slug) components = ids.map(core.bootstrap.bind(core, element, data));\r\n    Array.prototype.forEach.call(children, resolveScope);  // TODO: Optimize!!!\r\n    components.forEach( mountComponent.bind(core) );\r\n    \r\n    function mountComponent(component) {\r\n        if (!component) return;\r\n        var instance = component.instance, handleMount = instance.handleMount;\r\n        if (handleMount) handleMount.call(instance);\r\n    }\r\n    \r\n}\r\n\r\nexport { bootstrap };\r\n","\r\nimport { filter } from 'rxjs/operators';\r\n//\r\nimport { Environment } from '@motorman/models';\r\nimport { V, Element } from '@motorman/vertices';\r\n// import { V, Element, attr, watch, bind, handle } from '@motorman/vertices';\r\nimport { BackdropComponent } from '@motorman/vertices/sdk/components/backdrop/backdrop.component';\r\nimport { ModalComponent } from '@motorman/vertices/sdk/components/modal/modal.component';\r\n//\r\nimport { environment } from '../environments/environment';\r\nimport { ServiceSandbox, ComponentSandbox as Sandbox } from './core';\r\nimport { Director, ActionHandlers, StateHandlers, channels } from './core';\r\nimport { CONSTANTS, bootstrap } from './core';\r\n// import { AppComponent } from './app.component';\r\n\r\n\r\nclass TestService {\r\n            \r\n    constructor(private $: ServiceSandbox) {\r\n        // console.log('@ TestService', $);\r\n    }\r\n    \r\n    init() {\r\n        // console.log('@ TestService # init', this.$);\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\n@Element({ name: 'v-custom', template: `<h2>This is a template for {name}</h2>` })\r\nclass Component {\r\n    // @attr() name: any = '';\r\n    // public id: number = +'998';\r\n    \r\n    // constructor(private $: Sandbox) {\r\n    //     // console.log('@ v-custom', $.element, $.element.template);\r\n    //     setTimeout( () => this.name = 'CLICK ME', (1000 * 3) );\r\n    //     // $.attach(this);\r\n    //     $.in($.channels['JOHN:WILL:LIKE:THIS:STRATEGY']).pipe(this.filterId).subscribe(this.handleId);\r\n    //     // $.in($.channels['JOHN:WILL:LIKE:THIS:STRATEGY']).pipe(latest).subscribe(this.handleId);\r\n    //     // setTimeout( () => $.attach(this), (1000 * 2) );\r\n    // }\r\n    \r\n    // init(dataset: DOMStringMap) {\r\n    //     console.log('@ Component # dataset', dataset);\r\n    // }\r\n    \r\n    // attributeChangedCallback(attrName, oldVal, newVal) {\r\n    //     console.log('@ Custom # attributeChangedCallback', attrName, oldVal, newVal);\r\n    // }\r\n    \r\n    // @watch('name') watchName(val, old) {\r\n    //     console.log(`@v-custom: this.name was ${old} and is now ${val}`);\r\n    // }\r\n    \r\n    // @bind('click') handleClick(e: Event) {\r\n    //     console.log('# click', e);\r\n    //     this.name = 'now-this!!!';\r\n    //     setTimeout( () => this.name = 'CLICK ME', (1000 * 3) );\r\n    // }\r\n    \r\n    // next(e: CustomEvent) {\r\n    //     var { type, detail } = e;\r\n    //     var action = {\r\n    //         [ this.$.channels['JOHN:WILL:LIKE:THIS:STRATEGY'] ]: this.handleId,\r\n    //     }[ type ];\r\n        \r\n    //     console.log('@ next', type, detail);\r\n    //     action && setTimeout( () => action.call(this, e), (1000 * 5) );\r\n    // }\r\n    // error(error: any) {\r\n    //     // console.log('@ SomeComponent # error()', error);\r\n    // }\r\n    // complete() {\r\n    //     // console.log('@ SomeComponent # complete()');\r\n    // }\r\n    \r\n    // private filterId = filter( (e: CustomEvent) => e.detail.id === this.id );\r\n    // private handleId = (e: CustomEvent) => {\r\n    //     var { type, detail } = e;\r\n    //     console.log('@ handleId', type, detail);\r\n    // };\r\n    \r\n    // // public handleLatest = (e: CustomEvent) => {\r\n    // //   var { type, detail } = e;\r\n    // //   console.log('@ handleLatest', type, detail);\r\n    // // };\r\n    \r\n}\r\n\r\n@Element({ name: 'v-other', template: `` })\r\nclass OtherComponent {\r\n    \r\n    // constructor(private $: Sandbox) {\r\n    //     setTimeout( () => this.wait(), (1000 * 3) );\r\n    //     setTimeout( () => $.publish($.channels['MODAL:REQUESTED'], { active: '???' }), (1000 * 2) );\r\n    // }\r\n    \r\n    // wait() {\r\n    //     var { $ } = this;\r\n    //     $.publish($.channels['JOHN:WILL:LIKE:THIS:STRATEGY'], { id: 998, datum: 'A' });\r\n    //     $.publish($.channels['JOHN:WILL:LIKE:THIS:STRATEGY'], { id: 999, datum: 'B' });\r\n    // }\r\n    \r\n}\r\n\r\nvar app = new (class Application {\r\n    \r\n    constructor(env: Environment) {\r\n        \r\n        // SERVICES\r\n        // V(TestService);\r\n        // VERTICES COMPONENTS\r\n        // V(BackdropComponent)(ModalComponent);\r\n        V(ModalComponent);\r\n        // APP COMPONENTS\r\n        // V(AppComponent)(Component)(OtherComponent);\r\n        // setTimeout( () => V(Component), (1000 * 5) ); <-- THIS STILL BASICALLY FUNCTIONS\r\n        \r\n        // V.component('document', class DocumentComponent {\r\n            \r\n        //     constructor(private $: Sandbox) {\r\n        //         // console.log('@ DocumentComponent', $);\r\n        //     }\r\n            \r\n        //     init() {\r\n        //         // console.log('@ DocumentComponent # init', this.$);\r\n        //         return this;\r\n        //     }\r\n            \r\n        // });\r\n    \r\n        const {\r\n            SELECTOR,\r\n        } = CONSTANTS;\r\n        \r\n        class Dependencies {};  // mock\r\n        var director = new Director({ channels, Dependencies, ActionHandlers, StateHandlers });\r\n        var config = {\r\n            director,\r\n            selector: `[data-${SELECTOR}]`,\r\n            datasets: '[data-attribute]',\r\n            bootstrap,\r\n            decorators: { services: ServiceSandbox, components: Sandbox },\r\n        };\r\n        \r\n        window.addEventListener( 'load', () => V.config(config) );\r\n        \r\n    }\r\n    \r\n})(environment);\r\n\r\nexport { app };\r\n","\r\nimport { app } from './app/app';\r\nconsole.log(`app:`, app);\r\n"],"sourceRoot":""}