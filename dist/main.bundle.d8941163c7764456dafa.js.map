{"version":3,"sources":["webpack:///./src/@motorman/vertices/core/defaults.js","webpack:///./src/@motorman/core/utilities/patterns/behavioral/command.ts","webpack:///./src/@motorman/core/utilities/patterns/behavioral/mediator/eventhub.ts","webpack:///./src/@motorman/vertices/core/element-engine.ts","webpack:///./src/@motorman/vertices/core/core.ts","webpack:///./src/@motorman/vertices/core/api.js","webpack:///./src/@motorman/vertices/core/decorators.ts","webpack:///./src/@motorman/vertices/index.ts","webpack:///./src/@motorman/core/utilities/utilities.ts","webpack:///./src/@motorman/core/utilities/patterns/other/deferred.ts","webpack:///./src/@motorman/core/utilities/index.ts","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/callsite/index.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./src/@motorman/vertices/sdk/components/backdrop/backdrop.component.ts","webpack:///./src/@motorman/core/utilities/ds/dictionary.ts","webpack:///./src/@motorman/core/utilities/ds/queue.ts","webpack:///./src/@motorman/vertices/sdk/components/modal/modal.component.ts","webpack:///./src/@motorman/vertices/sdk/components/modal/modal.component.html","webpack:///./src/main.scss?4e53","webpack:///./src/main.scss","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isFunction.js","webpack:///./node_modules/rxjs/_esm5/internal/config.js","webpack:///./node_modules/rxjs/_esm5/internal/util/hostReportError.js","webpack:///./node_modules/rxjs/_esm5/internal/Observer.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArray.js","webpack:///./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscription.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isObject.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/filter.js","webpack:///./src/environments/environment.prod.ts","webpack:///./src/@motorman/models/environment.model.ts","webpack:///./src/@motorman/vertices/director/channels.ts","webpack:///./node_modules/rxjs/_esm5/internal/symbol/observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/noop.js","webpack:///./node_modules/rxjs/_esm5/internal/util/pipe.js","webpack:///./node_modules/rxjs/_esm5/internal/Observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/toSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/canReportError.js","webpack:///./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","webpack:///./node_modules/rxjs/_esm5/internal/SubjectSubscription.js","webpack:///./node_modules/rxjs/_esm5/internal/Subject.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/Action.js","webpack:///./node_modules/rxjs/_esm5/internal/Scheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/queue.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/empty.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js","webpack:///./node_modules/rxjs/_esm5/internal/Notification.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/fromArray.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/throwError.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/of.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/observeOn.js","webpack:///./node_modules/rxjs/_esm5/internal/ReplaySubject.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/map.js","webpack:///./src/@motorman/core/store/store.rxjs.ts","webpack:///./src/@motorman/core/mediator/mediator.rxjs.ts","webpack:///./src/@motorman/core/eventhub/eventhub.rxjs.ts","webpack:///./src/@motorman/core/director/director.rxjs.ts","webpack:///./src/@motorman/vertices/director/director.ts","webpack:///./src/app/core/director/director.ts","webpack:///./src/app/core/director/channels.ts","webpack:///./src/app/core/director/handlers/action.ts","webpack:///./src/@motorman/vertices/director/handlers/action.ts","webpack:///./src/app/core/director/handlers/state.ts","webpack:///./src/app/core/sandbox.ts","webpack:///./src/@motorman/core/sandbox/sandbox.rxjs.ts","webpack:///./src/app/core/constants.ts","webpack:///./src/app/core/bootstrap.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.ts","webpack:///./src/main.ts"],"names":["DefaultServicesSandbox","utils","DefaultComponentSandbox","element","StrictCommand","context","action","this","splat","execute","super","EventTarget","ConstructorProxy","comm","Sandbox","director","Target","args","sandbox","params","concat","data","type","result","Reflect","construct","publish","channels","MemberProxy","source","target","key","has","receiver","get","value","set","deleteProperty","MethodProxy","thus","call","Channels","channel","e","CustomEvent","detail","dispatchEvent","handler","addEventListener","removeEventListener","Comparitor","component","attr","previous","undefined","name","detect","equal","current","details","command","composeCommand","operator","composeExecutor","item","pipes","operators","ops","filter","map","composeOperand","Class","observedAttributes","watchers","Map","listeners","subscriptions","template","pTemplate","construction","Proxy","state","members","methods","proxy","properties","Object","getOwnPropertyNames","prototype","methodBlacklist","mapListener","mapSubscription","surrogate","create","forEach","Element","HTMLElement","$utils","config","getConfig","$","$watchers","$comparitors","handlers","handleProxyInvokation","attributes","content","method","getDirtyAttributeStates","comparitors","initAttribute","$load","bind","init","then","t","subscribe","Array","from","values","interpolate","innerHTML","dataset","initAttributes","i","len","length","attribute","attrs","null","setAttribute","initAttributeComparitors","initAttributeComparitor","comparitor","k","bindAttribute","bindListener","bindMessageHandler","descriptor","getOwnPropertyDescriptor","getAttribute","v","defineProperty","in","pipe","children","c","a","inspectChild","child","inspectChildAttributes","inspectChildren","inspectChildAttribute","ownerElement","isRefBinding","setRefBinding","isEventBinding","$addEventListener","getRefBinding","matches","match","id","getEventBindingName","exe","fn","Function","getEventBindingInvoker","cache","push","$removeEventListener","caches","splice","dirty","$unload","$draw","$removeEventListeners","attachedCallback","connectedCallback","attrName","oldVal","newVal","all","$watcher","attributeChangedCallback","detachedCallback","disconnectedCallback","unbindListener","unbindMessageHandler","adoptedCallback","options","customElements","prepare","window","define","DEFAULT_CONFIG","selector","datasets","bootstrap","slug","behavior","components","split","document","resolveScope","parent","parentNode","decorators","services","Vertex","Vertices","Core","Facade","V","register","apply","arguments","dConfiguration","pConfiguration","promise","dInitialization","pInitialization","engine","elements","configuration","console","log","resolve","Error","arm","extend","Service","constructor","service","Constructor","Component","definition","startServices","startService","_service","ServiceSandbox","warn","ComponentSandbox","instance","core","configure","registerService","Directive","registerComponent","path","callsite","DEFAULT_DESCRIPTOR","writable","configurable","enumerable","requester","getFileName","lazy","join","Promise","hasGetOrSet","watch","message","Set","CSV","collection","fields","delimiter","$table","$values","$lines","matrix","lines","span","keys","reduce","o","x","width","j","height","y","row","rows","col","columns","_id","field","record","column","line","Math","max","tabs","replace","csv","slice","array","datum","Utilities","object","first","more","0","setTimeout","timeout","delay","clearTimeout","timer","threshhold","scope","deferTimer","now","Date","last","invoke","r","random","toString","s","str","b","val","escapeHTML","re","matcher","RegExp","string","url","createElement","href","hash","host","hostname","origin","pathname","port","protocol","search","shift","sortByKey","size","unit","toFixed","$bytes","$KB","$MB","$GB","$TB","$PB","bytes","KB","MB","GB","TB","PB","auto","Infinity","n","Number","round","Deferred","_resolve","_reject","reject","normalizeArray","parts","allowAboveRoot","up","unshift","xs","f","res","exports","resolvedPath","resolvedAbsolute","process","cwd","TypeError","charAt","p","normalize","isAbsolute","trailingSlash","substr","paths","index","relative","to","trim","arr","start","end","fromParts","toParts","min","samePartsLength","outputParts","sep","dirname","code","charCodeAt","hasRoot","matchedSlash","basename","ext","extname","startDot","startPart","preDotState","cachedSetTimeout","cachedClearTimeout","module","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","chdir","dir","umask","orig","prepareStackTrace","_","stack","err","captureStackTrace","callee","memo","isOldIE","Boolean","atob","getTarget","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","stylesInDom","modulesToDom","moduleId","list","part","css","media","sourceMap","addStyle","insertStyleElement","style","nonce","insert","appendChild","textStore","replaceText","replacement","applyToSingletonTag","remove","obj","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","update","styleIndex","removeStyleElement","newObj","base","newList","useSourceMap","cssMapping","sourceMapping","base64","sourceURLs","sources","sourceRoot","cssWithMappingToString","modules","mediaQuery","BackdropRequest","BackdropComponent","active","request","old","Queue","clear","json","parse","serialize","deserialize","valueOf","requests","isEmpty","front","adHoc","dequeue","test","enqueue","api","__esModule","default","exported","locals","___CSS_LOADER_API_IMPORT___","extendStatics","d","setPrototypeOf","__proto__","hasOwnProperty","__extends","__","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","hostReportError","empty","closed","next","error","useDeprecatedSynchronousErrorHandling","complete","isArray","UnsubscriptionError","UnsubscriptionErrorImpl","errors","Subscription","unsubscribe","_parentOrParents","_subscriptions","_unsubscribe","flattenUnsubscriptionErrors","sub","add","teardown","subscription","EMPTY","tmp","indexOf","subscriptionIndex","errs","rxSubscriber","Symbol","_super","Subscriber","destinationOrNext","_this","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","SafeSubscriber","_parentSubscriber","observerOrNext","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","predicate","thisArg","lift","FilterOperator","FilterSubscriber","count","environment","observable","pipeFromArray","fns","input","prev","Observable","_isScalar","_subscribe","sink","nextOrObserver","toSubscriber","_trySubscribe","observer","_a","closed_1","canReportError","promiseCtor","getPromiseCtor","operations","_i","toPromise","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","SubjectSubscription","subject","observers","subscriberIndex","SubjectSubscriber","Subject","hasError","thrownError","copy","asObservable","AnonymousSubject","QueueAction","scheduler","work","schedule","flush","_execute","requestAsyncId","AsyncAction","pending","recycleAsyncId","setInterval","clearInterval","errored","errorValue","actions","Action","Scheduler","SchedulerAction","QueueScheduler","AsyncScheduler","delegate","scheduled","emptyScheduled","isScheduler","NotificationKind","scheduleArray","fromArray","dispatch","Notification","kind","hasValue","observe","do","accept","toObservable","pop","of","createNext","undefinedValueNotification","createError","createComplete","completeNotification","ObserveOnSubscriber","arg","notification","scheduleMessage","ObserveOnMessage","ReplaySubject","bufferSize","windowTime","POSITIVE_INFINITY","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","ReplayEvent","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","MapOperator","project","MapSubscriber","initializations","initialized","channels$","filterChannel","mapData","event","publishers","$data","attach","entries","handleState","stateHandlers","ActionHandlers","StateHandlers","Dependencies","dependencies","actionHandlers","settings","detach","http","CONSTANTS","SELECTOR","DataDecorator","ids","handleMount","AppComponent","prop","TestService","filterId","handleId","OtherComponent","wait","app"],"mappings":"wGA2DA,SAASA,EAAuBC,GAAS,OAAOA,EAChD,SAASC,EAAwBC,GAAW,OAAOA,ECpCnD,MAAMC,UAjBN,MAII,YAAYC,EAASC,GAHb,KAAAD,QAAe,KACf,KAAAC,OAAiB,GAGrBC,KAAKF,QAAUA,EACfE,KAAKD,OAASA,EAGlB,WAAWE,GACP,IAAI,QAAEH,EAAO,OAAEC,GAAWC,KAE1B,OADYF,EAAQC,MAAWE,KAMvC,c,oBAEW,KAAAC,QAAU,IAAID,IAAiBE,MAAMD,WAAWD,ICtBxCG,YCEnB,MAAMC,EAOF,aAAY,KAAEC,EAAI,QAAEC,EAAO,QAAEX,EAAO,SAAEY,IAClCR,KAAKM,KAAOA,EACZN,KAAKO,QAAUA,EACfP,KAAKJ,QAAUA,EACfI,KAAKQ,SAAWA,EAGpB,UAAUC,EAAQC,GACd,IAAI,QAAEH,EAAO,KAAED,EAAI,QAAEV,EAAO,SAAEY,GAAaR,KACvCW,EAAU,IAAIJ,EAAQX,EAASY,GAC/BI,EAAS,GAAGC,OAAOF,EAAS,SAC5BG,EAAO,CAAEC,KAAM,YAAaN,SAAQC,QACpCM,EAASC,QAAQC,UAAUT,EAAQG,GAMvC,OAJAZ,KAAKW,QAAUA,EACfL,EAAKa,QAAQb,EAAKc,SAAS,iBAAkBN,GAC7CR,EAAKa,QAAQb,EAAKc,SAAS,2BAA4BN,GAEhDE,GAKf,MAAMK,EAKF,aAAY,KAAEf,EAAI,OAAEgB,EAAM,QAAE1B,IACxBI,KAAKM,KAAOA,EACZN,KAAKsB,OAASA,EACdtB,KAAKJ,QAAUA,EAGnB,IAAI2B,EAAaC,GACb,IAAI,OAAEF,EAAM,KAAEhB,GAASN,KACnBc,EAAO,CAAEC,KAAM,MAAOO,SAAQE,OAC9BR,EAASC,QAAQQ,IAAIH,EAAQE,GAKjC,OAHAlB,EAAKa,QAAQb,EAAKc,SAAS,iBAAkBN,GAC7CR,EAAKa,QAAQb,EAAKc,SAAS,qBAAsBN,GAE1CE,EAGX,IAAIO,EAAaC,EAAUE,GAEvB,IAAI,OAAEJ,EAAM,KAAEhB,EAAI,QAAEV,GAAYI,KAC5Bc,EAAO,CAAEC,KAAM,MAAOO,SAAQE,OAC9BR,EAASC,QAAQU,IAAIL,EAAQE,GAKjC,OAHAlB,EAAKa,QAAQb,EAAKc,SAAS,iBAAkBN,GAC7CR,EAAKa,QAAQb,EAAKc,SAAS,qBAAsBN,GAE1CE,EAGX,IAAIO,EAAaC,EAAUI,EAAYF,GACnC,IAAI,OAAEJ,EAAM,KAAEhB,GAASN,KACnBc,EAAO,CAAEC,KAAM,MAAOO,SAAQE,MAAKI,SACnCZ,EAASC,QAAQY,IAAIP,EAAQE,EAAKI,GAKtC,OAHAtB,EAAKa,QAAQb,EAAKc,SAAS,iBAAkBN,GAC7CR,EAAKa,QAAQb,EAAKc,SAAS,qBAAsBN,GAE1CE,EAGX,eAAeO,EAAkBC,GAC7B,IAAI,OAAEF,EAAM,KAAEhB,GAASN,KACnBc,EAAO,CAAEC,KAAM,SAAUO,SAAQE,OACjCR,EAASC,QAAQa,eAAeR,EAAQE,GAK5C,OAHAlB,EAAKa,QAAQb,EAAKc,SAAS,iBAAkBN,GAC7CR,EAAKa,QAAQb,EAAKc,SAAS,wBAAyBN,GAE7CE,GAKf,MAAMe,EAKF,aAAY,KAAEzB,EAAI,OAAEgB,EAAM,QAAE1B,IACxBI,KAAKM,KAAOA,EACZN,KAAKsB,OAASA,EACdtB,KAAKJ,QAAUA,EAGnB,MAAM2B,EAAQS,EAAMtB,GAChB,IAAI,OAAEY,EAAM,KAAEhB,GAASN,KACnBc,EAAO,CAAEC,KAAM,QAASO,SAAQC,SAAQS,OAAMtB,QAC9CM,EAASO,EAAOU,KAAKX,KAAWZ,GAQpC,OAHAJ,EAAKa,QAAQb,EAAKc,SAAS,iBAAkBN,GAC7CR,EAAKa,QAAQb,EAAKc,SAAS,uBAAwBN,GAE5CE,GASf,MAAMkB,EAAN,cACI,KAAC,iBAAmB,wBACpB,KAAC,2BAA6B,kCAC9B,KAAC,qBAAuB,4BACxB,KAAC,qBAAuB,4BACxB,KAAC,qBAAuB,4BACxB,KAAC,wBAA0B,+BAC3B,KAAC,uBAAyB,8BAC1B,KAAC,sBAAwB,8BAE7B,MAAM,EAIF,cAHQ,KAAAX,OAAS,IAAInB,YACd,KAAAgB,SAAqB,IAAIc,EAIhC,QAAQC,EAAiBrB,GACrB,IAAIsB,EAAI,IAAIC,YAAYF,EAAS,CAAEG,OAAQxB,IAE3C,OADAd,KAAKuB,OAAOgB,cAAcH,GACnBpC,KAEX,UAAUmC,EAASK,GAEf,OADAxC,KAAKuB,OAAOkB,iBAAiBN,EAASK,GAAS,GACxCxC,KAEX,YAAYmC,EAASK,GAEjB,OADAxC,KAAKuB,OAAOmB,oBAAoBP,EAASK,GAAS,GAC3CxC,MAKf,MAAM2C,EAQF,YAAoBrC,EAAwBsC,EAAwBC,GAAhD,KAAAvC,OAAwB,KAAAsC,YAAwB,KAAAC,OAP7D,KAAAC,cAAgBC,EAQnB,IAAI,KAAEC,EAAI,MAAEpB,GAAUiB,EAEtB,OADA7C,KAAK8C,SAAWlB,EACT5B,KATX,WAAqB,OAAOA,KAAK6C,KAAKG,KACtC,cAAqB,OAAOhD,KAAK4C,UAAW5C,KAAKgD,MACjD,YAAYpB,GAAc5B,KAAK6C,KAAKjB,MAAQA,EAC5C,YAAuB,OAAO5B,KAAKiD,SACnC,YAAuB,OAAQjD,KAAKkD,MAQpC,SACI,IAAI,KAAE5C,EAAI,KAAE0C,EAAI,SAAEF,EAAQ,QAAEK,GAAYnD,KACpCkD,EAASJ,IAAaK,EACtBC,EAAU,CAAEJ,OAAMF,WAAUK,UAASD,SAGzC,OADKA,GAAO5C,EAAKa,QAAQb,EAAKc,SAAS,4BAA6BgC,GAC7DF,EAGX,SACI,IAAI,KAAEF,EAAI,UAAEJ,GAAc5C,KAE1B,OADAA,KAAK8C,SAAW9C,KAAKmD,QAAUP,EAAUI,GAClChD,MAMf,MAAM,EAEF,YAAoBO,EAAsBC,GAAtB,KAAAD,UAAsB,KAAAC,WAElC,eAAeoC,EAAgBI,GAEnC,OADc,IAAI,EAAQJ,EAAWI,GAGjC,gBAAgBJ,EAAgBI,GACpC,IAAIK,EAAUrD,KAAKsD,eAAeV,EAAWI,IAAO,QAAE9C,GAAYmD,EAClE,OAAOnD,EAEH,eAAe0C,EAAgBW,EAAoBP,GAEvD,OAD+DO,EAAjDvD,KAAKwD,gBAAgBZ,EAAWI,IAI1C,YAAYJ,EAAgBa,GAChC,IAAI,KAAE1C,EAAI,KAAEiC,GAASS,EAErB,MAD+D,CAAE1C,OAAMiC,OAAMR,QAA/DxC,KAAKwD,gBAAgBZ,EAAWI,IAG1C,gBAAgBJ,EAAWc,GAAO,KAAE3C,EAAI,KAAEiC,EAAMW,UAAWC,IAK/D,MAFW,CAAE7C,OAAMiC,OAAMW,UAFTD,EAAMG,OAAQ,EAAGb,UAAWY,EAAInC,IAAIuB,IAC3Bc,IAAK,EAAGd,OAAMO,cAAevD,KAAK+D,eAAenB,EAAWW,EAAUP,KAM3F,UAAUgB,EAAOpE,GACrB,IAAI,SAAEY,EAAQ,QAAED,GAAYP,MAExB,mBAAEiE,EAAqB,GAAE,SAAEC,EAAW,IAAIC,KAAUH,GACpD,UAAEI,EAAY,IAAOJ,GACrB,cAAEK,EAAgB,GAAE,UAAEV,EAAY,IAAOK,GACzC,SAAEM,EAAW,GAAE,UAAEC,GAAcP,EAE/B1D,EAAO,IAAI,EACXkE,EAAe,IAAInE,EAAiB,CAAEC,OAAMC,UAASX,UAASY,aAE9DoC,EAAY,IADC,IAAI6B,MAAMT,EAAOQ,EAClB,CAAe,CAAEE,OAAO,IACpCC,EAAU,IAAItD,EAAY,CAAEf,OAAMgB,OAAQsB,EAAWhD,YACrDgF,EAAU,IAAI7C,EAAY,CAAEzB,OAAMgB,OAAQsB,EAAWhD,YACrDiF,EAAQ,IAAIJ,MAAM7B,EAAW+B,GAC7BG,EAAaC,OAAOC,oBAAoBhB,EAAMiB,WAC9CC,EAAkB,CAAE,aAAe,EAAM,mBAAqB,EAAM,0BAA4B,EAAM,sBAAwB,EAAM,iBAAmB,GAEvJd,EAAYA,EAAUN,IAAML,GAASzD,KAAKmF,YAAYvC,EAAWa,IACjEY,EAAgBA,EAAcP,IAAML,GAASzD,KAAKoF,gBAAgBxC,EAAWe,EAAWF,IAExF4B,EAAYN,OAAOO,OAAOT,GAC9B,IAAK,IAAIrD,KAAOqD,EAAWA,EAAMrD,GAAKS,OAAMoD,EAAU7D,GAAO,IAAIiD,MAAMI,EAAMrD,GAAMoD,IAgCnF,OA/BAE,EAAWS,QAAU/D,IAAgBoB,EAAUpB,IAAQoB,EAAUpB,GAAKS,OAASiD,EAAgB1D,KAAM6D,EAAU7D,GAAO,IAAIiD,MAAM7B,EAAUpB,GAAMoD,MAEnI,OAAH,8EACNtE,OACAE,WACAD,UACAyD,SACG,CACCrD,QAAS6D,EAAa7D,UAEvB,CACC2D,WACAC,cAED,CACDN,qBACAC,aAEC,CACCE,cAED,CACCC,gBACAV,cAED,CACCf,YACAyC,cAOJ,QAAQrB,G,MACRhC,EAAOhC,MACP,mBAAEiE,EAAqB,IAAOD,EAElC,OAAO,QAAMwB,UAAgBC,YAqBzB,cACItF,QApBM,KAAAuF,OAAoB,IAAI,IAC1B,KAAAC,OAAc3D,EAAK4D,UAAU5B,EAAOhE,MACpC,KAAAM,KAAiBN,KAAK2F,OAAOrF,KAC7B,KAAAuF,EAAS7F,KAAK2F,OAAOhF,QACrB,KAAAiC,UAAiB5C,KAAK2F,OAAO/C,UAC7B,KAAAyC,UAAiBrF,KAAK2F,OAAON,UAC7B,KAAAjB,UAA2BpE,KAAK2F,OAAOvB,UACvC,KAAAC,cAAuBrE,KAAK2F,OAAOtB,cACnC,KAAAV,UAAmB3D,KAAK2F,OAAOhC,UAC/B,KAAAmC,UAA8B9F,KAAK2F,OAAOzB,SAC1C,KAAAI,SAAmBtE,KAAK2F,OAAOrB,SAC/B,KAAAC,UAA6BvE,KAAK2F,OAAOpB,UACzC,KAAAwB,aAAwC,IAAI5B,IAC5C,KAAA6B,SAAkB,GAmPlB,KAAAC,sBAAyB7D,IAC7B,IAAI,UAAEQ,EAAS,WAAEsD,EAAU,QAAEC,GAAYnG,MACrC,KAAEe,EAAI,OAAEuB,GAAWF,GAAKrB,KAAMqF,GAAW9D,EACjCtC,KAAKqG,wBAAwBrG,KAAKsG,aAExCf,QAAS,EAAGvC,UAAWhD,KAAKuG,cAAc3D,EAAWsD,EAAWlD,KACtEhD,KAAKwG,SAjPL,IAAI,KAAElG,EAAI,UAAEsC,EAAS,UAAEwB,EAAS,cAAEC,EAAa,UAAEV,EAAS,UAAEY,GAAcvE,MACpEiE,mBAAoBiC,GAAeV,EASzC,OAPAxF,KAAKyG,KAAK7D,EAAWsD,EAAY9B,EAAWC,GAC5CrE,KAAK0G,KAAK1G,MAEVuE,EAAUoC,KAAOC,GAAM5G,KAAKsE,SAAWsC,GACvCtG,EAAKuG,UAAUvG,EAAKc,SAAS,iBAAkBpB,KAAKiG,uBACpD3F,EAAKuG,UAAUvG,EAAKc,SAAS,sBAAuBpB,KAAKiG,uBAElDjG,KAjBX,kBAAkC,OAAO8G,MAAMC,KAAM/G,KAAK+F,aAAaiB,UACvE,cAAwB,OAAOhH,KAAK0F,OAAOuB,YAAYjH,KAAKsE,SAA7BtE,CAAuCA,KAAK4C,WAC3E,YAAYhB,GAAiB5B,KAAKkH,UAAYtF,EAC9C,YAAc,OAAOqC,EAiBb,MAAK,UAAErB,EAAS,QAAEuE,EAAO,WAAEjB,IAG/B,OAFAlG,KAAKoH,eAAepH,MAChB4C,EAAU8D,MAAM9D,EAAU8D,KAAKS,GAC5BnH,KAEH,gBAAe,UAAE4C,EAAS,WAAEsD,IAChC,IAAK,IAAImB,EAAI,EAAGC,EAAMpB,EAAWqB,OAAQF,EAAIC,EAAKD,IAAKrH,KAAKuG,cAAc3D,EAAWsD,EAAWmB,GAAIA,EAAGnB,GACvG,OAAOlG,KAEH,cAAc4C,EAAW4E,EAAiBH,EAAYnB,GAC1D,IAAI,MAAEuB,GAAUzH,MACZ,KAAEgD,EAAMpB,MAAOiB,GAAS2E,EAAW5F,EAAQgB,EAAUI,GAOzD,MALK,CAAED,WAAW,EAAM2E,MAAM,EAAM,IAAI,GAAQ9F,IAAS5B,KAAK2H,aAAa3E,EAAMpB,GAGjF5B,KAAK4H,yBAAyBhF,EAAW6E,GAElCzH,KAGH,yBAAyB4C,EAAWsD,GACxC,IAAK,IAAImB,EAAI,EAAGC,EAAMpB,EAAWqB,OAAQF,EAAIC,EAAKD,IAAKrH,KAAK6H,wBAAwBjF,EAAWsD,EAAWmB,GAAIA,EAAGnB,GACjH,OAAOlG,KAEH,wBAAwB4C,EAAWI,EAAcqE,EAAGI,GACxD,IAAI,KAAEnH,EAAI,UAAEsC,EAAS,WAAEsD,GAAelG,KAClC6C,EAAOqD,EAAWlD,GAAO8E,EAAa,IAAInF,EAAWrC,EAAMsC,EAAWC,GAG1E,OADA7C,KAAK+F,aAAalE,IAAImB,EAAM8E,GACrB9H,KAGH,KAAK4C,EAAgBsD,EAAsB9B,EAA0BC,GAKzE,OAJA6B,EAAWX,QAAUwC,GAAM/H,KAAKgI,cAAcpF,EAAWmF,IACzD3D,EAAUmB,QAAUzB,GAAQ9D,KAAKiI,aAAarF,EAAWkB,IACzDO,EAAckB,QAAUzB,GAAQ9D,KAAKkI,mBAAmBtF,EAAWkB,IAE5D9D,KAEH,UACA,cAAc4C,EAAgBmF,GAClC,IAAII,EAAapD,OAAOqD,yBAAyBpE,EAAMiB,UAAW8C,IAE9D,IAAEpG,EAAG,IAAEE,IADPsG,EAAa,OAAH,UAAQA,GACHA,GAUnB,OARYnI,KAAKqI,aAAaN,IAClB/H,KAAK2H,aAAaI,EAAGnF,EAAUmF,IACvCI,EAAWxG,KAAOwG,EAAWtG,IAAKsG,EAAa,CAAExG,MAAKE,OAChDsG,EAAWxG,KAAQwG,EAAWtG,KAC9BsG,EAAWxG,KAAOwG,EAAWtG,IAAKsG,EAAa,CAAExG,IAAK,IAAM3B,KAAKqI,aAAaN,GAAIlG,OACnFsG,EAAWxG,MAAQwG,EAAWtG,MAAKsG,EAAa,CAAExG,MAAKE,IAAK,IAAM7B,KAAK2H,aAAaI,EAAGnF,EAAUmF,MAF7DI,EAAa,CAAExG,IAAK,IAAM3B,KAAKqI,aAAaN,GAAIlG,IAAMyG,GAAMtI,KAAK2H,aAAaI,EAAGO,IAG9HvD,OAAOwD,eAAe3F,EAAWmF,EAAGI,GAE7BnI,KAGH,aAAa4C,EAAgBkB,GACjC,IAAI,KAAE/C,EAAI,QAAEyB,GAAYsB,EACxB9D,KAAKyC,iBAAiB1B,EAAMyB,GAAS,GAEjC,eAAeI,EAAgBkB,GACnC,IAAI,KAAE/C,EAAI,QAAEyB,GAAYsB,EACxB9D,KAAK0C,oBAAoB3B,EAAMyB,GAAS,GAGpC,mBAAmBI,EAAgBkB,GACvC,IAAI,KAAE/C,EAAI,KAAEiC,EAAI,UAAEW,GAAcG,GAAK,EAAE+B,GAAM7F,KAAMmC,EAAU0D,EAAEzE,SAASL,GACxE8E,EAAE2C,GAAGrG,GAASsG,QAAQ9E,GAAWkD,UAAW,IAAI5G,IAAU2C,EAAUI,MAAS/C,IAEzE,qBAAqB2C,EAAgBkB,GACzC,IAAI,KAAE/C,EAAI,QAAEyB,GAAYsB,GAAK,EAAE+B,GAAM7F,KAIjC,gBAAgB0I,GAEpB,OADA5B,MAAM7B,UAAUM,QAAQtD,KAAMyG,EAAU,CAACC,EAAGtB,EAAGuB,IAAM5I,KAAK6I,aAAaF,EAAGtB,EAAGuB,IACtE5I,KAEH,aAAa8I,EAAoBzB,EAAWqB,GAChD,IAAI,WAAExC,EAAU,SAAEwC,GAAaI,EAK/B,OAHA9I,KAAK+I,uBAAuB7C,GACxBwC,EAASnB,QAAQvH,KAAKgJ,gBAAgBN,GAEnC1I,KAEH,uBAAuBkG,GAE3B,OADAY,MAAM7B,UAAUM,QAAQtD,KAAMiE,EAAY,CAACrD,EAAMwE,EAAGI,IAAUzH,KAAKiJ,sBAAsBpG,EAAMwE,EAAGI,IAC3FzH,KAEH,sBAAsB6C,EAAYwE,EAAWI,GACjD,IAAI,KAAEzE,EAAI,MAAEpB,EAAOsH,aAAcJ,GAAUjG,EAI3C,OAFK7C,KAAKmJ,aAAatG,IAAQ7C,KAAKoJ,cAAcvG,GAC7C7C,KAAKqJ,eAAexG,IAAQ7C,KAAKsJ,kBAAkBzG,GACjD7C,KAGH,aAAa6C,GACjB,IAAI,KAAEG,EAAI,MAAEpB,EAAOsH,aAActJ,GAAYiD,EAE7C,QADW7C,KAAKuJ,cAAc1G,GAG1B,cAAcA,GAClB,IAAI,KAAEG,EAAI,MAAEpB,EAAOsH,aAActJ,GAAYiD,EACzC2G,EAAUxG,EAAKyG,MAAM,YAAcA,EAAOC,KAASF,GAAWA,EAAQjC,QAAUiC,GAAW,GAC/F,OAAOE,EAEH,cAAc7G,GAClB,IAAI,UAAED,GAAc5C,MAChB,KAAEgD,EAAI,MAAEpB,EAAOsH,aAActJ,GAAYiD,EAI7C,OAFAD,EADS5C,KAAKuJ,cAAc1G,IACZjD,EAETI,KAGH,eAAe6C,GACnB,IAAMqG,aAActJ,GAAYiD,EAEhC,SADuD,KAA5C7C,KAAK2J,oBAAoB9G,OAAsDjD,GAGtF,oBAAoBiD,GACxB,IAAI,KAAEG,EAAI,MAAEpB,EAAOsH,aAActJ,GAAYiD,EACzC2G,EAAUxG,EAAKyG,MAAM,cAAgBA,EAAO1I,KAAWyI,GAAWA,EAAQjC,QAAUiC,GAAW,GACnG,OAAOzI,EAEH,uBAAuB8B,GAC3B,IAAMD,UAAW+F,EAAC,KAAErI,GAASN,MACzB,KAAEgD,EAAI,MAAEpB,GAAUiB,GAChB4G,EAAOrD,EAAQ1F,GAASkB,EAAM6H,MAAM,iBAGtCG,GAFSlJ,EAAK+I,MAAM,cAEdzH,EAAKwB,gBAAgBmF,EAAGvC,IAG9ByD,EAAK,IAAIC,SAAS,KAAM,IAAK,SADxB,2BAA2BpJ,SASpC,OANS0B,GAAMyH,EAAGlB,EAAGiB,EAAKxH,GAStB,kBAAkBS,GACtB,IAAI,SAAEmD,GAAahG,MACf,KAAEgD,EAAI,MAAEpB,EAAOsH,aAActJ,GAAYiD,EACzC9B,EAAOf,KAAK2J,oBAAoB9G,GAAOL,EAAUxC,KAAK+J,uBAAuBlH,GAC7EmH,EAAQ,CAAEhH,OAAMpB,QAAOhC,UAASmB,OAAMyB,WAK1C,OAHA5C,EAAQ6C,iBAAiB1B,EAAMyB,GAAS,GACxCwD,EAASiE,KAAKD,GAEPhK,KAEH,wBACJ,IAAI,SAAEgG,GAAahG,KACnB,IAAK,IAAIqH,EAAIrB,EAASuB,OAAQF,KAAMrH,KAAKkK,qBAAqBlE,EAASqB,GAAIA,EAAGrB,GAC9E,OAAOhG,KAEH,qBAAqBgK,EAAY3C,EAAW8C,GAChD,IAAI,KAAEnH,EAAI,MAAEpB,EAAK,QAAEhC,EAAO,KAAEmB,EAAI,QAAEyB,GAAYwH,EAK9C,OAHApK,EAAQ8C,oBAAoB3B,EAAMyB,GAAS,GAC3C2H,EAAOC,OAAO/C,EAAG,GAEVrH,KAGH,wBAAwBsG,GAE5B,OADmBA,EAAYzC,OAASiE,GAAeA,EAAWuC,OAItE,QACI,IAAI,UAAEzH,EAAS,QAAEuD,GAAYnG,KAC7BA,KAAKmG,QAAUA,EACfnG,KAAKgJ,gBAAgBhJ,KAAK0I,UAE9B,QACI1I,KAAKsK,UACLtK,KAAKuK,QAET,UACIvK,KAAKwK,wBAIT,oBACI,IAAI,UAAE5H,EAAS,QAAEuD,GAAYnG,KACzB4C,EAAU6H,kBAAkB7H,EAAU8H,oBAC1C1K,KAAKwG,QAET,yBAAyBmE,EAAUC,EAAQC,GACvC,IAAI,UAAEjI,EAAS,QAAEuD,EAAO,UAAEL,GAAc9F,KACVwC,EAAUI,EAA3B,IAAI+H,MACAG,EAAMlI,EAAb,OACNmI,EAAWjF,EAAUnE,IAAIgJ,GAEzB/H,EAAUoI,0BAA0BpI,EAAUoI,yBAAyBL,EAAUC,EAAQC,GACzFC,GAAKA,EAAI7I,KAAKW,EAAW+H,EAAUC,EAAQC,GAC3CrI,GAASA,EAAQP,KAAKW,EAAWiI,EAAQD,GACzCG,GAAUA,EAASvI,QAAQP,KAAKW,EAAWiI,EAAQD,GACvD5K,KAAKwG,QAET,uBACI,IAAI,UAAE5D,EAAS,UAAEwB,EAAS,cAAEC,GAAkBrE,KAC1C4C,EAAUqI,kBAAkBrI,EAAUsI,uBAC1C9G,EAAUmB,QAAUzB,GAAQ9D,KAAKmL,eAAevI,EAAWkB,IAC3DO,EAAckB,QAAUzB,GAAQ9D,KAAKoL,qBAAqBxI,EAAWkB,IACrE9D,KAAKsK,UAET,kBACI,IAAI,UAAE1H,EAAS,QAAEuD,GAAYnG,KACzB4C,EAAUyI,iBAAiBzI,EAAUyI,kBACzCrL,KAAKwG,WA9PFvC,mBAA+BA,E,EA6Q9C,OAAOjB,EAAMgB,EAAOsH,GAChB,GAAOC,eAAe5J,IAAIqB,GAAQ,OAAOhD,KACzC,IAAIwF,EAAUxF,KAAKwL,QAAQxH,GAG3B,OAFAyH,OAAOF,eAAeG,OAAO1I,EAAMwC,EAAS8F,GAErCtL,MCtiBf,IAAI,EAAW,IJoDf,QInDI2L,EAAiB,CACjBnL,SAAQ,EACRoL,SAAU,WACVC,SAAU,gBACVC,UJTJ,SAASA,EAAUvK,GACf,IAAI3B,EAAU2B,EAEVT,GADWd,KAAK4L,SACThM,EAAQuH,SAAW,IAE1B4E,EAAOjL,EAAKkL,UAAYpM,EAAQ0I,GAAK,GACrC2D,EAAaF,EAAKG,MAFb,YAGLxD,EAAW9I,EAAQ8I,SAChByD,SAEP,IAAIC,EAAe,SAAsBC,EAAQvD,GACnBA,EAAMwD,aAAeD,GACvBP,EAAU7J,KAAKjC,KAAM8I,IAC/CrC,KAAKzG,KAAMJ,GAObkH,MAAM7B,UAAUM,QAAQtD,KAAKyG,EAAU0D,GACjCL,GAAME,EAAW1G,QAAQvF,KAAK8L,UAAUrF,KAAKzG,KAAMJ,KIXzD2M,WAAY,CAAEC,SAAU/M,EAAwBwM,WAAYtM,ICPhE,IA6CI8M,EAAS,IAAI,SAAUC,EAASC,EAAMC,GAOtC,OALQA,EAAO3K,MAAM,SAAS4K,IAC1B,OAAI7M,gBAAgB6M,EAAU,IAAMH,EAASC,EAAMC,GAC5CC,EAAEC,SAASC,MAAMF,EAAGG,aAC5B,IAAIL,GALE,CDnCb,MAYI,cAXQ,KAAAM,eAAgC,IAAI,IACpC,KAAAC,eAA+BlN,KAAKiN,eAAeE,QACnD,KAAAC,gBAAiC,IAAI,IACrC,KAAAC,gBAAgCrN,KAAKoN,gBAAgBD,QACrD,KAAAzN,MAAmB,IAAI,IACvB,KAAA4N,OAAwB,IAAI,EAAc3N,EAAyB,GACnE,KAAA6M,SAAgB,GAChB,KAAAP,WAAkB,GAClB,KAAAsB,SAAgB,GAChB,KAAAC,cAAqB7B,EAGzB,IAAI,gBAAE0B,EAAe,SAAEE,GAAavN,KAQpC,OANAqN,EACK1G,KAAO2E,GAAYmC,QAAQC,IAAI,OAAQpC,IAE5CtL,KAAKkN,eACAvG,KAAOhB,GAAW3F,KAAKoN,gBAAgBO,QAAQ,CAAEpM,OAAQ4K,YAEvDnM,KAGX,KAAKsL,GACD,IAAKA,EAAS,MAAMsC,MAAM,6CAM1B,OALA5N,KAAK6N,IAAIvC,GAKFtL,KAGX,UAAU2F,GAIN,OAHA3F,KAAKN,MAAMoO,OAAO9N,KAAKwN,cAAe7H,GACtC3F,KAAKsN,OAAS,IAAI,EAActN,KAAKwN,cAAcjB,WAAWN,WAAYjM,KAAKwN,cAAchN,UAC7FR,KAAKiN,eAAeU,QAAQ3N,KAAKwN,eAC1BxN,KAAKN,MAAMoO,OAAO,GAAK9N,KAAKwN,eAEvC,gBAAgBO,GACZ,IAAIrE,EAAKqE,EAAQC,YACbC,EAAU,CAAEvE,KAAIwE,YAAaH,GAGjC,OAFA/N,KAAKwM,SAAS9C,GAAM1J,KAAKwM,SAAS9C,IAAOuE,EAElCjO,KAEX,kBAAkB0J,EAAIyE,GAClB,IAAIvL,EAAY,CAAE8G,KAAIwE,YAAaC,GAEnC,OADAnO,KAAKiM,WAAWvC,GAAM1J,KAAKiM,WAAWvC,IAAO9G,EACtC5C,KAEX,OAAOoO,GACH,IAAI,KAAEpL,EAAI,MAAEgB,EAAK,QAAEsH,GAAY8C,GAC3B,eAAEnB,GAAmBjN,MAAQmN,QAASD,GAAmBD,EAK7D,OAHAC,EACKvG,KAAOhB,GAAW3F,KAAKsN,OAAO5B,OAAO1I,EAAMgB,EAAOsH,IAEhDtL,KAGX,IAAIsL,GACA,IAAI3F,EAAS3F,KAAKwN,cACd1B,EAAYnG,EAAOmG,UACnBvK,EAAS+J,EAAQ/J,OAGrBvB,KAAKqO,gBACLvC,EAAU7J,KAAK0D,EAAQpE,EAAQvB,MAGnC,gBACiBA,KAAKwN,cAAmCjB,WACrD,IAAK,IAAI7C,KAAM1J,KAAKwM,SAAUxM,KAAKsO,aAAatO,KAAKwM,SAAS9C,GAAKA,EAAI1J,KAAKwM,UAC5E,OAAOxM,KAEH,aAAauO,EAAU7E,EAAI8C,GAC/B,IAAI,cAAEgB,EAAa,MAAE9N,GAAUM,MAAM,SAAEQ,EAAQ,WAAE+L,GAAeiB,GAC1DhB,SAAUgC,EAAiB/O,GAA2B8M,EAG9C,IAAIwB,EAFJQ,EAASL,aACT,IAAIM,EAAe9O,EAAOc,IAGhCkG,OAOZ,UAAU9G,EAASkB,EAAM4I,GACrB,IAAK9J,IAAY8J,EAAI,OAAO,KAC5B,IAAK1J,KAAKiM,WAAWvC,GAAK,OAAO1J,KAAKN,MAAM+N,QAAQgB,KAAK,2BAA6B/E,GAAe,KAErG,IAAM8D,cAAe7H,GAAW3F,MAC5B,SAAEQ,EAAQ,WAAE+L,GAAe5G,GACzBsG,WAAYyC,EAAmB/O,GAA4B4M,EAK7DoC,EAAW,IAAIR,EAHHnO,KAAKiM,WAAWvC,GACNwE,aACZ,IAAIQ,EAAiB9O,EAASY,IAIxC4C,EAAU,CACVsG,GAAIA,EACJiF,SAAUA,EACV/O,QAASA,EACTkB,KANAA,EAAOA,GAAQ,IAUnB,OAFA6N,EAASjI,KAAK5F,GAEPsC,KC3HF,SAAgBwL,GAuCzB,OARA5O,KAAKN,MAAQkP,EAAKlP,MAClBM,KAAK2F,OA7BL,WACI,OAAOiJ,EAAKC,UAAU9B,MAAM6B,EAAM5B,YA6BtChN,KAAKiO,QA3BL,SAAiBF,GAEb,OADAa,EAAKE,gBAAgB/B,MAAM6B,EAAM5B,WAC1BhN,MA0BXA,KAAKJ,QAxBL,SAAiBwO,GAEb,OADAQ,EAAKlD,OAAO0C,GACLpO,MAuBXA,KAAK4C,UArBL,SAAmB8G,EAAIqF,GAEnB,OADAH,EAAKI,kBAAkBjC,MAAM6B,EAAM5B,WAC5BhN,MAoBXA,KAAK8M,SAjBL,SAAkBrJ,EAAMO,GAGpB,OADAhE,KADW,CAAE,OAAU,YAAa,SAAY,UAAW,OAAUyD,EAAK1C,aAAe0C,IAC9ExB,KAAKjC,KAAMyD,EAAMO,GACrBhE,MAeXA,KAAK8L,UAZL,SAAmBR,GAEf,OADAsD,EAAKlI,KAAK4E,GACHtL,MAYJA,QC1CPiP,EAAO,EAAQ,GACfC,EAAW,EAAQ,GAEnBC,EAAqB,CAAEC,UAAU,EAAMC,cAAc,EAAMC,YAAY,GAE3E,SAAS,EAAQlM,EAAckI,GAE3B,IAAwBiE,EAAZL,IAA8B,GAAGM,eAEzC,SAAElL,EAAW,GAAE,KAAEmL,EAAO,cADxBrM,EAAU,OAAH,wBAAQA,GAAO,CAAEkI,UAASvK,KAAM,YACCqC,GAExCmB,GADW0K,EAAKS,KAAMH,EAAWjL,GACJ,CAC7B,UAAa,IAAMqL,QAAQhC,QAAQrJ,IAIpCmL,MAEH,OAAO,SAAazL,GAGhB,OAFAA,EAAMM,SAAWA,EACjBN,EAAMO,UAAYA,EACX,OAAP,wBAAYnB,GAAO,CAAEY,WAM7B,SAASnB,EAAKA,GAEV,OAAO,SAAatB,EAAayB,EAAcmF,EAAkB,IAC7D,IAAI,YAAE6F,GAAgBzM,GAClB,IAAEI,EAAG,IAAEE,GAAQsG,EAAYyH,KAAiBjO,IAAOE,GACnDsG,EAAa,OAAH,UAAQA,GAMtB,OAJKyH,IAAazH,EAAWiH,UAAW,GACxCpB,EAAY/J,mBAAqB+J,EAAY/J,oBAAsB,GACnE+J,EAAY/J,mBAAmBgG,KAAKjH,GAE7BmF,GAGf,SAAS0H,EAAMhN,GAEX,OAAO,SAAatB,EAAayB,EAAcmF,GAC3C,IAAI,YAAE6F,GAAgBzM,GAEhBK,MAAOY,IADT2F,EAAa,OAAH,wBAAQA,GAAegH,GACZhH,GAKzB,OAHA6F,EAAY9J,SAAW8J,EAAY9J,UAAY,IAAIC,IACnD6J,EAAY9J,SAASrC,IAAIgB,EAAM,CAAEA,OAAMG,OAAMR,YAEtC2F,GAIf,SAAS3F,EAAQzB,EAAc6K,GAE3B,OAAO,SAAarK,EAAayB,EAAcmF,GAC3C,IAAI,YAAE6F,GAAgBzM,GAEhBK,MAAOY,IADT2F,EAAa,OAAH,wBAAQA,GAAegH,GACZhH,GAKzB,OAHA6F,EAAY5J,UAAY4J,EAAY5J,WAAa,GACjD4J,EAAY5J,UAAU6F,KAAK,CAAElJ,OAAMiC,OAAMR,YAElC2F,GAIf,SAAS2H,EAAQ3N,EAAiBwB,GAC9B,IAAID,EAAQ,GAAG7C,OAAO8C,GAAYC,EAAM,IAAImM,IAAIrM,GAEhD,OAAO,SAAanC,EAAayB,EAAcmF,GAC3C,IAAI,YAAE6F,GAAgBzM,GAElB,MAAEK,IADFuG,EAAa,OAAH,wBAAQA,GAAegH,GACrBhH,GAKhB,OAHA6F,EAAY3J,cAAgB2J,EAAY3J,eAAiB,GACzD2J,EAAY3J,cAAc4F,KAAK,CAAElJ,KAAMoB,EAASa,OAAMpB,QAAO+B,UAAWC,IAEjEuE,GAGf,SAASM,EAAKlF,GAEV,OAAO,SAAahC,EAAayB,EAAcmF,GAC3C,IAAI,YAAE6F,GAAgBzM,EAClB4G,EAAa,OAAH,wBAAQA,GAAegH,GAKrC,OAHAnB,EAAYrK,UAAYqK,EAAYrK,WAAa,GACjDqK,EAAYrK,UAAUsG,KAAK,CAAE1G,WAAUP,SAEhCmF,GC5Ff,2Q,6BCAA,IAAI6H,EAAM,IAAI,MAGV,UAAUC,EAAYC,EAAQC,GAM1B,IAAIC,EAAS,IAAIjM,IACbkM,EAAU,IAAIlM,IACdmM,EAAS,IAAInM,IACboM,EAAS,GACTC,EAAQ,GACRC,EAAO,EAENP,IAAQA,EAASnL,OAAO2L,KAAMT,EAAWU,OAAQ,CAACC,EAAGC,IAAO,OAAD,wBAAMD,GAAMC,GAAM,MAElF,IAAK,IAAIxJ,EAAI,EAAGyJ,EAASb,EAAW1I,OAAQF,EAAIyJ,EAAQzJ,IACxD,IAAK,IAAI0J,EAAI,EAAGC,EAASd,EAAO3I,OAAYwJ,EAAIC,EAAQD,KAC9D,SAAiBnP,GAAQiP,EAAGI,GAAIC,EAAK7J,EAAG8J,EAAMC,EAAKL,EAAGM,GAC5C,IAAIC,EAAMT,EAAGU,EAAQH,EACjBI,EAASpB,EAAOzO,IAAI2P,IAAQ,CAAEA,OAC9BG,EAASpB,EAAQ1O,IAAIyP,IAAQ,GAC7BM,EAAOpB,EAAO3O,IAAIkP,IAAM,IAExB,CAAE,WAAa,IAAQjP,KAASA,EAAQ,IAC5C2O,EAAOM,GAAKN,EAAOM,IAAM,GACzBN,EAAOM,GAAGI,GAAKO,EAAOD,GAASE,EAAOZ,GAAKa,EAAKT,GAAKrP,EAErDwO,EAAOvO,IAAIyP,EAAKE,GAChBnB,EAAQxO,IAAIuP,EAAKK,GACjBnB,EAAOzO,IAAIgP,EAAGa,GAEdjB,EAAOkB,KAAKC,IAAI7E,MAAM,KAAM,CAAE0D,EAAMW,EAAI7J,OAAQ,GAAG3F,IAAQ2F,SAC3DiJ,EAAMK,GAAKa,EAAKhC,KAAK,KAf/B,CAiBSO,EAAW5I,GAAI6I,EAAOa,IAAM,CAAC1J,EAAG0J,GAAId,EAAW5I,GAAIA,EAAG4I,EAAYC,EAAOa,IAE5E,IAAIc,EAAO/K,MAAMiG,MAAM,KAAM,CAAExF,OAAQkJ,IACnCN,EAAY,CACZ,KAAM0B,EAAK/N,IAAK,IAAM,MACtB,EAAM+N,EAAK/N,IAAK,IAAM,KACtB,UAAa,IACdqM,GAAYT,KAAK,IAKpB,MAHU,CADIQ,EAAOR,KAAK,MACJ7O,OAAO2P,GAAOd,KAAK,MAC3BoC,QAAQ,OAAQ,IAAI3B,KAKtC,MAAM4B,GACF,IAAIvB,EAAQuB,EAAI7F,MAAM,WAAagE,GAAWM,EAAON,EAASA,EAAOhE,MAAM,QAejF,OAfiGsE,EAAMwB,MAAM,GACvFrB,OAEhB,SAAmBT,EAAQ+B,EAAOP,EAAMR,EAAKV,GACzC,IAAII,EAAIV,EAAOS,OAGf,SAAkBe,EAAMd,EAAGpP,EAAK6F,EAAG6I,GAC/B,IAAiCtO,EAApB8P,EAAKxF,MAAM,QAAwB7E,GAAI6K,EAAQ,CAAE,CAAC1Q,GAAMI,GACrE,OAAO,OAAP,wBAAYgP,GAAMsB,IALUzL,KAAKzG,KAAM0R,GAAO,IAQlD,OAPAO,EAAMhI,KAAK2G,GAOJqB,GAXuBxL,KAAKzG,KAAMkQ,GAAS,MAkF9D,MAAMiC,EAIF,cACI,OAJJ,KAAAnC,IAAWA,EACX,KAAAvC,QAAeA,QAGJzN,KAGX,QAEA,OAAOoS,EAAQC,KAAWC,GACtB,IAAI1B,EAAI7L,OAAO2L,KAAK2B,GAAO1B,OAAQ,CAACC,EAAG7I,KAAO6I,EAAE7I,GAAKsK,EAAMtK,GAAI6I,GAAIwB,GACnE,OAAIE,EAAK/K,OAAevH,KAAK8N,OAAOsE,KAAWE,GACxC1B,EAGX,GAAGhP,GAEC,OADW,CAAE8F,MAAM,EAAM3E,WAAW,EAAM,IAAI,EAAMwP,GAAG,GAAS3Q,GAIpE,QAAQY,KAAYvC,GAEhB,OADawL,OAAO+G,WAAWhQ,KAAYvC,GAI/C,QAAQuC,KAAYvC,GAEhB,OADaD,KAAKyS,QAAQjQ,EAAS,KAAMvC,GAa7C,SAASuC,EAASkQ,KAAUzS,GACxB,IAAI+B,EAAOhC,KAAMyS,EAAUzQ,EAAKyQ,SAEhC,SAAS5Q,KAAOjB,GACZ,IAAM6R,EAAU,OAAOhF,QAAQC,IAAI,SACnClL,EAAQP,KAAKjC,QAASY,GACtB6R,EAAUzQ,EAAKyQ,QAAQ5Q,EAAK6Q,KAAUzS,KALGyS,KAAUzS,GAavD,OANA,WAGI,OAFA0S,aAAaF,KACbA,EAAU,OAOlB,SAAS5I,EAAI6I,GACT,IAAIE,EAAQ,KAQZ,OANA,YAAsB3S,GAClB,IAAIH,EAAUE,KACd2S,aAAaC,GACbA,EAAQJ,WAAY,IAAM3I,EAAG5H,KAAKnC,KAAYG,GAAQyS,IAM9D,SAAS7I,EAAIgJ,EAAYC,GACrB,IAA0CC,EAAtCF,EAAaA,GAAc,IAW/B,OATA,YAAsB5S,GAClB,IAAIH,EAAUgT,GAAS9S,KAAMgT,GAAO,IAAKC,KAASC,EAAOF,EACrDG,EAAS,KAAQtJ,EAAG5H,KAAKnC,KAAYG,GAAQiT,EAAOF,GAExD,IAAKE,GAAQF,GAH0DE,EAAOL,EAGnD,OAAOM,IAClCR,aAAaI,GACbA,EAAaP,WAAWW,EAAQN,IAMxC,OAKI,MAAO,uCAAuCf,QAAQ,SAJtD,SAAiBnJ,GACjB,IAAIyK,EAAoB,GAAhBzB,KAAK0B,SAAgB,EAC7B,OADyC,KAAL1K,EAAWyK,EAAS,EAAJA,EAAU,GACrDE,SAAS,OAKtB,WAAWC,GACP,OAAOA,EAAEzB,QAAQ,WAAW,SAAUnJ,GAClC,MAAO,CACH,IAAK,QACL,IAAK,SACL,IAAK,OACL,IAAK,QACPA,MAQV,YAAY6K,GACR,OAAQ5C,GACG4C,EAAI1B,QAAQ,cAAe,CAAClJ,EAAG6K,KAClC,IAAIC,EAAM,GAAG9C,EAAE6C,GACf,OAAOzT,KAAK2T,WAAWD,KASnC,qBAAqBF,GACjB,OAAO,SAAqB5C,GACxB,OAAO4C,EAAI1B,QAAQ,eAAe,SAAUlJ,EAAG6K,GAE3C,MADU,GAAG7C,EAAE6C,OAS3B,YAAYD,GACJA,EAAMA,GAAO,GAAjB,IACII,EAAK,wBACLC,EAAU,IAAIC,OAAON,EAAI1B,QAAQ8B,EAAI,cAEzC,OAAO,SAAmBG,GACtB,IAAKA,EAAOtK,MAAMoK,GAAU,OAAO,EACnC,IACI7S,GADA+S,EAASA,GAAU,IACHtK,MAAMoK,GACtBnD,EAAO8C,EAAI/J,MAAMmK,GACjB5M,EAAShG,EAAOgR,MAAM,GACtBlO,EAAM,GAEV,GAAI4M,GAAQ1J,EACR,IAAK,IAAIK,EAAI,EAAGC,EAAMoJ,EAAKnJ,OAAQF,EAAIC,EAAKD,IAAK,CAC7C,IAAI7F,EAAMkP,EAAKrJ,GAAGyK,QAAQ,UAAW,IACjC4B,EAAM1M,EAAOK,GACb7F,IAAQkS,IAAK5P,EAAItC,GAAOkS,GAIpC,OAAO5P,GAIf,SAASkQ,GACL,IAAIpL,EAAIuD,SAAS8H,cAAc,KAG/B,OAFArL,EAAEsL,KAAOF,EAEF,CACHG,KAAMvL,EAAEuL,KACRC,KAAMxL,EAAEwL,KACRC,SAAUzL,EAAEyL,SACZH,KAAMtL,EAAEsL,KACRI,OAAQ1L,EAAE0L,OACVC,SAAU3L,EAAE2L,SACZC,KAAM5L,EAAE4L,KACRC,SAAU7L,EAAE6L,SACZC,OAAQ9L,EAAE8L,QAIlB,UAAU3M,EAAGa,EAAG6K,GAIZ,OAAI7K,EAAEb,GAAK0L,EAAE1L,GAAY,EACrBa,EAAEb,GAAK0L,EAAE1L,IAAY,EAClB,EAIX,mBAAmBnD,EAASgE,EAAG6K,GAI3B,IAAIpM,EAAI,EACR,IADWzC,EAAUkC,MAAM7B,UAAU+M,MAAM/P,KAAK2C,GAAW,GAAK,GACnD,IAANyC,GAAWzC,EAAQ2C,QAAQF,EAAIzC,EAAQ+P,QAAQ1S,KAAKjC,KAAM4I,EAAG6K,GACpE,OAAOpM,EAGX,gBAAgBqJ,EAAM9H,EAAG6K,GAerB,IAAIpM,EAAI,EACR,IADWqJ,EAAO5J,MAAM7B,UAAU+M,MAAM/P,KAAKyO,GAAQ,GAAK,GAC7C,IAANrJ,GAAWqJ,EAAKnJ,QAAQF,EAAIrH,KAAK4U,UAAU3S,KAAKjC,KAAM0Q,EAAKiE,QAAS/L,EAAG6K,GAC9E,OAAOpM,EAGX,YAAYwN,EAAMC,EAAO,QAgBrB,IAfA,IAAIjP,EAAI7F,KAAK+U,QAAQtO,KAAKzG,MACtBgV,EAASnP,EAAEgP,GAAQ,GAAII,EAAMpP,EAAEmP,EAAS,MAAOE,EAAMrP,EAAEoP,EAAM,MAAOE,EAAMtP,EAAEqP,EAAM,MAAOE,EAAMvP,EAAEsP,EAAM,MAAOE,EAAMxP,EAAEuP,EAAM,MAI5HpO,EAAS,CAAEsO,MAHH,GAAGN,UAGOO,GAHc,GAAGN,OAGbO,GAH4B,GAAGN,OAG3BO,GAH0C,GAAGN,OAGzCO,GAHwD,GAAGN,OAGvDO,GAHsE,GAAGN,OAGrEO,UAAM7S,GAC5C/B,EAAS,CAAE8T,KAAM,GAAIlT,MAAOiU,KAC5BhK,EAAW,CACf,CAAEiJ,KAAM,QAASlT,MAAOoT,GACxB,CAAEF,KAAM,KAAMlT,MAAOqT,GACrB,CAAEH,KAAM,KAAMlT,MAAOsT,GACrB,CAAEJ,KAAM,KAAMlT,MAAOuT,GACrB,CAAEL,KAAM,KAAMlT,MAAOwT,GACrB,CAAEN,KAAM,KAAMlT,MAAOyT,IAEZrU,EAAOY,MAAQ,MAAS,GAAKiK,EAAStE,QAASvG,EAAS6K,EAAS8I,QAK1E,OAJA3N,EAAO4O,KAAO,GAAG5U,EAAOY,SAASZ,EAAO8T,OAIjC9N,EAAO8N,GAGlB,QAAQgB,GAAK,OAAOC,OAAQpE,KAAKqE,QAAQF,EAAI,OAAS,OAEtD,OAAOA,GAAK,SAAUA,GCjX1B,MAAMG,EAKF,cAJQ,KAAAC,SAAqB,OACrB,KAAAC,QAAoB,OACrB,KAAAhJ,QAAsB,IAAIwC,QAAY3P,KAAK4J,IAAInD,KAAKzG,OAInD,IAAI2N,EAASyI,GACjBpW,KAAKkW,SAAWvI,EAChB3N,KAAKmW,QAAUC,EAGnB,QAAQtV,GAEJ,OADAd,KAAKkW,SAASpV,GACPd,KAAKmN,QAEhB,OAAOrM,GAEH,OADAd,KAAKmW,QAAQrV,GACNd,KAAKmN,SCxBpB,qE,iBCDA,YA4BA,SAASkJ,EAAeC,EAAOC,GAG7B,IADA,IAAIC,EAAK,EACAnP,EAAIiP,EAAM/O,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC1C,IAAI6L,EAAOoD,EAAMjP,GACJ,MAAT6L,EACFoD,EAAMlM,OAAO/C,EAAG,GACE,OAAT6L,GACToD,EAAMlM,OAAO/C,EAAG,GAChBmP,KACSA,IACTF,EAAMlM,OAAO/C,EAAG,GAChBmP,KAKJ,GAAID,EACF,KAAOC,IAAMA,EACXF,EAAMG,QAAQ,MAIlB,OAAOH,EA0OT,SAASzS,EAAQ6S,EAAIC,GACjB,GAAID,EAAG7S,OAAQ,OAAO6S,EAAG7S,OAAO8S,GAEhC,IADA,IAAIC,EAAM,GACDvP,EAAI,EAAGA,EAAIqP,EAAGnP,OAAQF,IACvBsP,EAAED,EAAGrP,GAAIA,EAAGqP,IAAKE,EAAI3M,KAAKyM,EAAGrP,IAErC,OAAOuP,EA3OXC,EAAQlJ,QAAU,WAIhB,IAHA,IAAImJ,EAAe,GACfC,GAAmB,EAEd1P,EAAI2F,UAAUzF,OAAS,EAAGF,IAAM,IAAM0P,EAAkB1P,IAAK,CACpE,IAAI4H,EAAQ5H,GAAK,EAAK2F,UAAU3F,GAAK2P,EAAQC,MAG7C,GAAoB,iBAAThI,EACT,MAAM,IAAIiI,UAAU,6CACVjI,IAIZ6H,EAAe7H,EAAO,IAAM6H,EAC5BC,EAAsC,MAAnB9H,EAAKkI,OAAO,IAWjC,OAASJ,EAAmB,IAAM,KAJlCD,EAAeT,EAAexS,EAAOiT,EAAa5K,MAAM,MAAM,SAASkL,GACrE,QAASA,MACNL,GAAkBrH,KAAK,OAE6B,KAK3DmH,EAAQQ,UAAY,SAASpI,GAC3B,IAAIqI,EAAaT,EAAQS,WAAWrI,GAChCsI,EAAqC,MAArBC,EAAOvI,GAAO,GAclC,OAXAA,EAAOoH,EAAexS,EAAOoL,EAAK/C,MAAM,MAAM,SAASkL,GACrD,QAASA,MACNE,GAAY5H,KAAK,OAER4H,IACZrI,EAAO,KAELA,GAAQsI,IACVtI,GAAQ,MAGFqI,EAAa,IAAM,IAAMrI,GAInC4H,EAAQS,WAAa,SAASrI,GAC5B,MAA0B,MAAnBA,EAAKkI,OAAO,IAIrBN,EAAQnH,KAAO,WACb,IAAI+H,EAAQ3Q,MAAM7B,UAAU+M,MAAM/P,KAAK+K,UAAW,GAClD,OAAO6J,EAAQQ,UAAUxT,EAAO4T,GAAO,SAASL,EAAGM,GACjD,GAAiB,iBAANN,EACT,MAAM,IAAIF,UAAU,0CAEtB,OAAOE,KACN1H,KAAK,OAMVmH,EAAQc,SAAW,SAAS5Q,EAAM6Q,GAIhC,SAASC,EAAKC,GAEZ,IADA,IAAIC,EAAQ,EACLA,EAAQD,EAAIvQ,QACE,KAAfuQ,EAAIC,GADiBA,KAK3B,IADA,IAAIC,EAAMF,EAAIvQ,OAAS,EAChByQ,GAAO,GACK,KAAbF,EAAIE,GADOA,KAIjB,OAAID,EAAQC,EAAY,GACjBF,EAAI9F,MAAM+F,EAAOC,EAAMD,EAAQ,GAfxChR,EAAO8P,EAAQlJ,QAAQ5G,GAAMyQ,OAAO,GACpCI,EAAKf,EAAQlJ,QAAQiK,GAAIJ,OAAO,GAsBhC,IALA,IAAIS,EAAYJ,EAAK9Q,EAAKmF,MAAM,MAC5BgM,EAAUL,EAAKD,EAAG1L,MAAM,MAExB3E,EAASoK,KAAKwG,IAAIF,EAAU1Q,OAAQ2Q,EAAQ3Q,QAC5C6Q,EAAkB7Q,EACbF,EAAI,EAAGA,EAAIE,EAAQF,IAC1B,GAAI4Q,EAAU5Q,KAAO6Q,EAAQ7Q,GAAI,CAC/B+Q,EAAkB/Q,EAClB,MAIJ,IAAIgR,EAAc,GAClB,IAAShR,EAAI+Q,EAAiB/Q,EAAI4Q,EAAU1Q,OAAQF,IAClDgR,EAAYpO,KAAK,MAKnB,OAFAoO,EAAcA,EAAYxX,OAAOqX,EAAQlG,MAAMoG,KAE5B1I,KAAK,MAG1BmH,EAAQyB,IAAM,IACdzB,EAAQ1G,UAAY,IAEpB0G,EAAQ0B,QAAU,SAAUtJ,GAE1B,GADoB,iBAATA,IAAmBA,GAAc,IACxB,IAAhBA,EAAK1H,OAAc,MAAO,IAK9B,IAJA,IAAIiR,EAAOvJ,EAAKwJ,WAAW,GACvBC,EAAmB,KAATF,EACVR,GAAO,EACPW,GAAe,EACVtR,EAAI4H,EAAK1H,OAAS,EAAGF,GAAK,IAAKA,EAEtC,GAAa,MADbmR,EAAOvJ,EAAKwJ,WAAWpR,KAEnB,IAAKsR,EAAc,CACjBX,EAAM3Q,EACN,YAIJsR,GAAe,EAInB,OAAa,IAATX,EAAmBU,EAAU,IAAM,IACnCA,GAAmB,IAARV,EAGN,IAEF/I,EAAK+C,MAAM,EAAGgG,IAiCvBnB,EAAQ+B,SAAW,SAAU3J,EAAM4J,GACjC,IAAIlC,EA/BN,SAAkB1H,GACI,iBAATA,IAAmBA,GAAc,IAE5C,IAGI5H,EAHA0Q,EAAQ,EACRC,GAAO,EACPW,GAAe,EAGnB,IAAKtR,EAAI4H,EAAK1H,OAAS,EAAGF,GAAK,IAAKA,EAClC,GAA2B,KAAvB4H,EAAKwJ,WAAWpR,IAGhB,IAAKsR,EAAc,CACjBZ,EAAQ1Q,EAAI,EACZ,YAEgB,IAAT2Q,IAGXW,GAAe,EACfX,EAAM3Q,EAAI,GAId,OAAa,IAAT2Q,EAAmB,GAChB/I,EAAK+C,MAAM+F,EAAOC,GAMjBY,CAAS3J,GAIjB,OAHI4J,GAAOlC,EAAEa,QAAQ,EAAIqB,EAAItR,UAAYsR,IACvClC,EAAIA,EAAEa,OAAO,EAAGb,EAAEpP,OAASsR,EAAItR,SAE1BoP,GAGTE,EAAQiC,QAAU,SAAU7J,GACN,iBAATA,IAAmBA,GAAc,IAQ5C,IAPA,IAAI8J,GAAY,EACZC,EAAY,EACZhB,GAAO,EACPW,GAAe,EAGfM,EAAc,EACT5R,EAAI4H,EAAK1H,OAAS,EAAGF,GAAK,IAAKA,EAAG,CACzC,IAAImR,EAAOvJ,EAAKwJ,WAAWpR,GAC3B,GAAa,KAATmR,GASS,IAATR,IAGFW,GAAe,EACfX,EAAM3Q,EAAI,GAEC,KAATmR,GAEkB,IAAdO,EACFA,EAAW1R,EACY,IAAhB4R,IACPA,EAAc,IACK,IAAdF,IAGTE,GAAe,QArBb,IAAKN,EAAc,CACjBK,EAAY3R,EAAI,EAChB,OAuBR,OAAkB,IAAd0R,IAA4B,IAATf,GAEH,IAAhBiB,GAEgB,IAAhBA,GAAqBF,IAAaf,EAAM,GAAKe,IAAaC,EAAY,EACjE,GAEF/J,EAAK+C,MAAM+G,EAAUf,IAa9B,IAAIR,EAA6B,MAApB,KAAKA,QAAQ,GACpB,SAAUhE,EAAKuE,EAAOzQ,GAAO,OAAOkM,EAAIgE,OAAOO,EAAOzQ,IACtD,SAAUkM,EAAKuE,EAAOzQ,GAEpB,OADIyQ,EAAQ,IAAGA,EAAQvE,EAAIjM,OAASwQ,GAC7BvE,EAAIgE,OAAOO,EAAOzQ,M,+BC1SjC,IAOI4R,EACAC,EARAnC,EAAUoC,EAAOvC,QAAU,GAU/B,SAASwC,IACL,MAAM,IAAIzL,MAAM,mCAEpB,SAAS0L,IACL,MAAM,IAAI1L,MAAM,qCAsBpB,SAAS2L,EAAWC,GAChB,GAAIN,IAAqB1G,WAErB,OAAOA,WAAWgH,EAAK,GAG3B,IAAKN,IAAqBG,IAAqBH,IAAqB1G,WAEhE,OADA0G,EAAmB1G,WACZA,WAAWgH,EAAK,GAE3B,IAEI,OAAON,EAAiBM,EAAK,GAC/B,MAAMpX,GACJ,IAEI,OAAO8W,EAAiBjX,KAAK,KAAMuX,EAAK,GAC1C,MAAMpX,GAEJ,OAAO8W,EAAiBjX,KAAKjC,KAAMwZ,EAAK,MAvCnD,WACG,IAEQN,EADsB,mBAAf1G,WACYA,WAEA6G,EAEzB,MAAOjX,GACL8W,EAAmBG,EAEvB,IAEQF,EADwB,mBAAjBxG,aACcA,aAEA2G,EAE3B,MAAOlX,GACL+W,EAAqBG,GAjB7B,GAwEA,IAEIG,EAFAC,EAAQ,GACRC,GAAW,EAEXC,GAAc,EAElB,SAASC,IACAF,GAAaF,IAGlBE,GAAW,EACPF,EAAalS,OACbmS,EAAQD,EAAa5Y,OAAO6Y,GAE5BE,GAAc,EAEdF,EAAMnS,QACNuS,KAIR,SAASA,IACL,IAAIH,EAAJ,CAGA,IAAIlH,EAAU8G,EAAWM,GACzBF,GAAW,EAGX,IADA,IAAIrS,EAAMoS,EAAMnS,OACVD,GAAK,CAGP,IAFAmS,EAAeC,EACfA,EAAQ,KACCE,EAAatS,GACdmS,GACAA,EAAaG,GAAYG,MAGjCH,GAAc,EACdtS,EAAMoS,EAAMnS,OAEhBkS,EAAe,KACfE,GAAW,EAnEf,SAAyBK,GACrB,GAAIb,IAAuBxG,aAEvB,OAAOA,aAAaqH,GAGxB,IAAKb,IAAuBG,IAAwBH,IAAuBxG,aAEvE,OADAwG,EAAqBxG,aACdA,aAAaqH,GAExB,IAEWb,EAAmBa,GAC5B,MAAO5X,GACL,IAEI,OAAO+W,EAAmBlX,KAAK,KAAM+X,GACvC,MAAO5X,GAGL,OAAO+W,EAAmBlX,KAAKjC,KAAMga,KAgD7CC,CAAgBxH,IAiBpB,SAASyH,EAAKV,EAAKvH,GACfjS,KAAKwZ,IAAMA,EACXxZ,KAAKiS,MAAQA,EAYjB,SAASkI,KA5BTnD,EAAQoD,SAAW,SAAUZ,GACzB,IAAI9Y,EAAO,IAAIoG,MAAMkG,UAAUzF,OAAS,GACxC,GAAIyF,UAAUzF,OAAS,EACnB,IAAK,IAAIF,EAAI,EAAGA,EAAI2F,UAAUzF,OAAQF,IAClC3G,EAAK2G,EAAI,GAAK2F,UAAU3F,GAGhCqS,EAAMzP,KAAK,IAAIiQ,EAAKV,EAAK9Y,IACJ,IAAjBgZ,EAAMnS,QAAiBoS,GACvBJ,EAAWO,IASnBI,EAAKjV,UAAU8U,IAAM,WACjB/Z,KAAKwZ,IAAIzM,MAAM,KAAM/M,KAAKiS,QAE9B+E,EAAQqD,MAAQ,UAChBrD,EAAQsD,SAAU,EAClBtD,EAAQuD,IAAM,GACdvD,EAAQwD,KAAO,GACfxD,EAAQyD,QAAU,GAClBzD,EAAQ0D,SAAW,GAInB1D,EAAQ2D,GAAKR,EACbnD,EAAQ4D,YAAcT,EACtBnD,EAAQ6D,KAAOV,EACfnD,EAAQ8D,IAAMX,EACdnD,EAAQ+D,eAAiBZ,EACzBnD,EAAQgE,mBAAqBb,EAC7BnD,EAAQiE,KAAOd,EACfnD,EAAQkE,gBAAkBf,EAC1BnD,EAAQmE,oBAAsBhB,EAE9BnD,EAAQ5S,UAAY,SAAUpB,GAAQ,MAAO,IAE7CgU,EAAQoE,QAAU,SAAUpY,GACxB,MAAM,IAAI4K,MAAM,qCAGpBoJ,EAAQC,IAAM,WAAc,MAAO,KACnCD,EAAQqE,MAAQ,SAAUC,GACtB,MAAM,IAAI1N,MAAM,mCAEpBoJ,EAAQuE,MAAQ,WAAa,OAAO,I,cCtLpCnC,EAAOvC,QAAU,WACf,IAAI2E,EAAO5N,MAAM6N,kBACjB7N,MAAM6N,kBAAoB,SAASC,EAAGC,GAAQ,OAAOA,GACrD,IAAIC,EAAM,IAAIhO,MACdA,MAAMiO,kBAAkBD,EAAK5O,UAAU8O,QACvC,IAAIH,EAAQC,EAAID,MAEhB,OADA/N,MAAM6N,kBAAoBD,EACnBG,I,6BCNT,IACMI,EADFC,EAEK,WAUL,YAToB,IAATD,IAMTA,EAAOE,QAAQxQ,QAAUU,UAAYA,SAASrB,MAAQW,OAAOyQ,OAGxDH,GAIPI,EAAY,WACd,IAAIJ,EAAO,GACX,OAAO,SAAkBxa,GACvB,QAA4B,IAAjBwa,EAAKxa,GAAyB,CACvC,IAAI6a,EAAcjQ,SAASkQ,cAAc9a,GAEzC,GAAIkK,OAAO6Q,mBAAqBF,aAAuB3Q,OAAO6Q,kBAC5D,IAGEF,EAAcA,EAAYG,gBAAgBC,KAC1C,MAAOpa,GAEPga,EAAc,KAIlBL,EAAKxa,GAAU6a,EAGjB,OAAOL,EAAKxa,IApBA,GAwBZkb,EAAc,GAElB,SAASC,EAAaC,EAAUC,EAAMtR,GACpC,IAAK,IAAIjE,EAAI,EAAGA,EAAIuV,EAAKrV,OAAQF,IAAK,CACpC,IAAIwV,EAAO,CACTC,IAAKF,EAAKvV,GAAG,GACb0V,MAAOH,EAAKvV,GAAG,GACf2V,UAAWJ,EAAKvV,GAAG,IAGjBoV,EAAYE,GAAUtV,GACxBoV,EAAYE,GAAUtV,GAAGwV,GAEzBJ,EAAYE,GAAU1S,KAAKgT,EAASJ,EAAMvR,KAKhD,SAAS4R,EAAmB5R,GAC1B,IAAI6R,EAAQhR,SAAS8H,cAAc,SAC/B/N,EAAaoF,EAAQpF,YAAc,GAEvC,QAAgC,IAArBA,EAAWkX,MAAuB,CAC3C,IAAIA,EAAmD,KAEnDA,IACFlX,EAAWkX,MAAQA,GAQvB,GAJArY,OAAO2L,KAAKxK,GAAYX,SAAQ,SAAU/D,GACxC2b,EAAMxV,aAAanG,EAAK0E,EAAW1E,OAGP,mBAAnB8J,EAAQ+R,OACjB/R,EAAQ+R,OAAOF,OACV,CACL,IAAI5b,EAAS4a,EAAU7Q,EAAQ+R,QAAU,QAEzC,IAAK9b,EACH,MAAM,IAAIqM,MAAM,2GAGlBrM,EAAO+b,YAAYH,GAGrB,OAAOA,EAcT,IACMI,EADFC,GACED,EAAY,GACT,SAAiB7F,EAAO+F,GAE7B,OADAF,EAAU7F,GAAS+F,EACZF,EAAU1Z,OAAOoY,SAASvM,KAAK,QAI1C,SAASgO,EAAoBP,EAAOzF,EAAOiG,EAAQC,GACjD,IAAId,EAAMa,EAAS,GAAKC,EAAId,IAI5B,GAAIK,EAAMU,WACRV,EAAMU,WAAWC,QAAUN,EAAY9F,EAAOoF,OACzC,CACL,IAAIiB,EAAU5R,SAAS6R,eAAelB,GAClCmB,EAAad,EAAMc,WAEnBA,EAAWvG,IACbyF,EAAMe,YAAYD,EAAWvG,IAG3BuG,EAAW1W,OACb4V,EAAMgB,aAAaJ,EAASE,EAAWvG,IAEvCyF,EAAMG,YAAYS,IAKxB,SAASK,EAAWjB,EAAO7R,EAASsS,GAClC,IAAId,EAAMc,EAAId,IACVC,EAAQa,EAAIb,MACZC,EAAYY,EAAIZ,UAepB,GAbID,EACFI,EAAMxV,aAAa,QAASoV,GAE5BI,EAAMkB,gBAAgB,SAGpBrB,GAAasB,OACfxB,GAAO,uDAAuDjc,OAAOyd,KAAKC,SAASC,mBAAmBC,KAAKC,UAAU1B,MAAe,QAMlIG,EAAMU,WACRV,EAAMU,WAAWC,QAAUhB,MACtB,CACL,KAAOK,EAAMwB,YACXxB,EAAMe,YAAYf,EAAMwB,YAG1BxB,EAAMG,YAAYnR,SAAS6R,eAAelB,KAI9C,IAAI8B,EAAY,KACZC,EAAmB,EAEvB,SAAS5B,EAASW,EAAKtS,GACrB,IAAI6R,EACA2B,EACAnB,EAEJ,GAAIrS,EAAQsT,UAAW,CACrB,IAAIG,EAAaF,IACjB1B,EAAQyB,IAAcA,EAAY1B,EAAmB5R,IACrDwT,EAASpB,EAAoBjX,KAAK,KAAM0W,EAAO4B,GAAY,GAC3DpB,EAASD,EAAoBjX,KAAK,KAAM0W,EAAO4B,GAAY,QAE3D5B,EAAQD,EAAmB5R,GAC3BwT,EAASV,EAAW3X,KAAK,KAAM0W,EAAO7R,GAEtCqS,EAAS,YAxFb,SAA4BR,GAE1B,GAAyB,OAArBA,EAAM7Q,WACR,OAAO,EAGT6Q,EAAM7Q,WAAW4R,YAAYf,GAmFzB6B,CAAmB7B,IAKvB,OADA2B,EAAOlB,GACA,SAAqBqB,GAC1B,GAAIA,EAAQ,CACV,GAAIA,EAAOnC,MAAQc,EAAId,KAAOmC,EAAOlC,QAAUa,EAAIb,OAASkC,EAAOjC,YAAcY,EAAIZ,UACnF,OAGF8B,EAAOlB,EAAMqB,QAEbtB,KAKNvE,EAAOvC,QAAU,SAAU8F,EAAUC,EAAMtR,GAgBzC,OAfAA,EAAUA,GAAW,IAGRsT,WAA0C,kBAAtBtT,EAAQsT,YACvCtT,EAAQsT,UAAY5C,KAGtBW,EAAWrR,EAAQ4T,KAAOvC,EAAWrR,EAAQ4T,KAAOvC,EACpDC,EAAOA,GAAQ,GAEVH,EAAYE,KACfF,EAAYE,GAAY,IAG1BD,EAAaC,EAAUC,EAAMtR,GACtB,SAAgB6T,GAGrB,GAFAA,EAAUA,GAAW,GAE2B,mBAA5Cpa,OAAOE,UAAUqO,SAASrR,KAAKkd,GAAnC,CAIK1C,EAAYE,KACfF,EAAYE,GAAY,IAG1BD,EAAaC,EAAUwC,EAAS7T,GAEhC,IAAK,IAAIyF,EAAIoO,EAAQ5X,OAAQwJ,EAAI0L,EAAYE,GAAUpV,OAAQwJ,IAC7D0L,EAAYE,GAAU5L,KAGxB0L,EAAYE,GAAUpV,OAAS4X,EAAQ5X,OAEF,IAAjCkV,EAAYE,GAAUpV,eACjBkV,EAAYE,O,6BClOzBvD,EAAOvC,QAAU,SAAUuI,GACzB,IAAIxC,EAAO,GAqCX,OAnCAA,EAAKtJ,SAAW,WACd,OAAOtT,KAAK8D,KAAI,SAAUL,GACxB,IAAI0C,EAoCV,SAAgC1C,EAAM2b,GACpC,IAAIjZ,EAAU1C,EAAK,IAAM,GAErB4b,EAAa5b,EAAK,GAEtB,IAAK4b,EACH,OAAOlZ,EAGT,GAAIiZ,GAAgC,mBAATd,KAAqB,CAC9C,IAAIgB,GAWWtC,EAXeqC,EAa5BE,EAASjB,KAAKC,SAASC,mBAAmBC,KAAKC,UAAU1B,MACzDlc,EAAO,+DAA+DD,OAAO0e,GAC1E,OAAO1e,OAAOC,EAAM,QAdrB0e,EAAaH,EAAWI,QAAQ3b,KAAI,SAAUxC,GAChD,MAAO,iBAAiBT,OAAOwe,EAAWK,YAAc,IAAI7e,OAAOS,EAAQ,UAE7E,MAAO,CAAC6E,GAAStF,OAAO2e,GAAY3e,OAAO,CAACye,IAAgB5P,KAAK,MAOrE,IAAmBsN,EAEbuC,EACAze,EAPJ,MAAO,CAACqF,GAASuJ,KAAK,MArDJiQ,CAAuBlc,EAAM2b,GAE3C,OAAI3b,EAAK,GACA,UAAU5C,OAAO4C,EAAK,GAAI,MAAM5C,OAAOsF,EAAS,KAGlDA,KACNuJ,KAAK,KAKVkN,EAAKvV,EAAI,SAAUuY,EAASC,GACH,iBAAZD,IAETA,EAAU,CAAC,CAAC,KAAMA,EAAS,MAG7B,IAAK,IAAIvY,EAAI,EAAGA,EAAIuY,EAAQrY,OAAQF,IAAK,CACvC,IAAI5D,EAAO,GAAG5C,OAAO+e,EAAQvY,IAEzBwY,IACGpc,EAAK,GAGRA,EAAK,GAAK,GAAG5C,OAAOgf,EAAY,SAAShf,OAAO4C,EAAK,IAFrDA,EAAK,GAAKoc,GAMdjD,EAAK3S,KAAKxG,KAIPmZ,I,uaCxCT,MAAMkD,UAFN,MAAkC,YAAYxU,EAAe,OAKzD,YAAYA,EAAe,IACvBnL,MAAMmL,GAHV,KAAA5B,GAAa,GAIT,IAAI,GAAEA,GAAO4B,EAEb,OADAtL,KAAK0J,GAAKA,GAAM1J,KAAK0J,GACd1J,MAMf,IAAa+f,EAAb,MAKI,YAAoBla,GAAA,KAAAA,IAJZ,KAAAma,QAAkB,EAClB,KAAA1U,QAAe,GAChB,KAAA2U,QAA2B,IAAIH,EAAgB,IAIpC,aAAapM,EAAKwM,GAChCzS,QAAQC,IAAI,IAAKgG,EAAKwM,GAGR,kBAAkB9d,GAChC,IAAI,EAAEyD,EAAC,QAAEoa,GAAYjgB,KACrB6F,EAAE1E,QAAQ0E,EAAEzE,SAAS,sBAAuB6e,GAGjB,cAAc7d,GACzC,IAAI,KAAErB,EAAI,OAAEuB,GAAWF,EAAG6d,EAAU,IAAIH,EAAgBxd,GACxDmL,QAAQC,IAAI,sBAAuB3M,EAAMuB,GACzCtC,KAAKigB,QAAUA,EACfjgB,KAAKggB,QAAS,EAGa,gBAAgB5d,GAC3C,IAAI,KAAErB,EAAI,OAAEuB,GAAWF,EACvBqL,QAAQC,IAAI,sBAAuB3M,EAAMuB,GACzCtC,KAAKggB,QAAS,IAzBV,GAAP,kB,6BACO,GAAP,kB,8BAKiB,GAAjB,gBAAM,Y,iCAIW,GAAjB,kBAAQ,U,sCAKsB,GAA9B,kBAAQ,uB,kCAOsB,GAA9B,kBAAQ,uB,oCAvBAD,EAAiB,GAD7B,kBAAQ,CAAE/c,KAAM,gBACJ+c,I,oCCbY5b,ICAzB,MAAMgc,EAKF,YAAYrf,EAAY,IAGpB,OAPI,KAAAA,KAAY,GAKhBd,KAAKogB,QACLpgB,KAAKc,KAAO,IAAKA,GACVd,KANX,aAAe,OAAOA,KAAK6U,OAC3B,YAAc,OAAO,EAQb,UAAUzC,GAEd,OADWqM,KAAKC,UAAUtM,GAGtB,YAAYiO,GAEhB,OADa5B,KAAK6B,MAAMD,GAGpB,KAAKjO,GACT,IAAIiO,EAAOrgB,KAAKugB,UAAUnO,GAC1B,OADmCA,EAASpS,KAAKwgB,YAAYH,GAIjE,QAAQze,GAEJ,OADA5B,KAAKc,KAAKmJ,KAAKrI,GACR5B,KAEX,UAEI,OADYA,KAAKc,KAAK6T,QAG1B,QAEI,OADY3U,KAAKc,KAAKd,KAAK0X,OAG/B,QAEI,OADA1X,KAAKc,KAAKyG,OAAS,EACZvH,KAEX,OAEI,OADYA,KAAKc,KAAKyG,OAG1B,UAEI,OADUvH,KAAK6U,OAInB,SACI,OAAO7U,KAAKygB,UAEhB,WAEI,OADWzgB,KAAKugB,UAAWvgB,KAAKygB,WAGpC,UACI,OAAOzgB,KAAKc,KAAKkR,MAAM,I,oYCpC/B,IAAM,EAAN,MAWI,YAAoBnM,GAAA,KAAAA,IAVZ,KAAAyF,QAAe,GAMb,KAAAoV,SAAgC,IAAIP,EAHtC,aAAwB,OAAQngB,KAAK0gB,SAASC,UAItD,cAA8B,OAAO3gB,KAAK0gB,SAASE,QAUnD,aAAaxe,EAAG4d,EAAQa,GACpB,IAAI,EAAEhb,EAAC,SAAE6a,GAAa1gB,KACtByN,QAAQC,IAAI,cAAetL,EAAErB,KAAMif,EAAQa,EAAO,QAClDH,EAASI,UACTjb,EAAE1E,QAAQ0E,EAAEzE,SAAS,sBAAuB,CAAE2f,MAAM,IAG5B,cAAc3e,GACtC,IAAI,EAAEyD,EAAC,SAAE6a,GAAa1gB,MAClB,KAAEe,EAAI,OAAEuB,GAAmDF,EAC/Dse,EAASM,QAAQ1e,GACjBuD,EAAE1E,QAAQ0E,EAAEzE,SAAS,sBAAuB,CAAE2f,MAAM,IAG5B,gBAAgB3e,GACxC,IAAI,EAAEyD,EAAC,SAAE6a,GAAa1gB,MAClB,KAAEe,EAAI,OAAEuB,GAAWF,EACvBqL,QAAQC,IAAI,mBAAoB3M,EAAMuB,GACtCoe,EAASI,YAnCL,GAAP,kB,8BAGO,GAAP,kB,2BAqB2B,GAA3B,kBAAQ,oB,kCAOmB,GAA3B,kBAAQ,oB,oCAhCP,EAAc,GANnB,kBAAQ,CACL9d,KAAM,UACNsB,SCvBW,gND2BT,I,+DE3BN,IAAI2c,EAAM,EAAQ,GACF9a,EAAU,EAAQ,IAIC,iBAFvBA,EAAUA,EAAQ+a,WAAa/a,EAAQgb,QAAUhb,KAG/CA,EAAU,CAAC,CAACiT,EAAO/R,EAAIlB,EAAS,MAG9C,IAAImF,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhB8V,GAFSH,EAAI7H,EAAO/R,EAAIlB,EAASmF,GAEtBnF,EAAQkb,OAASlb,EAAQkb,OAAS,IAIjDjI,EAAOvC,QAAUuK,G,iBClBjBvK,EADkC,EAAQ,EAChCyK,EAA4B,IAE9BrX,KAAK,CAACmP,EAAO/R,EAAI,0BAA2B,KAEpD+R,EAAOvC,QAAUA,G;;;;;;;;;;;;;;;ACUjB,IAAI0K,EAAgB,SAASC,EAAG/N,GAI5B,OAHA8N,EAAgBxc,OAAO0c,gBAClB,CAAEC,UAAW,cAAgB5a,OAAS,SAAU0a,EAAG/N,GAAK+N,EAAEE,UAAYjO,IACvE,SAAU+N,EAAG/N,GAAK,IAAK,IAAI2D,KAAK3D,EAAOA,EAAEkO,eAAevK,KAAIoK,EAAEpK,GAAK3D,EAAE2D,MACpDoK,EAAG/N,IAGrB,SAASmO,EAAUJ,EAAG/N,GAEzB,SAASoO,IAAO7hB,KAAKgO,YAAcwT,EADnCD,EAAcC,EAAG/N,GAEjB+N,EAAEvc,UAAkB,OAANwO,EAAa1O,OAAOO,OAAOmO,IAAMoO,EAAG5c,UAAYwO,EAAExO,UAAW,IAAI4c,GCzB5E,SAASC,EAAWjR,GACvB,MAAoB,mBAANA,ECDlB,IAAIkR,GAAsD,EAC/C,EAAS,CAChBpS,aAAS5M,EACT,0CAA0CnB,GAClCA,IAC0B,IAAIgM,OACqG+N,MAKvIoG,EAAsDngB,GAE1D,4CACI,OAAOmgB,ICdR,SAASC,EAAgBpG,GAC5BpJ,YAAW,WAAc,MAAMoJ,IAAQ,GCCpC,IAAIqG,EAAQ,CACfC,QAAQ,EACRC,KAAM,SAAUvgB,KAChBwgB,MAAO,SAAUxG,GACb,GAAI,EAAOyG,sCACP,MAAMzG,EAGNoG,EAAgBpG,IAGxB0G,SAAU,cCbHC,EAAwB,WAAe,OAAOzb,MAAMyb,SAAW,SAAW1R,GAAK,OAAOA,GAAyB,iBAAbA,EAAEtJ,QAA5E,GCAnC,IAYWib,EAZiC,WACxC,SAASC,EAAwBC,GAM7B,OALA9U,MAAM3L,KAAKjC,MACXA,KAAK8P,QAAU4S,EACXA,EAAOnb,OAAS,4CAA8Cmb,EAAO5e,KAAI,SAAU8X,EAAKvU,GAAK,OAAOA,EAAI,EAAI,KAAOuU,EAAItI,cAAe5D,KAAK,QAAU,GACzJ1P,KAAKgD,KAAO,sBACZhD,KAAK0iB,OAASA,EACP1iB,KAGX,OADAyiB,EAAwBxd,UAA0BF,OAAOO,OAAOsI,MAAM3I,WAC/Dwd,EAViC,GCIxC,EAA8B,WAC9B,SAASE,EAAaC,GAClB5iB,KAAKkiB,QAAS,EACdliB,KAAK6iB,iBAAmB,KACxB7iB,KAAK8iB,eAAiB,KAClBF,IACA5iB,KAAK+iB,aAAeH,GAsH5B,OAnHAD,EAAa1d,UAAU2d,YAAc,WACjC,IAAIF,EACJ,IAAI1iB,KAAKkiB,OAAT,CAGA,IClBiBrR,EDkBFgS,EAAN7iB,KAA4B6iB,iBAAkBE,EAA9C/iB,KAAgE+iB,aAAcD,EAA9E9iB,KAAkG8iB,eAI3G,GAHA9iB,KAAKkiB,QAAS,EACdliB,KAAK6iB,iBAAmB,KACxB7iB,KAAK8iB,eAAiB,KAClBD,aAA4BF,EAC5BE,EAAiBlF,OAAO3d,WAEvB,GAAyB,OAArB6iB,EACL,IAAK,IAAInL,EAAQ,EAAGA,EAAQmL,EAAiBtb,SAAUmQ,EAAO,CAC3CmL,EAAiBnL,GACvBiG,OAAO3d,MAGxB,GAAI8hB,EAAWiB,GACX,IACIA,EAAa9gB,KAAKjC,MAEtB,MAAOoC,GACHsgB,EAAStgB,aAAaogB,EAAsBQ,EAA4B5gB,EAAEsgB,QAAU,CAACtgB,GAG7F,GAAImgB,EAAQO,GACR,CAAIpL,GAAS,EAEb,IAFA,IACIpQ,EAAMwb,EAAevb,SAChBmQ,EAAQpQ,GAAK,CAClB,IAAI2b,EAAMH,EAAepL,GACzB,GC3CC,QADQ7G,ED4CIoS,IC3CS,iBAANpS,ED4CZ,IACIoS,EAAIL,cAER,MAAOxgB,GACHsgB,EAASA,GAAU,GACftgB,aAAaogB,EACbE,EAASA,EAAO7hB,OAAOmiB,EAA4B5gB,EAAEsgB,SAGrDA,EAAOzY,KAAK7H,KAMhC,GAAIsgB,EACA,MAAM,IAAIF,EAAoBE,KAGtCC,EAAa1d,UAAUie,IAAM,SAAUC,GACnC,IAAIC,EAAeD,EACnB,IAAKA,EACD,OAAOR,EAAaU,MAExB,cAAeF,GACX,IAAK,WACDC,EAAe,IAAIT,EAAaQ,GACpC,IAAK,SACD,GAAIC,IAAiBpjB,MAAQojB,EAAalB,QAA8C,mBAA7BkB,EAAaR,YACpE,OAAOQ,EAEN,GAAIpjB,KAAKkiB,OAEV,OADAkB,EAAaR,cACNQ,EAEN,KAAMA,aAAwBT,GAAe,CAC9C,IAAIW,EAAMF,GACVA,EAAe,IAAIT,GACNG,eAAiB,CAACQ,GAEnC,MACJ,QACI,MAAM,IAAI1V,MAAM,yBAA2BuV,EAAW,2BAG9D,IAAIN,EAAmBO,EAAaP,iBACpC,GAAyB,OAArBA,EACAO,EAAaP,iBAAmB7iB,UAE/B,GAAI6iB,aAA4BF,EAAc,CAC/C,GAAIE,IAAqB7iB,KACrB,OAAOojB,EAEXA,EAAaP,iBAAmB,CAACA,EAAkB7iB,UAElD,KAAwC,IAApC6iB,EAAiBU,QAAQvjB,MAI9B,OAAOojB,EAHPP,EAAiB5Y,KAAKjK,MAK1B,IAAIqE,EAAgBrE,KAAK8iB,eAOzB,OANsB,OAAlBze,EACArE,KAAK8iB,eAAiB,CAACM,GAGvB/e,EAAc4F,KAAKmZ,GAEhBA,GAEXT,EAAa1d,UAAU0Y,OAAS,SAAUyF,GACtC,IAAI/e,EAAgBrE,KAAK8iB,eACzB,GAAIze,EAAe,CACf,IAAImf,EAAoBnf,EAAckf,QAAQH,IACnB,IAAvBI,GACAnf,EAAc+F,OAAOoZ,EAAmB,KAIpDb,EAAaU,MAAS,SAAUpB,GAE5B,OADAA,EAAMC,QAAS,EACRD,EAFU,CAGnB,IAAIU,GACCA,EA5HsB,GA+HjC,SAASK,EAA4BN,GACjC,OAAOA,EAAO/R,QAAO,SAAU8S,EAAM7H,GAAO,OAAO6H,EAAK5iB,OAAQ+a,aAAe4G,EAAuB5G,EAAI8G,OAAS9G,KAAS,IEpIzH,IAAI8H,EAA6B,WACpC,MAAyB,mBAAXC,OACMA,OAAO,gBACrB,kBAAkChS,KAAK0B,SAHT,GCOpC,EAA4B,SAAUuQ,GAEtC,SAASC,EAAWC,EAAmB1B,EAAOE,GAC1C,IAAIyB,EAAQH,EAAO3hB,KAAKjC,OAASA,KAKjC,OAJA+jB,EAAMC,eAAiB,KACvBD,EAAME,iBAAkB,EACxBF,EAAMG,oBAAqB,EAC3BH,EAAMI,WAAY,EACVnX,UAAUzF,QACd,KAAK,EACDwc,EAAMK,YAAcnC,EACpB,MACJ,KAAK,EACD,IAAK6B,EAAmB,CACpBC,EAAMK,YAAcnC,EACpB,MAEJ,GAAiC,iBAAtB6B,EAAgC,CACnCA,aAA6BD,GAC7BE,EAAMG,mBAAqBJ,EAAkBI,mBAC7CH,EAAMK,YAAcN,EACpBA,EAAkBZ,IAAIa,KAGtBA,EAAMG,oBAAqB,EAC3BH,EAAMK,YAAc,IAAI,EAAeL,EAAOD,IAElD,MAER,QACIC,EAAMG,oBAAqB,EAC3BH,EAAMK,YAAc,IAAI,EAAeL,EAAOD,EAAmB1B,EAAOE,GAGhF,OAAOyB,EAoDX,OArFA,EAAkBF,EAAYD,GAmC9BC,EAAW5e,UAAUye,GAAsB,WAAc,OAAO1jB,MAChE6jB,EAAWve,OAAS,SAAU6c,EAAMC,EAAOE,GACvC,IAAI+B,EAAa,IAAIR,EAAW1B,EAAMC,EAAOE,GAE7C,OADA+B,EAAWH,oBAAqB,EACzBG,GAEXR,EAAW5e,UAAUkd,KAAO,SAAUvgB,GAC7B5B,KAAKmkB,WACNnkB,KAAKskB,MAAM1iB,IAGnBiiB,EAAW5e,UAAUmd,MAAQ,SAAUxG,GAC9B5b,KAAKmkB,YACNnkB,KAAKmkB,WAAY,EACjBnkB,KAAKukB,OAAO3I,KAGpBiI,EAAW5e,UAAUqd,SAAW,WACvBtiB,KAAKmkB,YACNnkB,KAAKmkB,WAAY,EACjBnkB,KAAKwkB,cAGbX,EAAW5e,UAAU2d,YAAc,WAC3B5iB,KAAKkiB,SAGTliB,KAAKmkB,WAAY,EACjBP,EAAO3e,UAAU2d,YAAY3gB,KAAKjC,QAEtC6jB,EAAW5e,UAAUqf,MAAQ,SAAU1iB,GACnC5B,KAAKokB,YAAYjC,KAAKvgB,IAE1BiiB,EAAW5e,UAAUsf,OAAS,SAAU3I,GACpC5b,KAAKokB,YAAYhC,MAAMxG,GACvB5b,KAAK4iB,eAETiB,EAAW5e,UAAUuf,UAAY,WAC7BxkB,KAAKokB,YAAY9B,WACjBtiB,KAAK4iB,eAETiB,EAAW5e,UAAUwf,uBAAyB,WAC1C,IAAI5B,EAAmB7iB,KAAK6iB,iBAM5B,OALA7iB,KAAK6iB,iBAAmB,KACxB7iB,KAAK4iB,cACL5iB,KAAKkiB,QAAS,EACdliB,KAAKmkB,WAAY,EACjBnkB,KAAK6iB,iBAAmBA,EACjB7iB,MAEJ6jB,EAtFoB,CAuF7B,GAEE,EAAgC,SAAUD,GAE1C,SAASc,EAAeC,EAAmBC,EAAgBxC,EAAOE,GAC9D,IAEIH,EAFA4B,EAAQH,EAAO3hB,KAAKjC,OAASA,KACjC+jB,EAAMY,kBAAoBA,EAE1B,IAAI7kB,EAAUikB,EAoBd,OAnBIjC,EAAW8C,GACXzC,EAAOyC,EAEFA,IACLzC,EAAOyC,EAAezC,KACtBC,EAAQwC,EAAexC,MACvBE,EAAWsC,EAAetC,SACtBsC,IAAmB3C,IAEfH,GADJhiB,EAAUiF,OAAOO,OAAOsf,IACDhC,cACnBmB,EAAMb,IAAIpjB,EAAQ8iB,YAAYnc,KAAK3G,IAEvCA,EAAQ8iB,YAAcmB,EAAMnB,YAAYnc,KAAKsd,KAGrDA,EAAMc,SAAW/kB,EACjBikB,EAAMO,MAAQnC,EACd4B,EAAMQ,OAASnC,EACf2B,EAAMS,UAAYlC,EACXyB,EA0GX,OAnIA,EAAkBW,EAAgBd,GA2BlCc,EAAezf,UAAUkd,KAAO,SAAUvgB,GACtC,IAAK5B,KAAKmkB,WAAankB,KAAKskB,MAAO,CAC/B,IAAIK,EAAoB3kB,KAAK2kB,kBACxB,EAAOtC,uCAA0CsC,EAAkBT,mBAG/DlkB,KAAK8kB,gBAAgBH,EAAmB3kB,KAAKskB,MAAO1iB,IACzD5B,KAAK4iB,cAHL5iB,KAAK+kB,aAAa/kB,KAAKskB,MAAO1iB,KAO1C8iB,EAAezf,UAAUmd,MAAQ,SAAUxG,GACvC,IAAK5b,KAAKmkB,UAAW,CACjB,IAAIQ,EAAoB3kB,KAAK2kB,kBACzBtC,EAAwC,EAAOA,sCACnD,GAAIriB,KAAKukB,OACAlC,GAA0CsC,EAAkBT,oBAK7DlkB,KAAK8kB,gBAAgBH,EAAmB3kB,KAAKukB,OAAQ3I,GACrD5b,KAAK4iB,gBALL5iB,KAAK+kB,aAAa/kB,KAAKukB,OAAQ3I,GAC/B5b,KAAK4iB,oBAOR,GAAK+B,EAAkBT,mBAQpB7B,GACAsC,EAAkBX,eAAiBpI,EACnC+I,EAAkBV,iBAAkB,GAGpCjC,EAAgBpG,GAEpB5b,KAAK4iB,kBAfuC,CAE5C,GADA5iB,KAAK4iB,cACDP,EACA,MAAMzG,EAEVoG,EAAgBpG,MAc5B8I,EAAezf,UAAUqd,SAAW,WAChC,IAAIyB,EAAQ/jB,KACZ,IAAKA,KAAKmkB,UAAW,CACjB,IAAIQ,EAAoB3kB,KAAK2kB,kBAC7B,GAAI3kB,KAAKwkB,UAAW,CAChB,IAAIQ,EAAkB,WAAc,OAAOjB,EAAMS,UAAUviB,KAAK8hB,EAAMc,WACjE,EAAOxC,uCAA0CsC,EAAkBT,oBAKpElkB,KAAK8kB,gBAAgBH,EAAmBK,GACxChlB,KAAK4iB,gBALL5iB,KAAK+kB,aAAaC,GAClBhlB,KAAK4iB,oBAQT5iB,KAAK4iB,gBAIjB8B,EAAezf,UAAU8f,aAAe,SAAUlb,EAAIjI,GAClD,IACIiI,EAAG5H,KAAKjC,KAAK6kB,SAAUjjB,GAE3B,MAAOga,GAEH,GADA5b,KAAK4iB,cACD,EAAOP,sCACP,MAAMzG,EAGNoG,EAAgBpG,KAI5B8I,EAAezf,UAAU6f,gBAAkB,SAAUzY,EAAQxC,EAAIjI,GAC7D,IAAK,EAAOygB,sCACR,MAAM,IAAIzU,MAAM,YAEpB,IACI/D,EAAG5H,KAAKjC,KAAK6kB,SAAUjjB,GAE3B,MAAOga,GACH,OAAI,EAAOyG,uCACPhW,EAAO2X,eAAiBpI,EACxBvP,EAAO4X,iBAAkB,GAClB,IAGPjC,EAAgBpG,IACT,GAGf,OAAO,GAEX8I,EAAezf,UAAU8d,aAAe,WACpC,IAAI4B,EAAoB3kB,KAAK2kB,kBAC7B3kB,KAAK6kB,SAAW,KAChB7kB,KAAK2kB,kBAAoB,KACzBA,EAAkB/B,eAEf8B,EApIwB,CAqIjC,GCnOK,SAAS7gB,EAAOohB,EAAWC,GAC9B,OAAO,SAAgC5jB,GACnC,OAAOA,EAAO6jB,KAAK,IAAIC,EAAeH,EAAWC,KAGzD,IAAIE,EAAgC,WAChC,SAASA,EAAeH,EAAWC,GAC/BllB,KAAKilB,UAAYA,EACjBjlB,KAAKklB,QAAUA,EAKnB,OAHAE,EAAengB,UAAUhD,KAAO,SAAUoiB,EAAY/iB,GAClD,OAAOA,EAAOuF,UAAU,IAAI,EAAiBwd,EAAYrkB,KAAKilB,UAAWjlB,KAAKklB,WAE3EE,EARwB,GAU/B,EAAkC,SAAUxB,GAE5C,SAASyB,EAAiBjB,EAAaa,EAAWC,GAC9C,IAAInB,EAAQH,EAAO3hB,KAAKjC,KAAMokB,IAAgBpkB,KAI9C,OAHA+jB,EAAMkB,UAAYA,EAClBlB,EAAMmB,QAAUA,EAChBnB,EAAMuB,MAAQ,EACPvB,EAeX,OArBA,EAAkBsB,EAAkBzB,GAQpCyB,EAAiBpgB,UAAUqf,MAAQ,SAAU1iB,GACzC,IAAIZ,EACJ,IACIA,EAAShB,KAAKilB,UAAUhjB,KAAKjC,KAAKklB,QAAStjB,EAAO5B,KAAKslB,SAE3D,MAAO1J,GAEH,YADA5b,KAAKokB,YAAYhC,MAAMxG,GAGvB5a,GACAhB,KAAKokB,YAAYjC,KAAKvgB,IAGvByjB,EAtB0B,CAuBnC,G,qBCtCF,IAAIE,EAAc,ICFlB,MAII,YAAYja,EAAe,IAH3B,KAAAvK,KAAe,GAIX,IAAI,KAAEA,GAASuK,EAIf,OAFAtL,KAAKe,KAAOA,GAAQf,KAAKe,KAElBf,KAPX,iBAAmB,QAAS,CAAE,YAAc,GAAQA,KAAKe,QDA3B,CAC9BA,KAAM,SEHV,MAAM,EAAN,cACI,KAAC,sBAAwB,yBACzB,KAAC,sBAAwB,yBACzB,KAAC,sBAAwB,yBACzB,KAAC,mBAAqB,sBACtB,KAAC,mBAAqB,uBAG1B,IAAI,EAAW,IAAI,ECRZ,IAAI,EAA2B,WAAe,MAAyB,mBAAX4iB,QAAyBA,OAAO6B,YAAc,eAA3E,GCA/B,SAASrL,KCQT,SAASsL,EAAcC,GAC1B,OAAKA,EAGc,IAAfA,EAAIne,OACGme,EAAI,GAER,SAAeC,GAClB,OAAOD,EAAI/U,QAAO,SAAUiV,EAAM/b,GAAM,OAAOA,EAAG+b,KAAUD,IANrDxL,ECLf,IAAI,EAA4B,WAC5B,SAAS0L,EAAWhf,GAChB7G,KAAK8lB,WAAY,EACbjf,IACA7G,KAAK+lB,WAAalf,GA6F1B,OA1FAgf,EAAW5gB,UAAUkgB,KAAO,SAAU5hB,GAClC,IAAIiiB,EAAa,IAAIK,EAGrB,OAFAL,EAAWlkB,OAAStB,KACpBwlB,EAAWjiB,SAAWA,EACfiiB,GAEXK,EAAW5gB,UAAU4B,UAAY,SAAU+d,EAAgBxC,EAAOE,GAC9D,IAAI/e,EAAWvD,KAAKuD,SAChByiB,ECjBL,SAAsBC,EAAgB7D,EAAOE,GAChD,GAAI2D,EAAgB,CAChB,GAAIA,aAA0B,EAC1B,OAAOA,EAEX,GAAIA,EAAevC,GACf,OAAOuC,EAAevC,KAG9B,OAAKuC,GAAmB7D,GAAUE,EAG3B,IAAI,EAAW2D,EAAgB7D,EAAOE,GAFlC,IAAI,EAAWL,GDOXiE,CAAatB,EAAgBxC,EAAOE,GAS/C,GARI/e,EACAyiB,EAAK9C,IAAI3f,EAAStB,KAAK+jB,EAAMhmB,KAAKsB,SAGlC0kB,EAAK9C,IAAIljB,KAAKsB,QAAW,EAAO+gB,wCAA0C2D,EAAK9B,mBAC3ElkB,KAAK+lB,WAAWC,GAChBhmB,KAAKmmB,cAAcH,IAEvB,EAAO3D,uCACH2D,EAAK9B,qBACL8B,EAAK9B,oBAAqB,EACtB8B,EAAK/B,iBACL,MAAM+B,EAAKhC,eAIvB,OAAOgC,GAEXH,EAAW5gB,UAAUkhB,cAAgB,SAAUH,GAC3C,IACI,OAAOhmB,KAAK+lB,WAAWC,GAE3B,MAAOpK,GACC,EAAOyG,wCACP2D,EAAK/B,iBAAkB,EACvB+B,EAAKhC,eAAiBpI,IE7C/B,SAAwBwK,GAC3B,KAAOA,GAAU,CACb,IAAIC,EAAKD,EAAUE,EAAWD,EAAGnE,OAAQkC,EAAciC,EAAGjC,YAAaD,EAAYkC,EAAGlC,UACtF,GAAImC,GAAYnC,EACZ,OAAO,EAGPiC,EADKhC,GAAeA,aAAuB,EAChCA,EAGA,KAGnB,OAAO,EFkCKmC,CAAeP,GAIfvY,QAAQgB,KAAKmN,GAHboK,EAAK5D,MAAMxG,KAOvBiK,EAAW5gB,UAAUM,QAAU,SAAU4c,EAAMqE,GAC3C,IAAIzC,EAAQ/jB,KAEZ,OAAO,IADPwmB,EAAcC,EAAeD,KACN,SAAU7Y,EAASyI,GACtC,IAAIgN,EACJA,EAAeW,EAAMld,WAAU,SAAUjF,GACrC,IACIugB,EAAKvgB,GAET,MAAOga,GACHxF,EAAOwF,GACHwH,GACAA,EAAaR,iBAGtBxM,EAAQzI,OAGnBkY,EAAW5gB,UAAU8gB,WAAa,SAAU1B,GACxC,IAAI/iB,EAAStB,KAAKsB,OAClB,OAAOA,GAAUA,EAAOuF,UAAUwd,IAEtCwB,EAAW5gB,UAAU,GAAqB,WACtC,OAAOjF,MAEX6lB,EAAW5gB,UAAUwD,KAAO,WAExB,IADA,IAAIie,EAAa,GACRC,EAAK,EAAGA,EAAK3Z,UAAUzF,OAAQof,IACpCD,EAAWC,GAAM3Z,UAAU2Z,GAE/B,OAA0B,IAAtBD,EAAWnf,OACJvH,KAEJylB,EAAciB,EAAdjB,CAA0BzlB,OAErC6lB,EAAW5gB,UAAU2hB,UAAY,SAAUJ,GACvC,IAAIzC,EAAQ/jB,KAEZ,OAAO,IADPwmB,EAAcC,EAAeD,KACN,SAAU7Y,EAASyI,GACtC,IAAIxU,EACJmiB,EAAMld,WAAU,SAAUgK,GAAK,OAAOjP,EAAQiP,KAAM,SAAU+K,GAAO,OAAOxF,EAAOwF,MAAS,WAAc,OAAOjO,EAAQ/L,UAGjIikB,EAAWvgB,OAAS,SAAUuB,GAC1B,OAAO,IAAIgf,EAAWhf,IAEnBgf,EAjGoB,GAoG/B,SAASY,EAAeD,GAIpB,GAHKA,IACDA,EAAc,EAAO7W,SAAWA,UAE/B6W,EACD,MAAM,IAAI5Y,MAAM,yBAEpB,OAAO4Y,EGhHX,IAUWK,EAVqC,WAC5C,SAASC,IAIL,OAHAlZ,MAAM3L,KAAKjC,MACXA,KAAK8P,QAAU,sBACf9P,KAAKgD,KAAO,0BACLhD,KAGX,OADA8mB,EAA4B7hB,UAA0BF,OAAOO,OAAOsI,MAAM3I,WACnE6hB,EARqC,GCE5C,EAAqC,SAAUlD,GAE/C,SAASmD,EAAoBC,EAAS3C,GAClC,IAAIN,EAAQH,EAAO3hB,KAAKjC,OAASA,KAIjC,OAHA+jB,EAAMiD,QAAUA,EAChBjD,EAAMM,WAAaA,EACnBN,EAAM7B,QAAS,EACR6B,EAkBX,OAxBA,EAAkBgD,EAAqBnD,GAQvCmD,EAAoB9hB,UAAU2d,YAAc,WACxC,IAAI5iB,KAAKkiB,OAAT,CAGAliB,KAAKkiB,QAAS,EACd,IAAI8E,EAAUhnB,KAAKgnB,QACfC,EAAYD,EAAQC,UAExB,GADAjnB,KAAKgnB,QAAU,KACVC,GAAkC,IAArBA,EAAU1f,SAAgByf,EAAQ7C,YAAa6C,EAAQ9E,OAAzE,CAGA,IAAIgF,EAAkBD,EAAU1D,QAAQvjB,KAAKqkB,aACpB,IAArB6C,GACAD,EAAU7c,OAAO8c,EAAiB,MAGnCH,EAzB6B,CA0BtC,GCrBE,EAAmC,SAAUnD,GAE7C,SAASuD,EAAkB/C,GACvB,IAAIL,EAAQH,EAAO3hB,KAAKjC,KAAMokB,IAAgBpkB,KAE9C,OADA+jB,EAAMK,YAAcA,EACbL,EAEX,OANA,EAAkBoD,EAAmBvD,GAM9BuD,EAP2B,CAQpC,GAEE,EAAyB,SAAUvD,GAEnC,SAASwD,IACL,IAAIrD,EAAQH,EAAO3hB,KAAKjC,OAASA,KAMjC,OALA+jB,EAAMkD,UAAY,GAClBlD,EAAM7B,QAAS,EACf6B,EAAMI,WAAY,EAClBJ,EAAMsD,UAAW,EACjBtD,EAAMuD,YAAc,KACbvD,EAyFX,OAjGA,EAAkBqD,EAASxD,GAU3BwD,EAAQniB,UAAUye,GAAsB,WACpC,OAAO,IAAI,EAAkB1jB,OAEjConB,EAAQniB,UAAUkgB,KAAO,SAAU5hB,GAC/B,IAAIyjB,EAAU,IAAI,EAAiBhnB,KAAMA,MAEzC,OADAgnB,EAAQzjB,SAAWA,EACZyjB,GAEXI,EAAQniB,UAAUkd,KAAO,SAAUvgB,GAC/B,GAAI5B,KAAKkiB,OACL,MAAM,IAAI2E,EAEd,IAAK7mB,KAAKmkB,UAIN,IAHA,IAAI8C,EAAYjnB,KAAKinB,UACjB3f,EAAM2f,EAAU1f,OAChBggB,EAAON,EAAUjV,QACZ3K,EAAI,EAAGA,EAAIC,EAAKD,IACrBkgB,EAAKlgB,GAAG8a,KAAKvgB,IAIzBwlB,EAAQniB,UAAUmd,MAAQ,SAAUxG,GAChC,GAAI5b,KAAKkiB,OACL,MAAM,IAAI2E,EAEd7mB,KAAKqnB,UAAW,EAChBrnB,KAAKsnB,YAAc1L,EACnB5b,KAAKmkB,WAAY,EAIjB,IAHA,IAAI8C,EAAYjnB,KAAKinB,UACjB3f,EAAM2f,EAAU1f,OAChBggB,EAAON,EAAUjV,QACZ3K,EAAI,EAAGA,EAAIC,EAAKD,IACrBkgB,EAAKlgB,GAAG+a,MAAMxG,GAElB5b,KAAKinB,UAAU1f,OAAS,GAE5B6f,EAAQniB,UAAUqd,SAAW,WACzB,GAAItiB,KAAKkiB,OACL,MAAM,IAAI2E,EAEd7mB,KAAKmkB,WAAY,EAIjB,IAHA,IAAI8C,EAAYjnB,KAAKinB,UACjB3f,EAAM2f,EAAU1f,OAChBggB,EAAON,EAAUjV,QACZ3K,EAAI,EAAGA,EAAIC,EAAKD,IACrBkgB,EAAKlgB,GAAGib,WAEZtiB,KAAKinB,UAAU1f,OAAS,GAE5B6f,EAAQniB,UAAU2d,YAAc,WAC5B5iB,KAAKmkB,WAAY,EACjBnkB,KAAKkiB,QAAS,EACdliB,KAAKinB,UAAY,MAErBG,EAAQniB,UAAUkhB,cAAgB,SAAU9B,GACxC,GAAIrkB,KAAKkiB,OACL,MAAM,IAAI2E,EAGV,OAAOjD,EAAO3e,UAAUkhB,cAAclkB,KAAKjC,KAAMqkB,IAGzD+C,EAAQniB,UAAU8gB,WAAa,SAAU1B,GACrC,GAAIrkB,KAAKkiB,OACL,MAAM,IAAI2E,EAET,OAAI7mB,KAAKqnB,UACVhD,EAAWjC,MAAMpiB,KAAKsnB,aACf,EAAajE,OAEfrjB,KAAKmkB,WACVE,EAAW/B,WACJ,EAAae,QAGpBrjB,KAAKinB,UAAUhd,KAAKoa,GACb,IAAI,EAAoBrkB,KAAMqkB,KAG7C+C,EAAQniB,UAAUuiB,aAAe,WAC7B,IAAIhC,EAAa,IAAI,EAErB,OADAA,EAAWlkB,OAAStB,KACbwlB,GAEX4B,EAAQ9hB,OAAS,SAAU8e,EAAa9iB,GACpC,OAAO,IAAI,EAAiB8iB,EAAa9iB,IAEtC8lB,EAlGiB,CAmG1B,GAEE,EAAkC,SAAUxD,GAE5C,SAAS6D,EAAiBrD,EAAa9iB,GACnC,IAAIyiB,EAAQH,EAAO3hB,KAAKjC,OAASA,KAGjC,OAFA+jB,EAAMK,YAAcA,EACpBL,EAAMziB,OAASA,EACRyiB,EA6BX,OAlCA,EAAkB0D,EAAkB7D,GAOpC6D,EAAiBxiB,UAAUkd,KAAO,SAAUvgB,GACxC,IAAIwiB,EAAcpkB,KAAKokB,YACnBA,GAAeA,EAAYjC,MAC3BiC,EAAYjC,KAAKvgB,IAGzB6lB,EAAiBxiB,UAAUmd,MAAQ,SAAUxG,GACzC,IAAIwI,EAAcpkB,KAAKokB,YACnBA,GAAeA,EAAYhC,OAC3BpiB,KAAKokB,YAAYhC,MAAMxG,IAG/B6L,EAAiBxiB,UAAUqd,SAAW,WAClC,IAAI8B,EAAcpkB,KAAKokB,YACnBA,GAAeA,EAAY9B,UAC3BtiB,KAAKokB,YAAY9B,YAGzBmF,EAAiBxiB,UAAU8gB,WAAa,SAAU1B,GAE9C,OADarkB,KAAKsB,OAEPtB,KAAKsB,OAAOuF,UAAUwd,GAGtB,EAAahB,OAGrBoE,EAnC0B,CAoCnC,GCxJE,EAA6B,SAAU7D,GAEvC,SAAS8D,EAAYC,EAAWC,GAC5B,IAAI7D,EAAQH,EAAO3hB,KAAKjC,KAAM2nB,EAAWC,IAAS5nB,KAGlD,OAFA+jB,EAAM4D,UAAYA,EAClB5D,EAAM6D,KAAOA,EACN7D,EA4BX,OAjCA,EAAkB2D,EAAa9D,GAO/B8D,EAAYziB,UAAU4iB,SAAW,SAAUnjB,EAAOgO,GAI9C,YAHc,IAAVA,IACAA,EAAQ,GAERA,EAAQ,EACDkR,EAAO3e,UAAU4iB,SAAS5lB,KAAKjC,KAAM0E,EAAOgO,IAEvD1S,KAAK0S,MAAQA,EACb1S,KAAK0E,MAAQA,EACb1E,KAAK2nB,UAAUG,MAAM9nB,MACdA,OAEX0nB,EAAYziB,UAAU/E,QAAU,SAAUwE,EAAOgO,GAC7C,OAAQA,EAAQ,GAAK1S,KAAKkiB,OACtB0B,EAAO3e,UAAU/E,QAAQ+B,KAAKjC,KAAM0E,EAAOgO,GAC3C1S,KAAK+nB,SAASrjB,EAAOgO,IAE7BgV,EAAYziB,UAAU+iB,eAAiB,SAAUL,EAAWje,EAAIgJ,GAI5D,YAHc,IAAVA,IACAA,EAAQ,GAEG,OAAVA,GAAkBA,EAAQ,GAAiB,OAAVA,GAAkB1S,KAAK0S,MAAQ,EAC1DkR,EAAO3e,UAAU+iB,eAAe/lB,KAAKjC,KAAM2nB,EAAWje,EAAIgJ,GAE9DiV,EAAUG,MAAM9nB,OAEpB0nB,EAlCqB,CCAC,SAAU9D,GAEvC,SAASqE,EAAYN,EAAWC,GAC5B,IAAI7D,EAAQH,EAAO3hB,KAAKjC,KAAM2nB,EAAWC,IAAS5nB,KAIlD,OAHA+jB,EAAM4D,UAAYA,EAClB5D,EAAM6D,KAAOA,EACb7D,EAAMmE,SAAU,EACTnE,EAiFX,OAvFA,EAAkBkE,EAAarE,GAQ/BqE,EAAYhjB,UAAU4iB,SAAW,SAAUnjB,EAAOgO,GAI9C,QAHc,IAAVA,IACAA,EAAQ,GAER1S,KAAKkiB,OACL,OAAOliB,KAEXA,KAAK0E,MAAQA,EACb,IAAIgF,EAAK1J,KAAK0J,GACVie,EAAY3nB,KAAK2nB,UAOrB,OANU,MAANje,IACA1J,KAAK0J,GAAK1J,KAAKmoB,eAAeR,EAAWje,EAAIgJ,IAEjD1S,KAAKkoB,SAAU,EACfloB,KAAK0S,MAAQA,EACb1S,KAAK0J,GAAK1J,KAAK0J,IAAM1J,KAAKgoB,eAAeL,EAAW3nB,KAAK0J,GAAIgJ,GACtD1S,MAEXioB,EAAYhjB,UAAU+iB,eAAiB,SAAUL,EAAWje,EAAIgJ,GAI5D,YAHc,IAAVA,IACAA,EAAQ,GAEL0V,YAAYT,EAAUG,MAAMrhB,KAAKkhB,EAAW3nB,MAAO0S,IAE9DuV,EAAYhjB,UAAUkjB,eAAiB,SAAUR,EAAWje,EAAIgJ,GAI5D,QAHc,IAAVA,IACAA,EAAQ,GAEE,OAAVA,GAAkB1S,KAAK0S,QAAUA,IAA0B,IAAjB1S,KAAKkoB,QAC/C,OAAOxe,EAEX2e,cAAc3e,IAGlBue,EAAYhjB,UAAU/E,QAAU,SAAUwE,EAAOgO,GAC7C,GAAI1S,KAAKkiB,OACL,OAAO,IAAItU,MAAM,gCAErB5N,KAAKkoB,SAAU,EACf,IAAI9F,EAAQpiB,KAAK+nB,SAASrjB,EAAOgO,GACjC,GAAI0P,EACA,OAAOA,GAEe,IAAjBpiB,KAAKkoB,SAAgC,MAAXloB,KAAK0J,KACpC1J,KAAK0J,GAAK1J,KAAKmoB,eAAenoB,KAAK2nB,UAAW3nB,KAAK0J,GAAI,QAG/Due,EAAYhjB,UAAU8iB,SAAW,SAAUrjB,EAAOgO,GAC9C,IAAI4V,GAAU,EACVC,OAAaxlB,EACjB,IACI/C,KAAK4nB,KAAKljB,GAEd,MAAOtC,GACHkmB,GAAU,EACVC,IAAenmB,GAAKA,GAAK,IAAIwL,MAAMxL,GAEvC,GAAIkmB,EAEA,OADAtoB,KAAK4iB,cACE2F,GAGfN,EAAYhjB,UAAU8d,aAAe,WACjC,IAAIrZ,EAAK1J,KAAK0J,GACVie,EAAY3nB,KAAK2nB,UACjBa,EAAUb,EAAUa,QACpB9Q,EAAQ8Q,EAAQjF,QAAQvjB,MAC5BA,KAAK4nB,KAAO,KACZ5nB,KAAK0E,MAAQ,KACb1E,KAAKkoB,SAAU,EACfloB,KAAK2nB,UAAY,MACF,IAAXjQ,GACA8Q,EAAQpe,OAAOsN,EAAO,GAEhB,MAANhO,IACA1J,KAAK0J,GAAK1J,KAAKmoB,eAAeR,EAAWje,EAAI,OAEjD1J,KAAK0S,MAAQ,MAEVuV,EAxFqB,CCAJ,SAAUrE,GAElC,SAAS6E,EAAOd,EAAWC,GACvB,OAAOhE,EAAO3hB,KAAKjC,OAASA,KAQhC,OAVA,EAAkByoB,EAAQ7E,GAI1B6E,EAAOxjB,UAAU4iB,SAAW,SAAUnjB,EAAOgO,GAIzC,YAHc,IAAVA,IACAA,EAAQ,GAEL1S,MAEJyoB,EAXgB,CAYzB,KCfEC,EAA2B,WAC3B,SAASA,EAAUC,EAAiB3V,QACpB,IAARA,IACAA,EAAM0V,EAAU1V,KAEpBhT,KAAK2oB,gBAAkBA,EACvB3oB,KAAKgT,IAAMA,EASf,OAPA0V,EAAUzjB,UAAU4iB,SAAW,SAAUD,EAAMlV,EAAOhO,GAIlD,YAHc,IAAVgO,IACAA,EAAQ,GAEL,IAAI1S,KAAK2oB,gBAAgB3oB,KAAM4nB,GAAMC,SAASnjB,EAAOgO,IAEhEgW,EAAU1V,IAAM,WAAc,OAAOC,KAAKD,OACnC0V,EAfmB,GCGnBhP,EAAsB,ICAG,SAAUkK,GAE1C,SAASgF,IACL,OAAkB,OAAXhF,GAAmBA,EAAO7W,MAAM/M,KAAMgN,YAAchN,KAE/D,OAJA,EAAkB4oB,EAAgBhF,GAI3BgF,EALwB,CCAC,SAAUhF,GAE1C,SAASiF,EAAeF,EAAiB3V,QACzB,IAARA,IACAA,EAAM0V,EAAU1V,KAEpB,IAAI+Q,EAAQH,EAAO3hB,KAAKjC,KAAM2oB,GAAiB,WAC3C,OAAIE,EAAeC,UAAYD,EAAeC,WAAa/E,EAChD8E,EAAeC,SAAS9V,MAGxBA,QAEThT,KAIN,OAHA+jB,EAAMyE,QAAU,GAChBzE,EAAM/D,QAAS,EACf+D,EAAMgF,eAAYhmB,EACXghB,EAkCX,OAlDA,EAAkB8E,EAAgBjF,GAkBlCiF,EAAe5jB,UAAU4iB,SAAW,SAAUD,EAAMlV,EAAOhO,GAIvD,YAHc,IAAVgO,IACAA,EAAQ,GAERmW,EAAeC,UAAYD,EAAeC,WAAa9oB,KAChD6oB,EAAeC,SAASjB,SAASD,EAAMlV,EAAOhO,GAG9Ckf,EAAO3e,UAAU4iB,SAAS5lB,KAAKjC,KAAM4nB,EAAMlV,EAAOhO,IAGjEmkB,EAAe5jB,UAAU6iB,MAAQ,SAAU/nB,GACvC,IAAIyoB,EAAUxoB,KAAKwoB,QACnB,GAAIxoB,KAAKggB,OACLwI,EAAQve,KAAKlK,OADjB,CAIA,IAAIqiB,EACJpiB,KAAKggB,QAAS,EACd,GACI,GAAIoC,EAAQriB,EAAOG,QAAQH,EAAO2E,MAAO3E,EAAO2S,OAC5C,YAEC3S,EAASyoB,EAAQ7T,SAE1B,GADA3U,KAAKggB,QAAS,EACVoC,EAAO,CACP,KAAOriB,EAASyoB,EAAQ7T,SACpB5U,EAAO6iB,cAEX,MAAMR,KAGPyG,EAnDwB,CAoDjCH,IFpD+B,CAAmB,GGDzCrF,EAAsB,IAAI,GAAW,SAAUgB,GAAc,OAAOA,EAAW/B,cACnF,SAAS,EAAMqF,GAClB,OAAOA,EAEX,SAAwBA,GACpB,OAAO,IAAI,GAAW,SAAUtD,GAAc,OAAOsD,EAAUE,UAAS,WAAc,OAAOxD,EAAW/B,iBAHrF0G,CAAerB,GAAatE,ECH5C,SAAS4F,EAAYrnB,GACxB,OAAOA,GAAmC,mBAAnBA,EAAMimB,SCD1B,ICGIqB,ECDJ,SAASC,EAAcxD,EAAOgC,GACjC,OAAO,IAAI,GAAW,SAAUtD,GAC5B,IAAIpB,EAAM,IAAI,EACV5b,EAAI,EAWR,OAVA4b,EAAIC,IAAIyE,EAAUE,UAAS,WACnBxgB,IAAMse,EAAMpe,QAIhB8c,EAAWlC,KAAKwD,EAAMte,MACjBgd,EAAWnC,QACZe,EAAIC,IAAIljB,KAAK6nB,aALbxD,EAAW/B,eAQZW,KCbR,SAASmG,EAAUzD,EAAOgC,GAC7B,OAAKA,EAIMwB,EAAcxD,EAAOgC,GAHrB,IAAI,GHLqB1V,EGKO0T,EHJpC,SAAUtB,GACb,IAAK,IAAIhd,EAAI,EAAGC,EAAM2K,EAAM1K,OAAQF,EAAIC,IAAQ+c,EAAWnC,OAAQ7a,IAC/Dgd,EAAWlC,KAAKlQ,EAAM5K,IAE1Bgd,EAAW/B,cALW,IAAUrQ,EISxC,SAASoX,EAAShD,GACd,IAAIjE,EAAQiE,EAAGjE,MAAoBiE,EAAGhC,WAC3BjC,MAAMA,GHHlB8G,IAAqBA,EAAmB,IAC3C,IAAI,EAA8B,WAC9B,SAASI,EAAaC,EAAM3nB,EAAOwgB,GAC/BpiB,KAAKupB,KAAOA,EACZvpB,KAAK4B,MAAQA,EACb5B,KAAKoiB,MAAQA,EACbpiB,KAAKwpB,SAAoB,MAATD,EAyDpB,OAvDAD,EAAarkB,UAAUwkB,QAAU,SAAUrD,GACvC,OAAQpmB,KAAKupB,MACT,IAAK,IACD,OAAOnD,EAASjE,MAAQiE,EAASjE,KAAKniB,KAAK4B,OAC/C,IAAK,IACD,OAAOwkB,EAAShE,OAASgE,EAAShE,MAAMpiB,KAAKoiB,OACjD,IAAK,IACD,OAAOgE,EAAS9D,UAAY8D,EAAS9D,aAGjDgH,EAAarkB,UAAUykB,GAAK,SAAUvH,EAAMC,EAAOE,GAE/C,OADWtiB,KAAKupB,MAEZ,IAAK,IACD,OAAOpH,GAAQA,EAAKniB,KAAK4B,OAC7B,IAAK,IACD,OAAOwgB,GAASA,EAAMpiB,KAAKoiB,OAC/B,IAAK,IACD,OAAOE,GAAYA,MAG/BgH,EAAarkB,UAAU0kB,OAAS,SAAU1D,EAAgB7D,EAAOE,GAC7D,OAAI2D,GAAiD,mBAAxBA,EAAe9D,KACjCniB,KAAKypB,QAAQxD,GAGbjmB,KAAK0pB,GAAGzD,EAAgB7D,EAAOE,IAG9CgH,EAAarkB,UAAU2kB,aAAe,WAClC,IG7CmBxH,EAAOuF,EH8C1B,OADW3nB,KAAKupB,MAEZ,IAAK,IACD,OI9CT,WAEH,IADA,IAAI7oB,EAAO,GACFimB,EAAK,EAAGA,EAAK3Z,UAAUzF,OAAQof,IACpCjmB,EAAKimB,GAAM3Z,UAAU2Z,GAEzB,IAAIgB,EAAYjnB,EAAKA,EAAK6G,OAAS,GACnC,OAAI0hB,EAAYtB,IACZjnB,EAAKmpB,MACEV,EAAczoB,EAAMinB,IAGpByB,EAAU1oB,GJmCFopB,CAAG9pB,KAAK4B,OACnB,IAAK,IACD,OGlDWwgB,EHkDOpiB,KAAKoiB,MG7CxB,IAAI,EAJVuF,EAIqB,SAAUtD,GAAc,OAAOsD,EAAUE,SAASwB,EAAU,EAAG,CAAEjH,MAAOA,EAAOiC,WAAYA,KAH3F,SAAUA,GAAc,OAAOA,EAAWjC,MAAMA,KHiDlE,IAAK,IACD,OAAO,IAEf,MAAM,IAAIxU,MAAM,uCAEpB0b,EAAaS,WAAa,SAAUnoB,GAChC,YAAqB,IAAVA,EACA,IAAI0nB,EAAa,IAAK1nB,GAE1B0nB,EAAaU,4BAExBV,EAAaW,YAAc,SAAUrO,GACjC,OAAO,IAAI0N,EAAa,SAAKvmB,EAAW6Y,IAE5C0N,EAAaY,eAAiB,WAC1B,OAAOZ,EAAaa,sBAExBb,EAAaa,qBAAuB,IAAIb,EAAa,KACrDA,EAAaU,2BAA6B,IAAIV,EAAa,SAAKvmB,GACzDumB,EA9DsB,GKEjC,IAcI,EAAqC,SAAU1F,GAE/C,SAASwG,EAAoBhG,EAAauD,EAAWjV,QACnC,IAAVA,IACAA,EAAQ,GAEZ,IAAIqR,EAAQH,EAAO3hB,KAAKjC,KAAMokB,IAAgBpkB,KAG9C,OAFA+jB,EAAM4D,UAAYA,EAClB5D,EAAMrR,MAAQA,EACPqR,EAsBX,OA9BA,EAAkBqG,EAAqBxG,GAUvCwG,EAAoBf,SAAW,SAAUgB,GACrC,IAAIC,EAAeD,EAAIC,aAAclG,EAAciG,EAAIjG,YACvDkG,EAAab,QAAQrF,GACrBpkB,KAAK4iB,eAETwH,EAAoBnlB,UAAUslB,gBAAkB,SAAUD,GACpCtqB,KAAKokB,YACXlB,IAAIljB,KAAK2nB,UAAUE,SAASuC,EAAoBf,SAAUrpB,KAAK0S,MAAO,IAAI8X,EAAiBF,EAActqB,KAAKokB,gBAE9HgG,EAAoBnlB,UAAUqf,MAAQ,SAAU1iB,GAC5C5B,KAAKuqB,gBAAgB,EAAaR,WAAWnoB,KAEjDwoB,EAAoBnlB,UAAUsf,OAAS,SAAU3I,GAC7C5b,KAAKuqB,gBAAgB,EAAaN,YAAYrO,IAC9C5b,KAAK4iB,eAETwH,EAAoBnlB,UAAUuf,UAAY,WACtCxkB,KAAKuqB,gBAAgB,EAAaL,kBAClClqB,KAAK4iB,eAEFwH,EA/B6B,CAgCtC,GAEEI,EAAkC,WAKlC,OAJA,SAA0BF,EAAclG,GACpCpkB,KAAKsqB,aAAeA,EACpBtqB,KAAKokB,YAAcA,GAHU,GCpDjC,EAA+B,SAAUR,GAEzC,SAAS6G,EAAcC,EAAYC,EAAYhD,QACxB,IAAf+C,IACAA,EAAa3U,OAAO6U,wBAEL,IAAfD,IACAA,EAAa5U,OAAO6U,mBAExB,IAAI7G,EAAQH,EAAO3hB,KAAKjC,OAASA,KAajC,OAZA+jB,EAAM4D,UAAYA,EAClB5D,EAAM8G,QAAU,GAChB9G,EAAM+G,qBAAsB,EAC5B/G,EAAMgH,YAAcL,EAAa,EAAI,EAAIA,EACzC3G,EAAMiH,YAAcL,EAAa,EAAI,EAAIA,EACrCA,IAAe5U,OAAO6U,mBACtB7G,EAAM+G,qBAAsB,EAC5B/G,EAAM5B,KAAO4B,EAAMkH,wBAGnBlH,EAAM5B,KAAO4B,EAAMmH,eAEhBnH,EA4EX,OAjGA,EAAkB0G,EAAe7G,GAuBjC6G,EAAcxlB,UAAUgmB,uBAAyB,SAAUrpB,GACvD,IAAIipB,EAAU7qB,KAAK6qB,QACnBA,EAAQ5gB,KAAKrI,GACTipB,EAAQtjB,OAASvH,KAAK+qB,aACtBF,EAAQlW,QAEZiP,EAAO3e,UAAUkd,KAAKlgB,KAAKjC,KAAM4B,IAErC6oB,EAAcxlB,UAAUimB,eAAiB,SAAUtpB,GAC/C5B,KAAK6qB,QAAQ5gB,KAAK,IAAIkhB,EAAYnrB,KAAKorB,UAAWxpB,IAClD5B,KAAKqrB,2BACLzH,EAAO3e,UAAUkd,KAAKlgB,KAAKjC,KAAM4B,IAErC6oB,EAAcxlB,UAAU8gB,WAAa,SAAU1B,GAC3C,IAIIjB,EAJA0H,EAAsB9qB,KAAK8qB,oBAC3BD,EAAUC,EAAsB9qB,KAAK6qB,QAAU7qB,KAAKqrB,2BACpD1D,EAAY3nB,KAAK2nB,UACjBrgB,EAAMujB,EAAQtjB,OAElB,GAAIvH,KAAKkiB,OACL,MAAM,IAAI2E,EAYd,GAVS7mB,KAAKmkB,WAAankB,KAAKqnB,SAC5BjE,EAAe,EAAaC,OAG5BrjB,KAAKinB,UAAUhd,KAAKoa,GACpBjB,EAAe,IAAI,EAAoBpjB,KAAMqkB,IAE7CsD,GACAtD,EAAWnB,IAAImB,EAAa,IAAI,EAAoBA,EAAYsD,IAEhEmD,EACA,IAAK,IAAIzjB,EAAI,EAAGA,EAAIC,IAAQ+c,EAAWnC,OAAQ7a,IAC3Cgd,EAAWlC,KAAK0I,EAAQxjB,SAI5B,IAASA,EAAI,EAAGA,EAAIC,IAAQ+c,EAAWnC,OAAQ7a,IAC3Cgd,EAAWlC,KAAK0I,EAAQxjB,GAAGzF,OASnC,OANI5B,KAAKqnB,SACLhD,EAAWjC,MAAMpiB,KAAKsnB,aAEjBtnB,KAAKmkB,WACVE,EAAW/B,WAERc,GAEXqH,EAAcxlB,UAAUmmB,QAAU,WAC9B,OAAQprB,KAAK2nB,WAAajO,GAAO1G,OAErCyX,EAAcxlB,UAAUomB,yBAA2B,WAO/C,IANA,IAAIrY,EAAMhT,KAAKorB,UACXL,EAAc/qB,KAAK+qB,YACnBC,EAAchrB,KAAKgrB,YACnBH,EAAU7qB,KAAK6qB,QACfS,EAAcT,EAAQtjB,OACtBgkB,EAAc,EACXA,EAAcD,KACZtY,EAAM6X,EAAQU,GAAaC,KAAQR,IAGxCO,IAQJ,OANID,EAAcP,IACdQ,EAAc5Z,KAAKC,IAAI2Z,EAAaD,EAAcP,IAElDQ,EAAc,GACdV,EAAQzgB,OAAO,EAAGmhB,GAEfV,GAEJJ,EAlGuB,CAmGhC,GAEEU,EAA6B,WAK7B,OAJA,SAAqBK,EAAM5pB,GACvB5B,KAAKwrB,KAAOA,EACZxrB,KAAK4B,MAAQA,GAHW,GClGhC,IAAI6pB,EAA6B,WAC7B,SAASA,EAAYC,EAASxG,GAC1BllB,KAAK0rB,QAAUA,EACf1rB,KAAKklB,QAAUA,EAKnB,OAHAuG,EAAYxmB,UAAUhD,KAAO,SAAUoiB,EAAY/iB,GAC/C,OAAOA,EAAOuF,UAAU,IAAI,EAAcwd,EAAYrkB,KAAK0rB,QAAS1rB,KAAKklB,WAEtEuG,EARqB,GAW5B,EAA+B,SAAU7H,GAEzC,SAAS+H,EAAcvH,EAAasH,EAASxG,GACzC,IAAInB,EAAQH,EAAO3hB,KAAKjC,KAAMokB,IAAgBpkB,KAI9C,OAHA+jB,EAAM2H,QAAUA,EAChB3H,EAAMuB,MAAQ,EACdvB,EAAMmB,QAAUA,GAAWnB,EACpBA,EAaX,OAnBA,EAAkB4H,EAAe/H,GAQjC+H,EAAc1mB,UAAUqf,MAAQ,SAAU1iB,GACtC,IAAIZ,EACJ,IACIA,EAAShB,KAAK0rB,QAAQzpB,KAAKjC,KAAKklB,QAAStjB,EAAO5B,KAAKslB,SAEzD,MAAO1J,GAEH,YADA5b,KAAKokB,YAAYhC,MAAMxG,GAG3B5b,KAAKokB,YAAYjC,KAAKnhB,IAEnB2qB,EApBuB,CAqBhC,GCvCF,MAAM,UCCN,cCIA,oBACU,KAAAC,gBAA0B,CAAElJ,OAAQ,GACpC,KAAAmJ,YAA2B,IAAIxpB,YAAY,eAAgB,CAAEC,OAAQtC,KAAK4rB,kBAC3E,KAAAE,UAAwC,IAAI,EAAc,GAEjE,GAAG3pB,GACD,IHZgBupB,EAASxG,EGYrB6G,EAAgBloB,EAAS+M,GAAmBzO,IAAYyO,EAAE7P,MAC1DirB,GHbYN,EGaI9a,GAAmBA,EHZhC,SAAsBtP,GACzB,GAAuB,mBAAZoqB,EACP,MAAM,IAAIxU,UAAU,8DAExB,OAAO5V,EAAO6jB,KAAK,IAAIsG,EAAYC,EAASxG,MGYhD,OAFmBllB,KAAK8rB,UAAUrjB,KAAKsjB,GAAetjB,KAAKujB,GAK7D,QAAQ7pB,EAAiBrB,EAAY,MAAOwR,GAC1C,IAAI2Z,EAAQ,IAAI5pB,YAAYF,EAAS,CAAEG,OAAQxB,IAE/C,OADAd,KAAK8rB,UAAU3J,KAAK8J,GACbjsB,KAGT,UAAUmC,EAAiBK,GACzB,IAAI4gB,EAAepjB,KAAKwI,GAAGrG,GAE3B,OADIK,GAAS4gB,EAAavc,UAAUrE,GAC7B4gB,EAGT,YAAYjhB,EAAiBK,GAE3B,OAAOxC,KAGT,OAAOomB,GACL,IAAIhD,EAAepjB,KAAK8rB,UAExB,OADI1F,GAAUhD,EAAavc,UAAUuf,GAC9BhD,EAGT,OAAOgD,GAEL,OAAOpmB,ODvCP,cACIG,QAJI,KAAA+rB,WAAkB,GAClB,KAAApsB,QAAeE,KAMf,mBAAmBgG,GAEvB,OADAhG,KAAKksB,WAAalmB,EACXhG,KAED,SAASe,EAAoBiF,GAGnC,OADAhG,KADa,CAAE,WAAc,sBAAwBe,IACxCiF,GACNhG,KAGD,SAASmC,EAAiBrB,KAAewR,GAEjD,OADAnS,MAAMgB,QAAQc,KAAKjC,KAAMmC,EAASrB,KAASwR,GACpCtS,KAGT,QAAQmC,EAAiBrB,KAAewR,GACpC,IAAI,WAAE4Z,GAAelsB,KAKrB,OAJKmC,GAASsL,QAAQgB,KAAK,sDAAsDtM,sDAC7EA,KAAW+pB,EAAYA,EAAW/pB,GAASF,KAAKiqB,EAAY/pB,EAASrB,KAASwR,GAC7EtS,KAAKqpB,SAASpnB,KAAKjC,KAAMmC,EAASrB,KAASwR,GAEzCtS,OD1BX,YAAYsL,EAAe,IACvBnL,QAJI,KAAAgsB,MAAuB,IAAIhoB,IAK/B,IAAI,GAAEuF,GAAO4B,EAGb,OAFAtL,KAAK0J,GAAKA,EAEH1J,KAGX,KAAKoC,EAAgBZ,GACjB,IAAI,KAAET,EAAI,OAAEuB,GAAWF,EAInBqV,GAHQzX,KAAK2B,IAAIH,GACJV,OAEL,CACR,qBAAsB,GAAGd,KAAK0J,MAAMlI,KAAOT,IAC3C,iBAAkB,GAAGf,KAAK0J,QAAQ3I,IAClC,iBAAkB,MAAMS,KAAOT,IAC/B,aAAc,QAAQA,MAG1Bf,KAAKmB,QAAQsW,EAAM,sBAAuBnV,GAC1CtC,KAAKmB,QAAQsW,EAAM,kBAAmBnV,GACtCtC,KAAKmB,QAAQsW,EAAM,kBAAmBnV,GACtCtC,KAAKmB,QAAQsW,EAAM,cAAenV,GAEtC,MAAM8f,IACN,YAEA,IAAI5gB,GAEA,OADUxB,KAAKmsB,MAAM1qB,IAAID,GAI7B,IAAIA,GAEA,OADYxB,KAAKmsB,MAAMxqB,IAAIH,GAI/B,IAAIA,EAAUI,GAQV,OAPA5B,KAAKmsB,MAAMtqB,IAAIL,EAAKI,GACpB5B,KAAKmB,QAAQK,EAAKI,GAClB5B,KAAKmB,QAAQ,IAAKS,GAClB5B,KAAKmB,QAAQ,OAAQS,GACrB5B,KAAKmB,QAAQ,MAAMK,IAAOI,GACtBA,aAAiB,GAAOA,EAAMwqB,OAAO,CAAEjK,KAAO/f,GAAMpC,KAAKmiB,KAAK/f,EAAGZ,KAE9DxB,KAGX,OACI,IAAIqsB,EAAUvlB,MAAMC,KAAM/G,KAAKmsB,MAAME,WAAazb,EAAI,GACtD,IAAK,IAAKpP,EAAKI,KAAUyqB,EAASzb,EAAEpP,GAAOI,EAC3C,OAAOgP,EAGX,SACI,OAAO5Q,KAAKc,Q,YGzDpB,MAAM,WAAiB,EAOnB,YAAYwK,GACRnL,MAAM,CAAEuJ,GAAI,QAJT,KAAAhK,MAAmB,IAAI,KAmBtB,KAAA4sB,YAAelqB,IACnB,IAAI,KAAErB,EAAI,OAAEuB,GAAWF,GACjBmqB,cAAevmB,GAAahG,KAC9BD,EAASiG,EAASjF,GAElBhB,GAAQA,EAAOkC,KAAK+D,EAAU5D,IAnBlC,IAAI,SAAEhB,EAAQ,eAAEorB,EAAc,cAAEC,EAAa,aAAEC,GAAiBphB,EAC5DqhB,EAAe,IAAID,EAAa1sB,MAChC4sB,EAAiB,IAAIJ,EAAexsB,KAAM2sB,GAC1CJ,EAAgB,IAAIE,EAAczsB,KAAM2sB,GAG5C3sB,KAAKoB,SAAWA,EAChBpB,KAAK2sB,aAAeA,EACpB3sB,KAAK4sB,eAAiBA,EACtB5sB,KAAKusB,cAAgBA,EACrBvsB,KAAK8M,SAAS,aAAc8f,GAC5B5sB,KAAKosB,OAAO,CAAEjK,KAAMniB,KAAKssB,cAY7B,KAAKnqB,EAAiBrB,GAElB,OADAd,KAAKqpB,SAASlnB,EAASrB,GAChBd,MCtCf,MAAM,WAAiB,ICCvB,MAAM,WAAiB,ICIvB,IAAI,GAAW,IALf,cAAuB,EAAvB,c,oBACI,KAAC,gCAAkC,wCACnC,KAAC,2BAA6B,kCCMlC,MAAM,WCLN,MAEI,YAAsBQ,EAA8BqF,GAA9B,KAAArF,WAA8B,KAAAqF,IAEpD,CAAE,EAAE,uBAAwB1D,EAAiB8d,GACzC,IAAI,GAAEvW,GAAOuW,EACbxS,QAAQC,IAAI,8BAA+BhE,EAAIuW,GAC3C,CAAE,0BAA0B,GAAQvW,KACxC1J,KAAKQ,SAASya,KAAK9Y,EAAS8d,GAC5BjgB,KAAKQ,SAASW,QAAQ,EAAE,sBAAuB8e,GAC/CjgB,KAAKQ,SAASW,QAAQ,EAAE,mBAAoB8e,MDHhD,YAAYzf,EAAoBqF,GAC5B1F,MAAMK,EAAUqF,GAGpB,CAAE,GAAE,iCAAkC1D,EAAiBrB,GACnD,IAAI,GAAE4I,EAAE,MAAEwI,GAAUpR,GAChB,CAAE,KAAO,IAAQ4I,IAAM+D,QAAQC,IAAI,qBAAsB5M,EAAK4I,IAClE1J,KAAKQ,SAASqB,IAAIqQ,EAAOpR,GACzBd,KAAKQ,SAASya,KAAK9Y,EAASrB,IEXpC,MAAM,GAEF,YAAoBN,EAA4BqF,GAA5B,KAAArF,WAA4B,KAAAqF,IAC5C2M,WAAY,IAAMxS,KAAK0G,OAAQ,KAGnC,OACI,IAAImmB,EAAkB,IAAI,EAAM,CAAEnjB,GAAI,aAMtC1J,KAAKQ,SAASqB,IAAI,QALN,uPAMZ7B,KAAKQ,SAASqB,IAAI,OALP,CACP,KAAQ,CAAE,MAAS,OAAQ,KAAQ,WACnC,SAAY,yBAKhB7B,KAAKQ,SAASqB,IAAIgrB,EAASnjB,GAAImjB,GAC/B,CACI,CAAEnjB,GAAI,EAAG1G,KAAM,QACf,CAAE0G,GAAI,EAAG1G,KAAM,QACf,CAAE0G,GAAI,EAAG1G,KAAM,SACjBuC,QAAUic,GAAMqL,EAAShrB,IAAI2f,EAAExe,KAAMwe,IAG3C,IAAIpf,KAAmBkQ,GACnB,IAAI,KAAEvR,EAAI,OAAEuB,GAAWF,EACvBqL,QAAQC,IAAI,UAAW3M,EAAMuB,GAKjC,eAAiBF,GACbpC,KAAK0N,IAAItL,GAEb,oBAAsBA,GAClBpC,KAAK0N,IAAItL,EAAG,6BAEhB,iBAAmBA,GACfpC,KAAK0N,IAAItL,GAEb,gBAAkBA,GACdpC,KAAK0N,IAAItL,GAEb,SAAWA,GACPpC,KAAK0N,IAAItL,GAEb,EAAMA,GACFpC,KAAK0N,IAAItL,ICjDjB,MAAM,WCHN,MAII,YAAoB5B,GAChB,OADgB,KAAAA,WACTR,KAJX,YAAc,OAAOA,KAAKQ,SAASd,MACnC,eAAiB,OAAOM,KAAKQ,SAASY,SAMtC,GAAGe,GACC,OAAOnC,KAAKQ,SAASgI,GAAGrG,GAE5B,QAAQA,EAAiBrB,GACrB,OAAOd,KAAKQ,SAASW,QAAQgB,EAASrB,GAE1C,UAAUqB,EAAiBK,GACvB,OAAOxC,KAAKQ,SAASqG,UAAU1E,EAASK,GAE5C,YAAYL,EAAiBK,GACzB,OAAOxC,KAAKQ,SAASoiB,YAAYzgB,EAASK,GAE9C,OAAO4jB,GACH,OAAOpmB,KAAKQ,SAAS4rB,OAAOhG,GAEhC,OAAOA,GACH,OAAOpmB,KAAKQ,SAASssB,OAAO1G,MDjBpC,MAAM5X,WAAuB,GAGzB,YAAY9O,EAAkBc,GAE1B,OADAL,MAAMK,GAHH,KAAAusB,KAAY,GAIR/sB,MAKf,MAAM0O,WAAyB,GAE3B,YAAmB9O,EAAcY,GAE7B,OADAL,MAAMK,GADS,KAAAZ,UAERI,MEzBf,MAAMgtB,IACc,GAAAC,SAAmB,ICEvC,MACIA,SAAQ,IACRD,GAEJ,IAAIttB,GAAQ,IAAI,KAChB,MAAMwtB,GAEF,YAAoB/lB,EAAe,IAE/B,OAFgB,KAAAA,UAChBzH,GAAMoO,OAAO9N,KAAMmH,GACZnH,MAKf,SAAS8L,GAAUvK,EAAQqN,GACvB,IAAIhP,EAAU2B,EAEVT,GADWd,KAAK4L,SACJ,IAAIshB,GAActtB,EAAQuH,UAEtC4E,EAAOjL,EAAK,KAAa,GACzBqsB,EAAMphB,EAAKG,MAFN,YAGLxD,EAAW9I,EAAQ8I,SACnBuD,EAAa,GAEbG,EAAe,SAAsBC,EAAQvD,GACnBA,EAAMwD,aAAeD,GACvBP,GAAU7J,KAAKjC,KAAM8I,EAAO9I,OACtDyG,KAAKmI,EAAMhP,GAEPmM,IAAME,EAAakhB,EAAIrpB,IAAI8K,EAAK9C,UAAUrF,KAAKmI,EAAMhP,EAASkB,KACpEgG,MAAM7B,UAAUM,QAAQtD,KAAKyG,EAAU0D,GACvCH,EAAW1G,QAEX,SAAwB3C,GACpB,IAAKA,EAAW,OAChB,IAAI+L,EAAW/L,EAAU+L,SAAUye,EAAcze,EAASye,YACtDA,GAAaA,EAAYnrB,KAAK0M,IALHlI,KAAKmI,I,2UC/B5C,IAAaye,GAAb,MAGI,cAFQ,KAAAC,KAAe,GAIL,YAAYlrB,IAGC,cAAcA,MAPrC,IAAP,kB,4BAIiB,IAAjB,kBAAQ,U,iCAGsB,IAA9B,kBAAQ,uB,mCARAirB,GAAY,IADxB,kBAAQ,CAAErqB,KAAM,QAASsB,SAAU,MACvB+oB,I,2UCWb,MAAME,GAEF,YAAoB1nB,GAAA,KAAAA,IAIpB,OAEI,OAAO7F,MAMf,IAAM,GAAN,MAII,YAAoB6F,GAAA,KAAAA,IAHZ,KAAA7C,KAAY,GACb,KAAA0G,GAAa,IAgDN,KAAA8jB,SAAYprB,GAAmBA,EAAEE,OAAOoH,KAAO1J,KAAK0J,GA7C/C7F,EAASzB,GAAmBA,EAAEE,OAAOoH,KAAO1J,KAAK0J,IAIhE8I,WAAY,IAAMxS,KAAKgD,KAAO,WAAY,KAO9C,KAAKmE,GACDsG,QAAQC,IAAI,wBAAyBvG,GAGzC,yBAAyBwD,EAAUC,EAAQC,GACvC4C,QAAQC,IAAI,sCAAuC/C,EAAUC,EAAQC,GAG1D,UAAU6I,EAAKwM,GAC1BzS,QAAQC,IAAI,4BAA4BwS,gBAAkBxM,KAG5C,YAAYtR,GAC1BqL,QAAQC,IAAI,UAAWtL,GACvBpC,KAAKgD,KAAO,cACZwP,WAAY,IAAMxS,KAAKgD,KAAO,WAAY,KAG9C,KAAKZ,GACD,IAAI,KAAErB,EAAI,OAAEuB,GAAWF,EACnBrC,EAAS,CACT,CAAEC,KAAK6F,EAAEzE,SAAS,iCAAmCpB,KAAKytB,UAC3D1sB,GAEH0M,QAAQC,IAAI,SAAU3M,EAAMuB,GAC5BvC,GAAUyS,WAAY,IAAMzS,EAAOkC,KAAKjC,KAAMoC,GAAI,KAEtD,MAAMggB,IAGN,YAKqD,SAAShgB,GAC1D,IAAI,KAAErB,EAAI,OAAEuB,GAAWF,EACvBqL,QAAQC,IAAI,aAAc3M,EAAMuB,KApD5B,IAAP,kB,4BAuBc,IAAd,gBAAM,S,+BAIW,IAAjB,kBAAQ,U,iCAsBK,IAAb,eAAKuB,I,gCAC+C,IAApD,kBAAQ,+BAAgC,a,8BAnDvC,GAAS,IADd,kBAAQ,CAAEb,KAAM,WAAYsB,SAAU,4CACjC,IAgEN,IAAMopB,GAAN,MAEI,YAAoB7nB,GAAA,KAAAA,IAChB2M,WAAY,IAAMxS,KAAK2tB,OAAQ,KAC/Bnb,WAAY,IAAM3M,EAAE1E,QAAQ0E,EAAEzE,SAAS,mBAAoB,CAAE4e,OAAQ,QAAU,KAGnF,OACI,IAAI,EAAEna,GAAM7F,KACZ6F,EAAE1E,QAAQ0E,EAAEzE,SAAS,gCAAiC,CAAEsI,GAAI,IAAKwI,MAAO,MACxErM,EAAE1E,QAAQ0E,EAAEzE,SAAS,gCAAiC,CAAEsI,GAAI,IAAKwI,MAAO,QAV1Ewb,GAAc,IADnB,kBAAQ,CAAE1qB,KAAM,UAAWsB,SAAU,MAChCopB,IAeN,IAAIE,GAAM,IAAI,MAEV,YAAYrT,GAGR,YAAEgT,IAEF,YAAE,oBAAF,CAAqB,kBAErB,YAAEF,GAAF,CAAgB,GAAhB,CAA2BK,IAgB3B,MAAM,SACFT,GACAD,GAGJ,IACIrnB,EAAS,CACTnF,SAFW,IAAI,GAAS,CAAEY,SAAA,GAAUsrB,aADxC,QACsDF,eAAA,GAAgBC,cAAA,KAGlE7gB,SAAU,SAASqhB,KACnBphB,SAAU,mBACVC,aACAS,WAAY,CAAEC,SAAUgC,GAAgBvC,WAAY,KAGxDR,OAAOhJ,iBAAkB,OAAQ,IAAM,IAAEkD,OAAOA,MAIrD4f,GCrJH9X,QAAQC,IAAI,OAAQkgB,M","file":"main.bundle.d8941163c7764456dafa.js","sourcesContent":["\r\nfunction bootstrap(target) {\r\n    var element = target;\r\n    var selector = this.selector;\r\n    var data = element.dataset || {};\r\n    var ex = /[\\s]+/img;\r\n    var slug = data.behavior || element.v || '';\r\n    var components = slug.split(ex);\r\n    var children = element.children;// element.querySelectorAll(selector);\r\n    (this, document, data, slug, components, children);\r\n    \r\n    var resolveScope = function resolveScope(parent, child) {\r\n        var isDirectDescendant = (child.parentNode === parent);\r\n        if (isDirectDescendant) bootstrap.call(this, child);\r\n    }.bind(this, element);\r\n    \r\n    // components.forEach(this.bootstrap.bind(this, element));\r\n    // Array.prototype.forEach.call(children, resolveScope);\r\n    \r\n    // ... or? ...\r\n    \r\n    Array.prototype.forEach.call(children, resolveScope);  // TODO: Optimize!!!\r\n    if (!!slug) components.forEach(this.bootstrap.bind(this, element));\r\n}\r\n\r\nfunction $bootstrap(root, medium) {\r\n    var scopeSelector = '[data-behavior]'\r\n      , $root = $(root)\r\n      , $parent = $root.find(scopeSelector)\r\n      , hasBehavior = $root.is(scopeSelector)\r\n      ;\r\n    var slug = $root.attr('data-behavior')\r\n      , formattedSlug = slug && slug.replace(/^[,;\\s]+|[,;\\s]+$/g, '').replace(/[,;\\s]+/g, '|').replace(/[|]+$/g, '') || ''\r\n      , moduleIds = $.unique(formattedSlug.split('|')).sort()\r\n      , scopeId = moduleIds.join(' ')\r\n      ;\r\n    var childMedium = medium.$spawn(new function ChildScope() { this.element = root; });\r\n    \r\n\r\n    var resolveBehavior = function resolveBehavior(scope, behavior, i, a) {\r\n        var scope = ($root.is('html')) ? document : scope;\r\n        this.start(behavior, scope, scopeId, childMedium);\r\n    }.bind(this, $root[0]);\r\n\r\n    var resolveChildren = function resolveChildren(i, scope) {\r\n        var $firstScope = $(scope);\r\n        if (!$($firstScope.parent()).is($parent)) {\r\n            autoRegisterModules.call(this, $firstScope, childMedium);\r\n        }\r\n\r\n    }.bind(this);\r\n\r\n    moduleIds.forEach(resolveBehavior);\r\n    $parent.each(resolveChildren);\r\n\r\n}\r\n\r\nclass DefaultDirector {}\r\n\r\nfunction DefaultServicesSandbox(utils) { return utils; }\r\nfunction DefaultComponentSandbox(element) { return element; }\r\n\r\nexport { bootstrap, $bootstrap, DefaultDirector, DefaultServicesSandbox, DefaultComponentSandbox };\r\n","\r\n/**\r\n * @intention \r\n * @usage \r\n *  * var command = new Command(console, 'log');\r\n *  * command.execute('This gets logged by the console');\r\n */\r\nclass Command {\r\n    private context: any = null;\r\n    private action: string = '';\r\n        \r\n    constructor(context, action) {\r\n        this.context = context;\r\n        this.action = action;\r\n    }\r\n    \r\n    execute(...splat: any[]) {\r\n        var { context, action } = this;\r\n        var value = context[action](...splat);\r\n        return value;\r\n    }\r\n    \r\n}\r\n\r\nclass StrictCommand extends Command {\r\n    \r\n    public execute = (...splat: any[]) => super.execute(...splat);\r\n    \r\n}\r\n\r\nexport { Command, StrictCommand };\r\n","/**\r\n * THIS SHOULD ACTUALLY BE JUST AN EVENT-AGGREGATOR THAT CAN BE USED [PER USUAL] ACROSS\r\n * THE SYSTEM, WHILE A \"WebSocketDecorator\" CAN BE USED TO NORMALIZE THE EXTERNAL LIBRARY.\r\n */\r\nvar EventEmitter = EventTarget;\r\nclass EventHub extends EventEmitter {\r\n    \r\n    publish(channel, data) {\r\n        var e = new CustomEvent(channel, { detail: data });\r\n        this.dispatchEvent(e);\r\n        return this;\r\n    }\r\n    subscribe(channel, handler) {\r\n        this.addEventListener(channel, handler, false);\r\n        return this;\r\n    }\r\n    unsubscribe(channel, handler) {\r\n        this.removeEventListener(channel, handler, false);  // what is 3rd param again?\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { EventHub };\r\n","\r\nimport { Utilities } from \"@motorman/core/utilities\";\r\nimport { StrictCommand as Command } from \"@motorman/core/utilities/patterns/behavioral\";\r\n\r\ntype ListenerMap = { type: string, name: string, handler: (e: Event, ...splat: any[]) => any };\r\n\r\nclass ConstructorProxy {\r\n    private comm: any;\r\n    private Sandbox: any;\r\n    private element: HTMLElement;\r\n    private director: any;\r\n    public sandbox: any;\r\n\r\n    constructor({ comm, Sandbox, element, director }) {\r\n        this.comm = comm;\r\n        this.Sandbox = Sandbox;\r\n        this.element = element;\r\n        this.director = director;\r\n    }\r\n\r\n    construct(Target, args) {\r\n        var { Sandbox, comm, element, director } = this;\r\n        var sandbox = new Sandbox(element, director);\r\n        var params = [].concat(sandbox, 'extra');\r\n        var data = { type: 'construct', Target, args };\r\n        var result = Reflect.construct(Target, params /*, PrototypeConstructor*/);\r\n        \r\n        this.sandbox = sandbox;\r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:CONSTRUCT:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n    \r\n}\r\n\r\nclass MemberProxy {\r\n    private comm: any;\r\n    private source: any;\r\n    private element: HTMLElement;\r\n\r\n    constructor({ comm, source, element }) {\r\n        this.comm = comm;\r\n        this.source = source;\r\n        this.element = element;\r\n    }\r\n\r\n    has(target: any, key: any) {\r\n        var { source, comm } = this;\r\n        var data = { type: 'has', source, key };\r\n        var result = Reflect.has(source, key);\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:HAS:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n\r\n    get(target: any, key: any, receiver: any) {\r\n        // if (target[key].call) return new Proxy( target[key], new MethodProxy({ comm: this.comm, source: this.source, element: this.element }) );\r\n        var { source, comm, element } = this;\r\n        var data = { type: 'get', source, key };\r\n        var result = Reflect.get(source, key);  // omit receiver to get key of source\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:GET:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n\r\n    set(target: any, key: any, value: any, receiver: any) {\r\n        var { source, comm } = this;\r\n        var data = { type: 'set', source, key, value };\r\n        var result = Reflect.set(source, key, value);\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:SET:INVOKED'], data);\r\n        \r\n        return result\r\n    }\r\n\r\n    deleteProperty(target: Function, key: any) {\r\n        var { source, comm } = this;\r\n        var data = { type: 'delete', source, key };\r\n        var result = Reflect.deleteProperty(source, key);\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:DELETE:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nclass MethodProxy {\r\n    private comm: any;\r\n    private source: any;\r\n    private element: HTMLElement;\r\n\r\n    constructor({ comm, source, element }) {\r\n        this.comm = comm;\r\n        this.source = source;\r\n        this.element = element;\r\n    }\r\n\r\n    apply(target, thus, args) {\r\n        var { source, comm } = this;\r\n        var data = { type: 'apply', source, target, thus, args };\r\n        var result = target.call(source, ...args);\r\n        // var result = source[target.name](...args);\r\n        // var result = target.call(thus, ...args);\r\n        // var result = Reflect.apply(target, thus, args);\r\n        \r\n        comm.publish(comm.channels['PROXY:INVOKED'], data);\r\n        comm.publish(comm.channels['PROXY:APPLY:INVOKED'], data);\r\n        \r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nclass ProxyManager {  // sets up & manages proxy relationships\r\n    \r\n}\r\n\r\nclass Channels {\r\n    ['PROXY:INVOKED'] = 'vcomm://invoked/proxy';\r\n    ['PROXY:CONSTRUCT:INVOKED'] = 'vcomm://invoked/proxy/construct';\r\n    ['PROXY:HAS:INVOKED'] = 'vcomm://invoked/proxy/has';\r\n    ['PROXY:GET:INVOKED'] = 'vcomm://invoked/proxy/get';\r\n    ['PROXY:SET:INVOKED'] = 'vcomm://invoked/proxy/set';\r\n    ['PROXY:DELETE:INVOKED'] = 'vcomm://invoked/proxy/delete';\r\n    ['PROXY:APPLY:INVOKED'] = 'vcomm://invoked/proxy/apply';\r\n    ['PROXY:MOCK:INVOKED'] = 'vcomm://invoked/proxy/mock';\r\n}\r\nclass EventHub {\r\n    private target = new EventTarget();\r\n    public channels: Channels = new Channels();\r\n\r\n    constructor() {}\r\n\r\n    publish(channel: string, data?: any) {\r\n        var e = new CustomEvent(channel, { detail: data });\r\n        this.target.dispatchEvent(e);\r\n        return this;\r\n    }\r\n    subscribe(channel, handler) {\r\n        this.target.addEventListener(channel, handler, false);\r\n        return this;\r\n    }\r\n    unsubscribe(channel, handler) {\r\n        this.target.removeEventListener(channel, handler, false);\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nclass Comparitor {\r\n    public previous: any = undefined;\r\n    get name(): string { return this.attr.name; }\r\n    get current(): any { return this.component[ this.name ]; }\r\n    set current(value: any) { this.attr.value = value; }\r\n    get equal(): boolean { return this.detect(); }\r\n    get dirty(): boolean { return !this.equal; }\r\n    \r\n    constructor(private comm: EventHub, private component: any, private attr: Attr) {\r\n        var { name, value } = attr;\r\n        this.previous = value;\r\n        return this;\r\n    }\r\n    \r\n    detect() {\r\n        var { comm, name, previous, current } = this;\r\n        var equal = (previous === current);\r\n        var details = { name, previous, current, equal };\r\n        \r\n        if (!equal) comm.publish(comm.channels['ELEMENT:ATTRIBUTE:CHANGE'], details);\r\n        return equal;\r\n    }\r\n    \r\n    update() {\r\n        var { name, component } = this;\r\n        this.previous = this.current = component[name];\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\n\r\nclass ElementEngine {\r\n    \r\n    constructor(private Sandbox: any, private director: any) {}\r\n    \r\n    private composeCommand(component: any, name: string) {\r\n        var command = new Command(component, name);\r\n        return command;\r\n    }\r\n    private composeExecutor(component: any, name: string) {\r\n        var command = this.composeCommand(component, name), { execute } = command;\r\n        return execute;\r\n    }\r\n    private composeOperand(component: any, operator: Function, name: string) {\r\n        var execute = this.composeExecutor(component, name), operand = operator(execute);\r\n        return operand;\r\n    }\r\n    \r\n    private mapListener(component: any, item: any) {\r\n        var { type, name } = item;\r\n        var handler = this.composeExecutor(component, name), details = { type, name, handler };\r\n        return details;\r\n    }\r\n    private mapSubscription(component, pipes, { type, name, operators: ops }) {  // pipes:= { name: 'fn', operator: filter }[], ops:= Set<string>\r\n        var operators = pipes.filter( ({ name }) => ops.has(name) );  // eg: (new Set()).has(name)\r\n        var operands = operators.map( ({ name, operator }) => this.composeOperand(component, operator, name) );  // eg: filter( fn, this )\r\n        var data = { type, name, operators: operands };\r\n        \r\n        return data;\r\n    }\r\n    \r\n    private getConfig(Class, element) {\r\n        var { director, Sandbox } = this;\r\n        \r\n        var { observedAttributes = [], watchers = new Map() } = Class;\r\n        var { listeners = [] } = Class;\r\n        var { subscriptions = [], operators = [] } = Class;\r\n        var { template = '', pTemplate } = Class;\r\n        //\r\n        var comm = new EventHub();\r\n        var construction = new ConstructorProxy({ comm, Sandbox, element, director }); \r\n        var ClassProxy = new Proxy(Class, construction);\r\n        var component = new ClassProxy({ state: false });\r\n        var members = new MemberProxy({ comm, source: component, element });\r\n        var methods = new MethodProxy({ comm, source: component, element });\r\n        var proxy = new Proxy(component, members);\r\n        var properties = Object.getOwnPropertyNames(Class.prototype);\r\n        var methodBlacklist = { 'constructor': true, 'connectedCallback': true, 'attributeChangedCallback': true, 'disconnectedCallback': true, 'adoptedCallback': true };\r\n        \r\n        var listeners = listeners.map( (item) => this.mapListener(component, item) );  // map each handler to a handler bound to \"component\"\r\n        var subscriptions = subscriptions.map( (item) => this.mapSubscription(component, operators, item) );  // map each handler to a handler bound to \"component\"\r\n        \r\n        var surrogate = Object.create(proxy);  // use Object.create to carry over get|set; spread op fails to do so\r\n        for (let key in proxy) if (proxy[key].call) surrogate[key] = new Proxy(proxy[key], methods);\r\n        properties.forEach( (key) => { if (!!component[key] && component[key].call && !methodBlacklist[key]) surrogate[key] = new Proxy(component[key], methods); });\r\n        \r\n        var config = {  // TODO: create fn\r\n            comm,\r\n            director,\r\n            Sandbox,\r\n            Class,\r\n            ...{\r\n                sandbox: construction.sandbox,\r\n            },\r\n            ...{\r\n                template,\r\n                pTemplate,\r\n            },\r\n            ...{\r\n              observedAttributes,\r\n              watchers,  \r\n            },\r\n            ...{\r\n                listeners,\r\n            },\r\n            ...{\r\n                subscriptions,\r\n                operators,\r\n            },\r\n            ...{\r\n                component,\r\n                surrogate,\r\n            },\r\n        };\r\n        \r\n        return config;\r\n    }\r\n    \r\n    private prepare(Class) {\r\n        var thus = this;\r\n        var { observedAttributes = [] } = Class;\r\n        \r\n        return class Element extends HTMLElement {  // https://alligator.io/web-components/attributes-properties/\r\n            static observedAttributes: string[] = observedAttributes;  // native HTML Custom Elements\r\n            protected $utils: Utilities = new Utilities();\r\n            private config: any = thus.getConfig(Class, this);\r\n            private comm: EventHub = this.config.comm;\r\n            private $: any = this.config.sandbox;\r\n            private component: any = this.config.component;\r\n            private surrogate: any = this.config.surrogate;\r\n            private listeners: ListenerMap[] = this.config.listeners;\r\n            private subscriptions: any[] = this.config.subscriptions;\r\n            private operators: any[] = this.config.operators;\r\n            private $watchers: Map<string, any> = this.config.watchers;\r\n            private template: string = this.config.template;\r\n            private pTemplate: Promise<string> = this.config.pTemplate;\r\n            private $comparitors: Map<string, Comparitor> = new Map();\r\n            private handlers: any[] = [ ];\r\n            get comparitors(): Comparitor[] { return Array.from( this.$comparitors.values() ); }\r\n            get content(): string { return this.$utils.interpolate(this.template)(this.component); }\r\n            set content(value: string) { this.innerHTML = value; }\r\n            get attrs() { return observedAttributes; }\r\n            \r\n            constructor() {\r\n                super();\r\n                var { comm, component, listeners, subscriptions, operators, pTemplate } = this;\r\n                var { observedAttributes: attributes } = Element;\r\n                \r\n                this.bind(component, attributes, listeners, subscriptions);\r\n                this.init(this);\r\n                \r\n                pTemplate.then( (t) => this.template = t );\r\n                comm.subscribe(comm.channels['PROXY:INVOKED'], this.handleProxyInvokation);\r\n                comm.subscribe(comm.channels['PROXY:MOCK:INVOKED'], this.handleProxyInvokation);\r\n                \r\n                return this;\r\n            }\r\n    \r\n            private init({ component, dataset, attributes }: Element) {\r\n                this.initAttributes(this);\r\n                if (component.init) component.init(dataset);\r\n                return this;\r\n            }\r\n            private initAttributes({ component, attributes }: Element) {\r\n                for (let i = 0, len = attributes.length; i < len; i++) this.initAttribute(component, attributes[i], i, attributes);\r\n                return this;\r\n            }\r\n            private initAttribute(component, attribute: Attr, i?: number, attributes?: NamedNodeMap) {\r\n                var { attrs } = this;\r\n                var { name, value: attr } = attribute, value = component[name];\r\n                \r\n                if (!{ undefined: true, null: true, '': true }[ value ]) this.setAttribute(name, value);\r\n                // attribute.addEventListener('change', (e) => console.log('$$$$$$$$$$$', e), false);\r\n                // attribute.dispatchEvent( new CustomEvent('change', { detail: { name, value } }) );\r\n                this.initAttributeComparitors(component, attrs);\r\n                \r\n                return this;\r\n            }\r\n            \r\n            private initAttributeComparitors(component, attributes: string[]) {\r\n                for (let i = 0, len = attributes.length; i < len; i++) this.initAttributeComparitor(component, attributes[i], i, attributes);\r\n                return this;\r\n            }\r\n            private initAttributeComparitor(component, name: string, i, attrs: string[]) {\r\n                var { comm, component, attributes } = this;\r\n                var attr = attributes[name], comparitor = new Comparitor(comm, component, attr);\r\n                \r\n                this.$comparitors.set(name, comparitor);\r\n                return this;\r\n            }\r\n            \r\n            private bind(component: any, attributes: string[], listeners: ListenerMap[], subscriptions: ListenerMap[]) {\r\n                attributes.forEach( (k) => this.bindAttribute(component, k) );\r\n                listeners.forEach( (map) => this.bindListener(component, map) );\r\n                subscriptions.forEach( (map) => this.bindMessageHandler(component, map) );\r\n                \r\n                return this;\r\n            }\r\n            private unbind() {}\r\n            private bindAttribute(component: any, k: string) {\r\n                var descriptor = Object.getOwnPropertyDescriptor(Class.prototype, k)\r\n                  , descriptor = { ...descriptor }\r\n                  , { get, set } = descriptor\r\n                  ;\r\n                var value = this.getAttribute(k);\r\n                if (!value) this.setAttribute(k, component[k]);\r\n                if (descriptor.get && descriptor.set) descriptor = { get, set };\r\n                else if (!descriptor.get && !descriptor.set) descriptor = { get: () => this.getAttribute(k), set: (v) => this.setAttribute(k, v) };\r\n                else if (!descriptor.get && descriptor.set) descriptor = { get: () => this.getAttribute(k), set };\r\n                else if (descriptor.get && !descriptor.set) descriptor = { get, set: () => this.setAttribute(k, component[k]) };\r\n                Object.defineProperty(component, k, descriptor);\r\n                \r\n                return this;\r\n            }\r\n            \r\n            private bindListener(component: any, map: ListenerMap) {\r\n                var { type, handler } = map;\r\n                this.addEventListener(type, handler, false);\r\n            }\r\n            private unbindListener(component: any, map: ListenerMap) {\r\n                var { type, handler } = map;\r\n                this.removeEventListener(type, handler, false);\r\n            }\r\n            \r\n            private bindMessageHandler(component: any, map: any) {\r\n                var { type, name, operators } = map, { $ } = this, channel = $.channels[type];\r\n                $.in(channel).pipe(...operators).subscribe( (...splat) => component[name](...splat) );\r\n            }\r\n            private unbindMessageHandler(component: any, map: ListenerMap) {\r\n                var { type, handler } = map, { $ } = this;\r\n                // $.in(type).unsubscribe(handler);\r\n            }\r\n            \r\n            private inspectChildren(children: HTMLCollection) {  // #MutualRecursion\r\n                Array.prototype.forEach.call( children, (c, i, a) => this.inspectChild(c, i, a) );\r\n                return this;\r\n            }\r\n            private inspectChild(child: HTMLElement, i: number, children: HTMLCollection) {  // #MutualRecursion\r\n                var { attributes, children } = child;\r\n                \r\n                this.inspectChildAttributes(attributes);\r\n                if (children.length) this.inspectChildren(children);\r\n                \r\n                return this;\r\n            }\r\n            private inspectChildAttributes(attributes: NamedNodeMap) {\r\n                Array.prototype.forEach.call( attributes, (attr, i, attrs) => this.inspectChildAttribute(attr, i, attrs) );\r\n                return this;\r\n            }\r\n            private inspectChildAttribute(attr: Attr, i: number, attrs: NamedNodeMap) {\r\n                var { name, value, ownerElement: child } = attr;\r\n                // console.log('@CHILD ATTR', this.tagName, name, value, attr);\r\n                if ( this.isRefBinding(attr) ) this.setRefBinding(attr);\r\n                if ( this.isEventBinding(attr) ) this.$addEventListener(attr);\r\n                return this;\r\n            }\r\n            \r\n            private isRefBinding(attr: Attr): boolean {\r\n                var { name, value, ownerElement: element } = attr;\r\n                var is = !!this.getRefBinding(attr);\r\n                return is;\r\n            }\r\n            private getRefBinding(attr: Attr): string {\r\n                var { name, value, ownerElement: element } = attr;\r\n                var matches = name.match(/^#(.+)$/), [ match, id ] = !!matches && matches.length && matches || [];\r\n                return id;\r\n            }\r\n            private setRefBinding(attr: Attr) {\r\n                var { component } = this;\r\n                var { name, value, ownerElement: element } = attr;\r\n                var id = this.getRefBinding(attr);\r\n                component[id] = element;\r\n                // console.log('--------- %s %s %s %s %s %O %O', this.tagName, name, id, element.id, component[id].id, element, component[id]);\r\n                return this;\r\n            }\r\n            \r\n            private isEventBinding(attr: Attr): boolean {\r\n                var { ownerElement: element } = attr;\r\n                var type = this.getEventBindingName(attr), namespace = `on${type}`, has = !!(namespace in element);\r\n                return has;\r\n            }\r\n            private getEventBindingName(attr: Attr): any {\r\n                var { name, value, ownerElement: element } = attr;\r\n                var matches = name.match(/\\((\\w*)\\)/), [ match, type ] = !!matches && matches.length && matches || [];\r\n                return type;\r\n            }\r\n            private getEventBindingInvoker(attr: Attr): any {\r\n                var { component: c, comm } = this;\r\n                var { name, value } = attr;\r\n                var [ match, method, args ] = value.match(/(\\w*)\\((.*)\\)/);\r\n                var params = args.match(/([^,\\s]+)/g);\r\n                // var exe = Function.prototype.call.bind(c[method], c);\r\n                var exe = thus.composeExecutor(c, method);\r\n                // var op = `with($_) return eval(\"$_['${method}'](${args})\");`;\r\n                var op = `with($_) return eval(\"h(${args})\");`;\r\n                var fn = new Function('$_', 'h', '$event', op);\r\n                // var f = (e) => ( fn(c, exe, e), comm.publish(comm.channels['PROXY:MOCK:INVOKED'], { name, value, attr }) );  // <-- workaround\r\n                var f = (e) => fn(c, exe, e);\r\n                // var f = (e) => fn(c, e);\r\n                // setTimeout( () => exe({ type: 'TEST' }, 'test', 'blah'), (1000 * 12) );\r\n                // console.log('>>>>>>>>>>>>', method, c[method]);\r\n                // exe({ type: 'TEST' }, 'test', 'blah');\r\n                \r\n                return f;\r\n            }\r\n            \r\n            private $addEventListener(attr: Attr) {\r\n                var { handlers } = this;\r\n                var { name, value, ownerElement: element } = attr;\r\n                var type = this.getEventBindingName(attr), handler = this.getEventBindingInvoker(attr);\r\n                var cache = { name, value, element, type, handler };\r\n                \r\n                element.addEventListener(type, handler, false);\r\n                handlers.push(cache);\r\n                \r\n                return this;\r\n            }\r\n            private $removeEventListeners() {\r\n                var { handlers } = this;\r\n                for (let i = handlers.length; i--;) this.$removeEventListener(handlers[i], i, handlers);\r\n                return this;\r\n            }\r\n            private $removeEventListener(cache: any, i: number, caches: any[]) {\r\n                var { name, value, element, type, handler } = cache;\r\n                \r\n                element.removeEventListener(type, handler, false);\r\n                caches.splice(i, 1);\r\n                \r\n                return this;\r\n            }\r\n            \r\n            private getDirtyAttributeStates(comparitors: Comparitor[]): Comparitor[] {\r\n                var inequalities = comparitors.filter( (comparitor) => comparitor.dirty );\r\n                return inequalities;\r\n            }\r\n            \r\n            $draw() {\r\n                var { component, content } = this;\r\n                this.content = content;\r\n                this.inspectChildren(this.children);\r\n            }\r\n            $load() {\r\n                this.$unload();\r\n                this.$draw();\r\n            }\r\n            $unload() {\r\n                this.$removeEventListeners();\r\n            }\r\n            \r\n            // https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#Using_the_lifecycle_callbacks\r\n            connectedCallback() {\r\n                var { component, content } = this;\r\n                if (component.attachedCallback) component.connectedCallback();\r\n                this.$load();\r\n            }\r\n            attributeChangedCallback(attrName, oldVal, newVal) {\r\n                var { component, content, $watchers } = this;\r\n                var action = `[${attrName}]`, handler = component[action];\r\n                var any = `[*]`, all = component[any];\r\n                var $watcher = $watchers.get(attrName);\r\n                \r\n                if (component.attributeChangedCallback) component.attributeChangedCallback(attrName, oldVal, newVal);\r\n                if (all) all.call(component, attrName, oldVal, newVal);\r\n                if (handler) handler.call(component, newVal, oldVal);\r\n                if ($watcher) $watcher.handler.call(component, newVal, oldVal);\r\n                this.$load();\r\n            }\r\n            disconnectedCallback() {\r\n                var { component, listeners, subscriptions } = this;\r\n                if (component.detachedCallback) component.disconnectedCallback();\r\n                listeners.forEach( (map) => this.unbindListener(component, map) );\r\n                subscriptions.forEach( (map) => this.unbindMessageHandler(component, map) );\r\n                this.$unload();\r\n            }\r\n            adoptedCallback() {\r\n                var { component, content } = this;\r\n                if (component.adoptedCallback) component.adoptedCallback();\r\n                this.$load();\r\n            }\r\n            \r\n            private handleProxyInvokation = (e: CustomEvent) => {\r\n                var { component, attributes, content } = this;\r\n                var { type, detail } = e, { type: method } = detail;\r\n                var dirty = this.getDirtyAttributeStates(this.comparitors);\r\n                \r\n                dirty.forEach( ({ name }) => this.initAttribute(component, attributes[name]) );\r\n                this.$load();\r\n            };\r\n            \r\n        };\r\n    }\r\n    \r\n    define(name, Class, options?: any) {\r\n        if ( !!customElements.get(name) ) return this;\r\n        var Element = this.prepare(Class);\r\n        window.customElements.define(name, Element, options);\r\n        \r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { ElementEngine };\r\n","\r\nimport { Utilities, Deferred } from '@motorman/core/utilities';\r\nimport { bootstrap, $bootstrap, DefaultDirector, DefaultComponentSandbox, DefaultServicesSandbox } from './defaults';\r\nimport { ElementEngine } from './element-engine';\r\n\r\nvar director = new DefaultDirector();\r\nvar DEFAULT_CONFIG = {  // ... defaults\r\n    director,\r\n    selector: '[data-v]' || '[data-behavior]',\r\n    datasets: '[v-attribute]',  // includes <script type=\"application/json\"> { items: [...] } </scrpt>\r\n    bootstrap: bootstrap,\r\n    decorators: { services: DefaultServicesSandbox, components: DefaultComponentSandbox, },\r\n};\r\n\r\nclass Core {\r\n    private dConfiguration: Deferred<any> = new Deferred();\r\n    private pConfiguration: Promise<any> = this.dConfiguration.promise;\r\n    private dInitialization: Deferred<any> = new Deferred();\r\n    private pInitialization: Promise<any> = this.dInitialization.promise;\r\n    private utils: Utilities = new Utilities();\r\n    private engine: ElementEngine = new ElementEngine(DefaultComponentSandbox, director);\r\n    private services: any = { };\r\n    private components: any = { };\r\n    private elements: any = { };\r\n    private configuration: any = DEFAULT_CONFIG;\r\n    \r\n    constructor() {\r\n        var { pInitialization, elements } = this;\r\n        \r\n        pInitialization\r\n            .then( (options) => console.log('INIT', options) )\r\n            ;\r\n        this.pConfiguration\r\n            .then( (config) => this.dInitialization.resolve({ target: document }) )\r\n            ;\r\n        return this;\r\n    }\r\n    \r\n    init(options) {\r\n        if (!options) throw Error(\"Vertices Core initialized without options\");\r\n        this.arm(options);\r\n        // this.registerComponent = this.utils.noop;\r\n        // this.registerService = this.utils.noop;\r\n        // this.dInitialization.resolve(options);\r\n        \r\n        return this;\r\n    }\r\n    \r\n    configure(config) {\r\n        this.utils.extend(this.configuration, config);\r\n        this.engine = new ElementEngine(this.configuration.decorators.components, this.configuration.director);\r\n        this.dConfiguration.resolve(this.configuration);\r\n        return this.utils.extend({ }, this.configuration);\r\n    }\r\n    registerService(Service) {\r\n        var id = Service.constructor;\r\n        var service = { id, Constructor: Service };\r\n        this.services[id] = this.services[id] || service;\r\n        \r\n        return this;\r\n    }\r\n    registerComponent(id, Component) {\r\n        var component = { id, Constructor: Component };\r\n        this.components[id] = this.components[id] || component;\r\n        return this;\r\n    }\r\n    define(definition) {\r\n        var { name, Class, options } = definition;\r\n        var { dConfiguration } = this, { promise: pConfiguration } = dConfiguration;\r\n        \r\n        pConfiguration\r\n            .then( (config) => this.engine.define(name, Class, options) )\r\n            ;\r\n        return this;\r\n    }\r\n    \r\n    arm(options) {  // automatically register modules\r\n        var config = this.configuration\r\n          , bootstrap = config.bootstrap\r\n          , target = options.target\r\n          ;\r\n        \r\n        this.startServices();\r\n        bootstrap.call(config, target, this);\r\n    }\r\n    \r\n    startServices() {\r\n        var config = this.configuration, decorators = config.decorators;\r\n        for (var id in this.services) this.startService(this.services[id], id, this.services);\r\n        return this;\r\n    }\r\n    private startService(_service, id, services) {\r\n        var { configuration, utils } = this, { director, decorators } = configuration;\r\n        var { services: ServiceSandbox = DefaultServicesSandbox } = decorators;\r\n        var Service = _service.Constructor\r\n          , sandbox = new ServiceSandbox(utils, director)\r\n          , service = new Service(sandbox)\r\n          ;\r\n        service.init();\r\n    }\r\n    \r\n    /**\r\n     * Gets called by this.configuration.bootstrap\r\n     * TODO: Rename `details` to `api` and provide an API for mapping, starting, stopping & destroying (etc) modules.\r\n     */\r\n    bootstrap(element, data, id) {\r\n        if (!element || !id) return null;\r\n        if (!this.components[id]) return this.utils.console.warn(\"Unregistered Component: \" + id) && null || null;\r\n        \r\n        var { configuration: config } = this\r\n          , { director, decorators } = config\r\n          , { components: ComponentSandbox = DefaultComponentSandbox } = decorators\r\n          ;\r\n        var component = this.components[id]\r\n          , Component = component.Constructor\r\n          , sandbox = new ComponentSandbox(element, director)\r\n          , instance = new Component(sandbox)\r\n          , data = data || { }\r\n          ;\r\n        var details = {\r\n            id: id,\r\n            instance: instance,\r\n            element: element,\r\n            data: data,\r\n        };\r\n        instance.init(data);\r\n        \r\n        return details;\r\n    }\r\n    \r\n}\r\n\r\nexport { Core };\r\n","\r\nimport { Core } from './core';\r\n\r\n\r\nvar Facade = function Facade(core) {\r\n    var thus = this;\r\n    \r\n    function configure() {\r\n        return core.configure.apply(core, arguments);\r\n    }\r\n    function service(Service) {\r\n        core.registerService.apply(core, arguments);\r\n        return this;\r\n    }\r\n    function element(definition) {\r\n        core.define(definition);\r\n        return this;\r\n    }\r\n    function component(id, Directive) {\r\n        core.registerComponent.apply(core, arguments);\r\n        return this;\r\n    }\r\n    \r\n    function register(item, Class) {\r\n        var type = { 'string': 'component', 'function': 'service', 'object': item.type }[ typeof item ];\r\n        this[type].call(this, item, Class);\r\n        return this;\r\n    }\r\n    \r\n    function bootstrap(options) {\r\n        core.init(options);\r\n        return this;\r\n    }\r\n    \r\n    // export precepts\r\n    this.utils = core.utils;\r\n    this.config = configure;\r\n    this.service = service;\r\n    this.element = element;\r\n    this.component = component;\r\n    this.register = register;\r\n    this.bootstrap = bootstrap;\r\n    \r\n    return this;\r\n};\r\n\r\n/**\r\n * API\r\n */\r\nvar Vertex = new (function Vertices(Core, Facade) {\r\n    \r\n    var V = Facade.call( function V() {\r\n        if (this instanceof V) return ( new Vertices(Core, Facade) );\r\n        return V.register.apply(V, arguments);\r\n    }, new Core() );\r\n    \r\n    return V;\r\n})(Core, Facade);\r\n\r\nexport { Vertex };\r\n","\r\nvar path = require('path');\r\nvar callsite = require('callsite');\r\n\r\nvar DEFAULT_DESCRIPTOR = { writable: true, configurable: true, enumerable: true };\r\n\r\nfunction Element(details: any, options?: any): any {\r\n    // console.log('@ Element', details.name);\r\n    var stack = callsite(), requester = stack[1].getFileName();\r\n    var details = { ...details, options, type: 'element' };\r\n    var { template = '', lazy = 'undefined' } = details;\r\n    var location = path.join( requester, template );\r\n    var pTemplate: Promise<string> = {\r\n        'undefined': () => Promise.resolve(template),  // promise whatever was provided\r\n        // 'false': () => require(location),  // promise template from path (compiletime)\r\n        // 'true': () => import(location),  // promise template from path (runtime)\r\n        // 'fetch': () => fetch(location),  // is this any different than require() or import() ?\r\n    }[ lazy ]();  // use as function so that require() and import() don't automatically run\r\n    \r\n    return function get(Class: any): any {\r\n        Class.template = template;\r\n        Class.pTemplate = pTemplate;\r\n        return { ...details, Class };\r\n    };\r\n}\r\n\r\nfunction Service() {}\r\n\r\nfunction attr(attr?: string): any {\r\n    \r\n    return function get(target: any, name: string, descriptor: any = {}): any {\r\n        var { constructor } = target;\r\n        var { get, set } = descriptor, hasGetOrSet = !!(get || set);\r\n        var descriptor = { ...descriptor };\r\n        \r\n        if (!hasGetOrSet) descriptor.writable = true;\r\n        constructor.observedAttributes = constructor.observedAttributes || [ ];\r\n        constructor.observedAttributes.push(name);\r\n        \r\n        return descriptor;\r\n    };\r\n}\r\nfunction watch(attr: string): any {\r\n    \r\n    return function get(target: any, name: string, descriptor: any): any {\r\n        var { constructor } = target;\r\n        var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n        var { value: handler } = descriptor;\r\n        \r\n        constructor.watchers = constructor.watchers || new Map();\r\n        constructor.watchers.set(attr, { attr, name, handler });\r\n        \r\n        return descriptor;\r\n    };\r\n}\r\n\r\nfunction handler(type: string, selector?: string): any {  // TODO: rename to \"event\"\r\n    \r\n    return function get(target: any, name: string, descriptor: any): any {\r\n        var { constructor } = target;\r\n        var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n        var { value: handler } = descriptor;\r\n        \r\n        constructor.listeners = constructor.listeners || [ ];\r\n        constructor.listeners.push({ type, name, handler });\r\n        \r\n        return descriptor;\r\n    };\r\n}\r\n\r\nfunction message(channel: string, operators?: any|any[]): any {\r\n    var pipes = [].concat(operators), ops = new Set(pipes);\r\n    \r\n    return function get(target: any, name: string, descriptor: any): any {\r\n        var { constructor } = target;\r\n        var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n        var { value } = descriptor;\r\n        \r\n        constructor.subscriptions = constructor.subscriptions || [ ];\r\n        constructor.subscriptions.push({ type: channel, name, value, operators: ops });\r\n        \r\n        return descriptor;\r\n    };\r\n}\r\nfunction pipe(operator: any): any {  // rename to @operand so that @pipes/@filters can be used for views like Angular\r\n    \r\n    return function get(target: any, name: string, descriptor: any): any {\r\n        var { constructor } = target;\r\n        var descriptor = { ...descriptor, ...DEFAULT_DESCRIPTOR };\r\n        \r\n        constructor.operators = constructor.operators || [ ];\r\n        constructor.operators.push({ operator, name });\r\n        \r\n        return descriptor;\r\n    };\r\n}\r\n\r\nfunction cashe$(options: any = {}): any {\r\n    return function get(): any {};\r\n}\r\nfunction casheP(options: any = {}): any {\r\n    return function get(): any {};\r\n}\r\n\r\nexport { Element };\r\nexport { attr, watch };\r\nexport { handler };\r\nexport { message, pipe };\r\n","\r\nexport { Vertex as V } from './core';\r\nexport { Element, attr, watch, handler, message, pipe } from './core';\r\n","\r\nvar CSV = new class CSV {\r\n    \r\n    // JSON.stringify(value[, replacer[, space]])\r\n    stringify(collection, fields, delimiter) {  // Word Art Cloud: wordToWeight() & weightToWord()\r\n        /**\r\n         * Given: map.get(fields[i]).push( collection[j][ fields[i] ] )\r\n         * Then: every column (fields[i]) contains an equal number of values as any other column.\r\n         * Because: map.get(fields[i])[0] === collection[j][ fields[i] ]\r\n         */\r\n        var $table = new Map();  // Map { 0 => { a, b, c, ... } }\r\n        var $values = new Map();  // Map { a => [ x, y, z, ... ] }\r\n        var $lines = new Map();  // Map { 0 => [ x, y, z, ... ] }\r\n        var matrix = [ ];  // [ [a,b,c,...], [a,b,c,...], ... ]\r\n        var lines = [ ];\r\n        var span = 0;\r\n        \r\n        if (!fields) fields = Object.keys( collection.reduce( (o, x) => ({ ...o, ...x }), { } ) );  // gets all available keys across all objects in collection\r\n        \r\n        for (let i = 0, width  = collection.length; i < width;  i++)\r\n        for (let j = 0, height = fields.length;     j < height; j++)\r\n\t\t(function create(value, [x, y], row, i, rows, col, j, columns) {\r\n            var _id = x, field = col;\r\n            var record = $table.get(_id) || { _id };\r\n            var column = $values.get(col) || [ ];\r\n            var line = $lines.get(x) || [ ];\r\n            \r\n            if ({ 'undefined': true }[ value ]) value = '';\r\n            matrix[x] = matrix[x] || [ ];\r\n            matrix[x][y] = record[field] = column[x] = line[y] = value;\r\n            \r\n            $table.set(_id, record);  // ensure gets set first time\r\n            $values.set(col, column);  // ensure gets set first time\r\n            $lines.set(x, line);  // ensure gets set first time\r\n            \r\n            span = Math.max.apply(null, [ span, col.length, `${value}`.length ]);\r\n            lines[x] = line.join(',');\r\n            \r\n        })(collection[i][ fields[j] ], [i, j], collection[i], i, collection, fields[j], j, fields);\r\n        \r\n        var tabs = Array.apply(null, { length: span });\r\n        var delimiter = {\r\n            '\\t': tabs.map( () => '\\t' ),\r\n            '\\s': tabs.map( () => '\\s' ),\r\n            'undefined': [ ],\r\n        }[ delimiter ].join('');\r\n        var columns = fields.join(',');\r\n        var csv = [ columns ].concat(lines).join('\\n');\r\n        var csv = csv.replace(/,/img, `,${delimiter}`);\r\n        \r\n        return csv;\r\n    }\r\n    \r\n    parse(csv) {\r\n        var lines = csv.split(/\\n+/img), [ fields ] = lines, fields = fields.split(/,\\t*/), rows = lines.slice(1);\r\n\t\tvar collection = rows.reduce( getObject.bind(this, fields), [ ] );\r\n        \r\n        function getObject(fields, array, line, row, lines) {\r\n            var o = fields.reduce( getValue.bind(this, line), { } );\r\n            array.push(o);\r\n            \r\n            function getValue(line, o, key, i, fields) {\r\n                var values = line.split(/,\\s*/), value = values[i], datum = { [key]: value };\r\n                return { ...o, ...datum };\r\n            }\r\n            \r\n            return array;\r\n        }\r\n        \r\n\t\treturn collection;\r\n    }\r\n    \r\n};\r\n\r\n/**\r\n * @ URLComponents\r\n */\r\nclass URLComponents {\r\n    hash: string = '';\r\n    host: string = '';\r\n    hostname: string = '';\r\n    href: string = '';\r\n    origin: string = '';\r\n    pathname: string = '';\r\n    port: string = '';\r\n    protocol: string = '';\r\n    search: string = '';\r\n    \r\n    constructor(url) {\r\n        var parser = document.createElement('a');\r\n        parser.href = url;\r\n\r\n        this.hash = parser.hash;\r\n        this.host = parser.host;\r\n        this.hostname = parser.hostname;\r\n        this.href = parser.href;\r\n        this.origin = parser.origin;\r\n        this.pathname = parser.pathname;\r\n        this.port = parser.port;\r\n        this.protocol = parser.protocol;\r\n        this.search = parser.search;\r\n\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nclass ParameterMap {\r\n    name: string = '';\r\n    value: string = '';\r\n    \r\n    constructor(str) {\r\n        var pair = str.split('=');\r\n        this.name = pair[0];\r\n        this.value = pair[1];\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nclass QueryMap {\r\n    \r\n    constructor(q) {\r\n        var query = decodeURIComponent(q);\r\n        var exp = /[^\\?|\\&]([^=]+)\\=([^&]+)/g;\r\n        var res = query.match(exp);\r\n\r\n        for (var i = 0, len = res.length; i < len; i++) {\r\n            var map = new ParameterMap(res[i]);\r\n            this[map.name] = map.value;\r\n        }\r\n\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nclass Utilities {\r\n    CSV: any = CSV;\r\n    console: any = console;\r\n    \r\n    constructor() {\r\n        return this;\r\n    }\r\n      \r\n    noop() {}\r\n    \r\n    extend(object, first?, ...more) {\r\n        var o = Object.keys(first).reduce( (o, k) => (o[k] = first[k], o), object );\r\n        if (more.length) return this.extend(object, ...more);\r\n        return o;\r\n    }\r\n    \r\n    is(value) {\r\n        var isnt = { null: true, undefined: true, '': true, 0: false }[ value ];\r\n        return !isnt;\r\n    }\r\n    \r\n    timeout(handler, ...splat) {\r\n        var cancel = window.setTimeout(handler, ...splat);\r\n        return cancel;\r\n    }\r\n    \r\n    enqueue(handler, ...splat) {\r\n        var result = this.timeout(handler, 0, ...splat);\r\n        return result;\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @intention\r\n     *  * Leverage global.setTimeout for intervals instead of global.setInterval.\r\n     * @patterns { Curry }\r\n     * @usage \r\n     *  * var clear = utils.interval( () => console.log('called!'), 1000 );\r\n     *  * setTimeout(clear, (1000 * n) );  // clears interval after n seconds\r\n     */\r\n    interval(handler, delay, ...splat) {\r\n        var thus = this, timeout = thus.timeout(set, delay, ...splat);\r\n        \r\n        function set(...params) {\r\n            if ( !timeout ) return console.log('break');  // > -1\r\n            handler.call(this, ...params);\r\n            timeout = thus.timeout(set, delay, ...splat);\r\n        }\r\n        function clear() {\r\n            clearTimeout(timeout);\r\n            timeout = null;\r\n            return !timeout;  // assert is cleared\r\n        }\r\n        \r\n        return clear;\r\n    }\r\n    \r\n    debounce(fn, delay) {  // # thx Remy Sharp\r\n        var timer = null;\r\n        \r\n        function _debounce(...splat) {\r\n            var context = this;\r\n            clearTimeout(timer);\r\n            timer = setTimeout( () => fn.call(context, ...splat), delay);\r\n        };\r\n        \r\n        return _debounce;\r\n    }\r\n    \r\n    throttle(fn, threshhold, scope) {  // # thx Remy Sharp\r\n        var threshhold = threshhold || 250, last, deferTimer;\r\n        \r\n        function _throttle(...splat) {\r\n            var context = scope || this, now = +(new Date()), last = now, final = (last + threshhold);\r\n            var invoke = () => ( fn.call(context, ...splat), last = now );\r\n            \r\n            if (!last || now >= final) return invoke();  // don't hold on to it\r\n            clearTimeout(deferTimer);\r\n            deferTimer = setTimeout(invoke, threshhold);\r\n        };\r\n        \r\n        return _throttle;\r\n    }\r\n    \r\n    uuid() {\r\n        function replace(c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n        }\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, replace);\r\n    }\r\n        \r\n    escapeHTML(s) {\r\n        return s.replace(/[&\"<>]/g, function (c) {\r\n            return {\r\n                '&': '&amp;',\r\n                '\"': '&quot;',\r\n                '<': '&lt;',\r\n                '>': '&gt;'\r\n            }[c];\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @ THX: Douglas Crockford (String.prototype.supplant)\r\n     * @ INTERPOLATE\r\n     */\r\n    interpolate(str) {\r\n        return (o) => {\r\n            return str.replace(/{([^{}]*)}/g, (a, b) => {\r\n                var val = ''+o[b];\r\n                return this.escapeHTML(val);  // TODO: escape HTML-Entities\r\n            });\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @ THX: Douglas Crockford (String.prototype.supplant)\r\n     * @ INSECURE_INTERPOLATE\r\n     */\r\n    INSECURE_INTERPOLATE(str) {\r\n        return function interpolate(o) {\r\n            return str.replace(/{([^{}]*)}/g, function (a, b) {\r\n                var val = ''+o[b];\r\n                return val;  // TODO: escape HTML-Entities\r\n            });\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * @ EXTERPOLATE | PARSE ROUTE-URI\r\n     */\r\n    exterpolate(str) {\r\n        var str = str || '';\r\n        var re = /:[^\\s/]+|{+[^\\s/]+}+/g;\r\n        var matcher = new RegExp(str.replace(re, '([\\\\w-]+)'));\r\n\r\n        return function getValues(string) {\r\n            if (!string.match(matcher)) return false;\r\n            var string = string || '';\r\n            var result = string.match(matcher);\r\n            var keys = str.match(re);\r\n            var values = result.slice(1);\r\n            var map = {};\r\n\r\n            if (keys && values) {\r\n                for (var i = 0, len = keys.length; i < len; i++) {\r\n                    var key = keys[i].replace(/[:{}]+/g, '');\r\n                    var val = values[i];\r\n                    if (key !== val) map[key] = val;\r\n                }\r\n            }\r\n\r\n            return map;\r\n        };\r\n    }\r\n    \r\n    parseURL(url) {\r\n        var a = document.createElement('a');\r\n        a.href = url;\r\n        \r\n        return {\r\n            hash: a.hash,\r\n            host: a.host,\r\n            hostname: a.hostname,\r\n            href: a.href,\r\n            origin: a.origin,\r\n            pathname: a.pathname,\r\n            port: a.port,\r\n            protocol: a.protocol,\r\n            search: a.search,\r\n        };\r\n    }\r\n    \r\n    sortByKey(k, a, b) {  // Sort by Multiple keys (Reusable) using sortByKey()\r\n        // USAGE:\r\n        // var sort = sortByKey.bind(collection, 'x');\r\n        // collection.sort(sort);\r\n        if (a[k] > b[k]) return  1;\r\n        if (a[k] < b[k]) return -1;\r\n        return 0;\r\n    }\r\n    \r\n    // Sort by Multiple keys (Reusable + Optimized) using Methods-Array\r\n    priorityMethodSort(methods, a, b) {\r\n        // USAGE:\r\n        // var sort = prioritySort.bind(collection, [ sort$A, sort$B, sort$C, sort$D ]);\r\n        // collection.sort(sort);\r\n        var i = 0, methods = Array.prototype.slice.call(methods || [ ], 0);\r\n        while (i === 0 && methods.length) i = methods.shift().call(this, a, b);\r\n        return i;\r\n    }\r\n    \r\n    priorityKeySort(keys, a, b) {  // Sort by Multiple keys (Reusable + Optimized) using Reusable prioritySort()\r\n        // USAGE:\r\n        // var sort = prioritySort.bind(collection, [ 'a', 'b', 'c', 'd' ]);\r\n        // collection.sort(sort);\r\n        // console.log('>', collection);\r\n        // >  [\r\n        //       { \"a\": 0, \"b\": 0, \"c\": 0, \"d\": 0 },\r\n        //       { \"a\": 0, \"b\": 1, \"c\": 2, \"d\": 2 },\r\n        //       { \"a\": 0, \"b\": 1, \"c\": 2, \"d\": 3 },\r\n        //       { \"a\": 1, \"b\": 1, \"c\": 1, \"d\": 1 },\r\n        //       { \"a\": 1, \"b\": 2, \"c\": 2, \"d\": 1 },\r\n        //       { \"a\": 1, \"b\": 2, \"c\": 3, \"d\": 1 },\r\n        //       { \"a\": 2, \"b\": 2, \"c\": 2, \"d\": 2 },\r\n        //       { \"a\": 3, \"b\": 3, \"c\": 3, \"d\": 3 }\r\n        //    ]\r\n        var i = 0, keys = Array.prototype.slice.call(keys || [ ], 0);\r\n        while (i === 0 && keys.length) i = this.sortByKey.call(this, keys.shift(), a, b);\r\n        return i;\r\n    }\r\n    \r\n    getFileSize(size, unit = 'auto') {  // size: number, unit: 'auto'|'byte'|'KB'|'MG'|'GB'|'TB'|'PB'\r\n        var $ = this.toFixed.bind(this);\r\n        var $bytes = $(size || 0), $KB = $($bytes / 1024), $MB = $($KB / 1024), $GB = $($MB / 1024), $TB = $($GB / 1024), $PB = $($TB / 1024);\r\n        var bytes = `${$bytes} bytes`, KB = `${$KB} KB`, MB = `${$MB} MB`, GB = `${$GB} GB`, TB = `${$TB} TB`, PB = `${$PB} PB`;\r\n        var $auto = $bytes;\r\n        var auto;\r\n        var values = { bytes, KB, MB, GB, TB, PB, auto: undefined };\r\n        var result = { unit: '', value: Infinity };\r\n        var datasets = [\r\n        { unit: 'bytes', value: $bytes },\r\n        { unit: 'KB', value: $KB },\r\n        { unit: 'MB', value: $MB },\r\n        { unit: 'GB', value: $GB },\r\n        { unit: 'TB', value: $TB },\r\n        { unit: 'PB', value: $PB },\r\n        ];\r\n        while ( (result.value / 1024) >= 1 && datasets.length ) result = datasets.shift();\r\n        values.auto = `${result.value} ${result.unit}`;\r\n        \r\n        \r\n        \r\n        return values[unit];\r\n    }\r\n    \r\n    toFixed(n) { return Number( Math.round(+(n + 'e2')) + 'e-2' ); }\r\n    \r\n    exists(n) { return !!~n; }\r\n    \r\n}\r\n\r\nexport { Utilities };\r\n","\r\n/**\r\n * @name: Deferred Promise\r\n * @intention\r\n *  * Externalize the function of a Promise's \"Executor\" parameters so that fulfillment & rejection\r\n *  * can be performed at a later time.\r\n */\r\nclass Deferred<T> {\r\n    private _resolve: Function = () => {};\r\n    private _reject: Function = () => {};\r\n    public promise: Promise<T> = new Promise<T>( this.exe.bind(this) );\r\n        \r\n    constructor() {}\r\n    \r\n    private exe(resolve, reject) {\r\n        this._resolve = resolve;\r\n        this._reject = reject;\r\n    }\r\n    \r\n    resolve(data) {\r\n        this._resolve(data);\r\n        return this.promise;\r\n    }\r\n    reject(data) {\r\n        this._reject(data);\r\n        return this.promise;\r\n    }\r\n    \r\n}\r\n\r\nexport { Deferred };\r\n","\r\nexport { Utilities } from './utilities';\r\nexport { keycodes } from './keycodes';\r\n// export { patterns } from './patterns';\r\n// export { ds } from './ds';\r\nexport { Deferred } from './patterns/other/deferred';\r\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\nmodule.exports = function(){\n  var orig = Error.prepareStackTrace;\n  Error.prepareStackTrace = function(_, stack){ return stack; };\n  var err = new Error;\n  Error.captureStackTrace(err, arguments.callee);\n  var stack = err.stack;\n  Error.prepareStackTrace = orig;\n  return stack;\n};\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = {};\n\nfunction modulesToDom(moduleId, list, options) {\n  for (var i = 0; i < list.length; i++) {\n    var part = {\n      css: list[i][1],\n      media: list[i][2],\n      sourceMap: list[i][3]\n    };\n\n    if (stylesInDom[moduleId][i]) {\n      stylesInDom[moduleId][i](part);\n    } else {\n      stylesInDom[moduleId].push(addStyle(part, options));\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (moduleId, list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  moduleId = options.base ? moduleId + options.base : moduleId;\n  list = list || [];\n\n  if (!stylesInDom[moduleId]) {\n    stylesInDom[moduleId] = [];\n  }\n\n  modulesToDom(moduleId, list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    if (!stylesInDom[moduleId]) {\n      stylesInDom[moduleId] = [];\n    }\n\n    modulesToDom(moduleId, newList, options);\n\n    for (var j = newList.length; j < stylesInDom[moduleId].length; j++) {\n      stylesInDom[moduleId][j]();\n    }\n\n    stylesInDom[moduleId].length = newList.length;\n\n    if (stylesInDom[moduleId].length === 0) {\n      delete stylesInDom[moduleId];\n    }\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    for (var i = 0; i < modules.length; i++) {\n      var item = [].concat(modules[i]);\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\r\nimport { Element, attr, watch, handler, message } from '@motorman/vertices';\r\nimport { Sandbox } from '@motorman/core';\r\n\r\nclass SingletonComponentRequest { constructor(options: any = {}) {} }  // MOCK/TEMP\r\n\r\nclass BackdropRequest extends SingletonComponentRequest {\r\n    id: string = '';\r\n    \r\n    constructor(options: any = {}) {\r\n        super(options);\r\n        var { id } = options;\r\n        this.id = id || this.id;\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\n@Element({ name: 'v-backdrop' })\r\nexport class BackdropComponent {\r\n    @attr() active: boolean = false;\r\n    @attr() options: any = { };\r\n    public request: BackdropRequest = new BackdropRequest({});\r\n    \r\n    constructor(private $: Sandbox) {}\r\n    \r\n    @watch('options') watchOptions(val, old) {\r\n        console.log('>', val, old);\r\n    }\r\n    \r\n    @handler('click') handleInteraction(e: Event) {\r\n        var { $, request } = this;\r\n        $.publish($.channels['BACKDROP:INSPECTED'], request);\r\n    }\r\n    \r\n    @message('BACKDROP:REQUESTED') handleRequest(e: CustomEvent) {\r\n        var { type, detail } = e, request = new BackdropRequest(detail);\r\n        console.log('@ BackdropComponent', type, detail);\r\n        this.request = request;\r\n        this.active = true;\r\n    }\r\n    \r\n    @message('BACKDROP:DISMISSED') handleDismissed(e: CustomEvent) {\r\n        var { type, detail } = e;\r\n        console.log('@ BackdropComponent', type, detail);\r\n        this.active = false;\r\n    }\r\n    \r\n}\r\n","\r\n/**\r\n * @name:\r\n * @intention\r\n *  * \r\n */\r\nclass Dictionary extends Map {\r\n        \r\n    constructor(map) {\r\n        super();\r\n        return this;\r\n    }\r\n    \r\n    private serialize(object) {\r\n        var json = JSON.stringify(object);\r\n        return json;\r\n    }\r\n    private deserialize(json) {\r\n        var object = JSON.parse(json);\r\n        return object;\r\n    }\r\n    private copy(object) {\r\n        var json = this.serialize(object), object = this.deserialize(json);\r\n        return object;\r\n    }\r\n    private static fromMap(map: any) {\r\n        var keys = Object.keys(map), pairs = keys.reduce( pair.bind(this, map), [] );\r\n        \r\n        function pair(map, pairs, key, i, keys) {\r\n            var value = map[key], pair = [ key, value ];\r\n            pairs.push(pair);\r\n            return pairs;\r\n        }\r\n        \r\n        return pairs;\r\n    }\r\n    private toMap(entries) {\r\n        var map = { };\r\n        for (let [ key, value ] of entries) map[key] = value;\r\n        return map;\r\n    }\r\n    \r\n    toJSON() {\r\n        return this.valueOf();\r\n    }\r\n    toString() {\r\n        var json = this.serialize( this.valueOf() );\r\n        return json;\r\n    }\r\n    valueOf() {\r\n        return this.toMap( this.entries() );\r\n    }\r\n    \r\n}\r\n\r\nexport { Dictionary };\r\n","\r\n/**\r\n * @name: Queue\r\n * @intention\r\n *  * FIFO (First-In, First-Out)\r\n */\r\nclass Queue<T> {\r\n    private data: T[] = [ ];\r\n    get length() { return this.size(); }\r\n    get index() { return 0; }\r\n    \r\n    constructor(data: T[] = []) {\r\n        this.clear();\r\n        this.data = [ ...data ];\r\n        return this;\r\n    }\r\n    \r\n    private serialize(object) {\r\n        var json = JSON.stringify(object);\r\n        return json;\r\n    }\r\n    private deserialize(json) {\r\n        var object = JSON.parse(json);\r\n        return object;\r\n    }\r\n    private copy(object) {\r\n        var json = this.serialize(object), object = this.deserialize(json);\r\n        return object;\r\n    }\r\n    \r\n    enqueue(value) {\r\n        this.data.push(value);\r\n        return this;\r\n    }\r\n    dequeue() {\r\n        var value = this.data.shift();\r\n        return value;\r\n    }\r\n    front() {\r\n        var value = this.data[this.index];\r\n        return value;\r\n    }\r\n    clear() {\r\n        this.data.length = 0;\r\n        return this;\r\n    }\r\n    size() {\r\n        var value = this.data.length;\r\n        return value;\r\n    }\r\n    isEmpty() {\r\n        var is = !this.size();\r\n        return is;\r\n    }\r\n    \r\n    toJSON() {\r\n        return this.valueOf();\r\n    }\r\n    toString() {\r\n        var json = this.serialize( this.valueOf() );\r\n        return json;\r\n    }\r\n    valueOf() {\r\n        return this.data.slice(0);\r\n    }\r\n    \r\n}\r\n\r\nexport { Queue };\r\n","\r\nimport { Queue } from '@motorman/core/utilities/ds';\r\nimport { V, Element, attr, watch, handler, message, pipe } from '@motorman/vertices';\r\nimport { Sandbox } from '@motorman/core';\r\nimport template from './modal.component.html';\r\n\r\nclass SingletonComponentRequest { constructor(options: any = {}) {} }  // MOCK/TEMP\r\n\r\nclass ModalRequest extends SingletonComponentRequest {\r\n    id: string = '';\r\n    template: string = '';  // <template id=\"selector\">\r\n    \r\n    constructor(options: any = {}) {\r\n        super(options);\r\n        var { id } = options;\r\n        this.id = id || this.id;\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\n@Element({\r\n    name: 'v-modal',\r\n    template,\r\n    // template: './modal.component.html',\r\n    // lazy: !true,  // tells Vertices to expect a url\r\n})\r\nclass ModalComponent {\r\n    @attr() options: any = { };\r\n    // @attr() get options() { return new Function(`return ${value};`); }\r\n    //         set options(value: string) { this.config = `${value}`; }\r\n    @attr() get active(): boolean { return !this.requests.isEmpty(); }\r\n    //         set active(value: boolean) {  }\r\n    //         set active(value: boolean) { if (!value) this.requests.dequeue(); }\r\n    protected requests: Queue<ModalRequest> = new Queue();\r\n    get request(): ModalRequest { return this.requests.front(); }\r\n    // @attr() ['onclick']: Function = () => {};\r\n    \r\n    constructor(private $: Sandbox) {}\r\n    \r\n    // @handler('click', '.close.icon') handleClique(e: Event) {  // needs option for selector?\r\n    //     var { $, requests } = this;\r\n    //     console.log('@modal # click', e);\r\n    // }\r\n    \r\n    handleClique(e, active, adHoc) {\r\n        var { $, requests } = this;\r\n        console.log('\\n\\n @event', e.type, active, adHoc, '\\n\\n');\r\n        requests.dequeue();\r\n        $.publish($.channels['BACKDROP:DISMISSED'], { test: true });\r\n    }\r\n    \r\n    @message('MODAL:REQUESTED') handleRequest(e: CustomEvent) {\r\n        var { $, requests } = this;\r\n        var { type, detail }: { type: string, detail: ModalRequest } = e;\r\n        requests.enqueue(detail);\r\n        $.publish($.channels['BACKDROP:REQUESTED'], { test: true });\r\n    }\r\n    \r\n    @message('MODAL:DISMISSED') handleDismissed(e: CustomEvent) {\r\n        var { $, requests } = this;\r\n        var { type, detail } = e;\r\n        console.log('@ ModalComponent', type, detail);\r\n        requests.dequeue();\r\n    }\r\n    \r\n}\r\n\r\nexport { ModalComponent };\r\n","export default \"\\r\\n<div #container id=\\\"test\\\" class=\\\"vertices modal\\\">\\r\\n    <div class=\\\"modal container\\\" (click)=\\\"handleClique($event, active, 'other')\\\">Modal ({container.id}) is active: {active}</div>\\r\\n</div>\\r\\n\";","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./main.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(module.id, content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body{background:#ddd}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n","\r\nimport { Environment } from '@motorman/models';\r\n\r\nvar environment = new Environment({\r\n    type: 'PROD',\r\n});\r\n\r\nexport { environment };\r\n","\r\nclass Environment {\r\n    type: string = '';\r\n    get production() { return !!{ 'production': true }[ this.type ]; }\r\n    \r\n    constructor(options: any = { }) {\r\n        var { type } = options;\r\n        \r\n        this.type = type || this.type;\r\n        \r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { Environment };\r\n","\r\nclass Channels {\r\n    ['BACKDROP:REQUESTED'] = 'v://requested/backdrop';\r\n    ['BACKDROP:INSPECTED'] = 'v://inspected/backdrop';\r\n    ['BACKDROP:DISMISSED'] = 'v://dismissed/backdrop';\r\n    ['MODAL:REQUESTED'] = 'v://requested/modal';\r\n    ['MODAL:DISMISSED'] = 'v://dismissed/modal';\r\n}\r\n\r\nvar channels = new Channels();\r\nexport { Channels, channels };\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map\n","/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\nimport { noop } from './noop';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nexport function canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar QueueAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\nexport { QueueAction };\n//# sourceMappingURL=QueueAction.js.map\n","/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Action } from './Action';\nvar AsyncAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map\n","var Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map\n","/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */\nimport { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\nexport var queue = /*@__PURE__*/ new QueueScheduler(QueueAction);\n//# sourceMappingURL=queue.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar QueueScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\nexport { QueueScheduler };\n//# sourceMappingURL=QueueScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport var EMPTY = /*@__PURE__*/ new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nexport var NotificationKind;\n/*@__PURE__*/ (function (NotificationKind) {\n    NotificationKind[\"NEXT\"] = \"N\";\n    NotificationKind[\"ERROR\"] = \"E\";\n    NotificationKind[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\nexport { Notification };\n//# sourceMappingURL=Notification.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeToArray } from '../util/subscribeToArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return scheduleArray(input, scheduler);\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n//# sourceMappingURL=throwError.js.map\n","/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { isScheduler } from '../util/isScheduler';\nimport { fromArray } from './fromArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n        return scheduleArray(args, scheduler);\n    }\n    else {\n        return fromArray(args);\n    }\n}\n//# sourceMappingURL=of.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) {\n        delay = 0;\n    }\n    return function observeOnOperatorFunction(source) {\n        return source.lift(new ObserveOnOperator(scheduler, delay));\n    };\n}\nvar ObserveOnOperator = /*@__PURE__*/ (function () {\n    function ObserveOnOperator(scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    ObserveOnOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n    };\n    return ObserveOnOperator;\n}());\nexport { ObserveOnOperator };\nvar ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        var destination = this.destination;\n        destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nexport { ObserveOnSubscriber };\nvar ObserveOnMessage = /*@__PURE__*/ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\nexport { ObserveOnMessage };\n//# sourceMappingURL=observeOn.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { queue } from './scheduler/queue';\nimport { Subscription } from './Subscription';\nimport { ObserveOnSubscriber } from './operators/observeOn';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nvar ReplaySubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) {\n            bufferSize = Number.POSITIVE_INFINITY;\n        }\n        if (windowTime === void 0) {\n            windowTime = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\nvar ReplayEvent = /*@__PURE__*/ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n//# sourceMappingURL=ReplaySubject.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","\r\nimport { Reactive as Mediator } from '../mediator';\r\n\r\n\r\nclass Store extends Mediator {\r\n    private $data: Map<any, any> = new Map();\r\n    public id: string;\r\n\r\n    constructor(options: any = {}) {\r\n        super();\r\n        var { id } = options;\r\n        this.id = id;\r\n\r\n        return this;\r\n    }\r\n\r\n    next(e: CustomEvent, key: any) {\r\n        var { type, detail } = e;\r\n        var child = this.get(key)\r\n          , data = child.data()\r\n          ;\r\n        var paths = {\r\n            'parent/child/datum': `${this.id}/${key}/${type}`,\r\n            'parent/*/datum': `${this.id}/*/${type}`,\r\n            '**/child/datum': `**/${key}/${type}`,\r\n            '**/*/datum': `**/*/${type}`,\r\n        };\r\n        \r\n        this.publish(paths['parent/child/datum'], detail);\r\n        this.publish(paths['parent/*/datum'], detail);\r\n        this.publish(paths['**/child/datum'], detail);\r\n        this.publish(paths['**/*/datum'], detail);\r\n    }\r\n    error(error: Error) {}\r\n    complete() {}\r\n\r\n    has(key: any) {\r\n        var has = this.$data.has(key);\r\n        return has;\r\n    }\r\n\r\n    get(key: any) {\r\n        var value = this.$data.get(key);\r\n        return value;\r\n    }\r\n\r\n    set(key: any, value: any) {\r\n        this.$data.set(key, value);\r\n        this.publish(key, value);\r\n        this.publish('*', value);\r\n        this.publish('**/*', value);\r\n        this.publish(`**/${key}`, value);\r\n        if (value instanceof Store) value.attach({ next: (e) => this.next(e, key) });\r\n        \r\n        return this;\r\n    }\r\n\r\n    data() {\r\n        var entries = Array.from( this.$data.entries() ), o = { };\r\n        for (let [key, value] of entries) o[key] = value;\r\n        return o;\r\n    }\r\n\r\n    toJSON() {\r\n        return this.data();\r\n    }\r\n\r\n}\r\n\r\nexport { Store };\r\n","\r\nimport { IEventAggregator } from '../eventaggregator.interface';\r\nimport { Reactive as EventHub } from '../eventhub';\r\n\r\n\r\nclass Mediator extends EventHub implements IEventAggregator {\r\n    private publishers: any = { };\r\n    private context: any = this;\r\n    \r\n    constructor() {\r\n        super();\r\n    }\r\n    \r\n    private registerPublishers(handlers: any) {\r\n        this.publishers = handlers;\r\n        return this;\r\n    }\r\n    protected register(type: 'publishers', handlers: any) {\r\n        var action = { 'publishers': 'registerPublishers' }[ type ];\r\n        this[action](handlers);\r\n        return this;\r\n    }\r\n  \r\n    protected dispatch(channel: string, data?: any, ...more: any[]) {\r\n      super.publish.call(this, channel, data, ...more);\r\n      return this;\r\n    }\r\n    \r\n    publish(channel: string, data?: any, ...more: any[]) {\r\n        var { publishers } = this;\r\n        if (!channel) console.warn(`Mediator.publish expected a channel-value but got \"${channel}\". Please check the spelling of your channel-key.`);\r\n        if (channel in publishers) publishers[channel].call(publishers, channel, data, ...more);\r\n        else this.dispatch.call(this, channel, data, ...more);\r\n        \r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { Mediator };\r\n","\r\n// https://stackblitz.com/edit/rxjs-mediator-with-operators?file=index.ts\r\nimport { of, from } from 'rxjs';\r\nimport { Observable, Subject, BehaviorSubject, ReplaySubject } from 'rxjs';\r\nimport { map, filter, last } from 'rxjs/operators';\r\n//\r\nimport { ISubscriber } from '../subscriber.interface';\r\nimport { IEventAggregator } from '../eventaggregator.interface';\r\n\r\nclass EventHub implements IEventAggregator {\r\n  private initializations: object = { errors: 0 };\r\n  private initialized: CustomEvent = new CustomEvent('$initialized', { detail: this.initializations });\r\n  public channels$: ReplaySubject<CustomEvent> = new ReplaySubject(1);\r\n\r\n  in(channel: string): Observable<CustomEvent> {\r\n    var filterChannel = filter( (o: CustomEvent) => channel === o.type )\r\n      , mapData = map( (o: CustomEvent) => o )\r\n      ;\r\n    var subscription = this.channels$.pipe(filterChannel).pipe(mapData);\r\n\r\n    return subscription;\r\n  }\r\n  \r\n  publish(channel: string, data: any = {}, ...more: any[]): IEventAggregator {\r\n    var event = new CustomEvent(channel, { detail: data });\r\n    this.channels$.next(event);\r\n    return this;\r\n  }\r\n\r\n  subscribe(channel: string, handler?: (data?: any) => {}): Observable<CustomEvent> {\r\n    var subscription = this.in(channel);\r\n    if (handler) subscription.subscribe(handler);\r\n    return subscription;\r\n  }\r\n\r\n  unsubscribe(channel: string, handler: (data?: any) => {}): IEventAggregator {\r\n    // this.channels$.unsubscribe();\r\n    return this;\r\n  }\r\n\r\n  attach(observer: ISubscriber): Observable<CustomEvent> {\r\n    var subscription = this.channels$;\r\n    if (observer) subscription.subscribe(observer);\r\n    return subscription;\r\n  }\r\n  \r\n  detach(observer: ISubscriber) {\r\n    // this.channels$.unsubscribe();\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\nexport { EventHub };\r\n","\r\nimport { IEventAggregator } from '../eventaggregator.interface';\r\nimport { IDirectorOptions } from './options.interface';\r\nimport { Reactive as Store } from '../store';\r\nimport { Utilities } from '../utilities';\r\n\r\n\r\nclass Director extends Store implements IEventAggregator {\r\n    private dependencies: IDirectorOptions;\r\n    private actionHandlers: any;\r\n    private stateHandlers: any;\r\n    public utils: Utilities = new Utilities();\r\n    public channels: any;\r\n\r\n    constructor(options: IDirectorOptions) {\r\n        super({ id: 'app' });\r\n        var { channels, ActionHandlers, StateHandlers, Dependencies } = options;\r\n        var dependencies = new Dependencies(this);\r\n        var actionHandlers = new ActionHandlers(this, dependencies)\r\n          , stateHandlers = new StateHandlers(this, dependencies)\r\n          ;\r\n        \r\n        this.channels = channels;\r\n        this.dependencies = dependencies;\r\n        this.actionHandlers = actionHandlers;\r\n        this.stateHandlers = stateHandlers;\r\n        this.register('publishers', actionHandlers);\r\n        this.attach({ next: this.handleState });\r\n    }\r\n\r\n    private handleState = (e: CustomEvent) => {\r\n        var { type, detail } = e;\r\n        var { stateHandlers: handlers } = this;\r\n        var action = handlers[type];\r\n\r\n        if (action) action.call(handlers, e);\r\n        // else setTimeout( () => console.log('@ OBSERVED STATE', type, detail), (1000 * 10) );\r\n    };\r\n\r\n    emit(channel: string, data?: any) {\r\n        this.dispatch(channel, data);\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nexport { Director };\r\n","\r\nimport { Director as CommonDirector } from '@motorman/core';\r\n\r\nclass Director extends CommonDirector {}\r\n\r\nexport { Director };\r\n","\r\nimport { Director as CommonDirector } from '@motorman/vertices/director';\r\n\r\n\r\nclass Director extends CommonDirector {}\r\n\r\nexport { Director };\r\n","\r\nimport { Channels as CommonChannels } from '@motorman/vertices/director';\r\n\r\nclass Channels extends CommonChannels {\r\n    ['JOHN:WILL:LIKE:THIS:STRATEGY'] = 'app://preferred-by-john/this/strategy';\r\n    ['SOMETHING:ELSE:HAPPENED'] = 'app://happened/something/else';\r\n}\r\n\r\nvar channels = new Channels();\r\n\r\nexport { Channels, channels };\r\n","\r\nimport { ActionHandlers as CommonHandlers } from '@motorman/vertices/director';\r\nimport { channels as e } from '../channels';\r\nimport { Director } from '../director';\r\n\r\nclass Dependencies {\r\n    public stats: Console = console;\r\n\r\n    constructor(private Director: Director) {}\r\n}\r\n\r\nclass ActionHandlers extends CommonHandlers {\r\n    \r\n    constructor(director: Director, $: Dependencies) {\r\n        super(director, $);\r\n    }\r\n    \r\n    [ e['JOHN:WILL:LIKE:THIS:STRATEGY'] ](channel: string, data: { id: number, datum: string }) {\r\n        var { id, datum } = data;\r\n        if ({ '999': true }[ id ]) console.log('@ Director: Caught', data.id);\r\n        this.director.set(datum, data);\r\n        this.director.emit(channel, data);\r\n    }\r\n    \r\n}\r\n\r\nexport { ActionHandlers };\r\n","\r\nimport { channels as e } from '../channels';\r\nimport { Director } from '../director';\r\n\r\n\r\nclass Dependencies {}\r\nclass ActionHandlers {\r\n    \r\n    constructor(protected director: Director, protected $: Dependencies) {}\r\n    \r\n    [ e['BACKDROP:INSPECTED'] ](channel: string, request: any) {\r\n        var { id } = request;\r\n        console.log('V:Director; modal dismissed', id, request);\r\n        if ({ 'some:nondismissable:ui': true }[ id ]) return;\r\n        this.director.emit(channel, request);\r\n        this.director.publish(e['BACKDROP:DISMISSED'], request);\r\n        this.director.publish(e['MODAL:DISMISSED'], request);\r\n    }\r\n    \r\n}\r\n\r\nexport { ActionHandlers };\r\n","\r\nimport { Reactive as Store } from '@motorman/core/store';\r\nimport { Director } from '../director';\r\n\r\nclass Dependencies {\r\n    public stats: Console = console;\r\n\r\n    constructor(private Director: Director) {}\r\n}\r\n\r\nclass StateHandlers {\r\n    \r\n    constructor(private director: Director, private $: Dependencies) {\r\n        setTimeout( () => this.init(), (1000 * 2) );\r\n    }\r\n    \r\n    init() {\r\n        var settings: Store = new Store({ id: 'settings' });\r\n        var token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwiaWF0IjoxNTE2MjM5MDIyLCJ1c2VyIjp7Im5hbWUiOnsiZmlyc3QiOiJDb2R5IiwibGFzdCI6IkNhcmxzb24ifSwidXNlcm5hbWUiOiJvdG9jYXJsc29uQGdtYWlsLmNvbSJ9fQ._XjXROxwEV6iJTsgkTVjVfJt4K-ojw8IbHzvkauqfFU';\r\n        var user = {\r\n            \"name\": { \"first\": \"Cody\", \"last\": \"Carlson\" },\r\n            \"username\": \"otocarlson@gmail.com\"\r\n        };\r\n        this.director.set('token', token);\r\n        this.director.set('user', user);\r\n        // this.in('settings[bbbb]').subscribe(this.handleState);\r\n        this.director.set(settings.id, settings);\r\n        [\r\n            { id: 0, name: 'aaaa' },\r\n            { id: 1, name: 'bbbb' },\r\n            { id: 2, name: 'cccc' },\r\n        ].forEach( (d) => settings.set(d.name, d) );\r\n    }\r\n    \r\n    log(e: CustomEvent, ...more: any[]) {\r\n        var { type, detail } = e;\r\n        console.log('@ STATE', type, detail);\r\n    }\r\n\r\n    // 'token': log,\r\n    // 'user': log,\r\n    ['app/settings'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n    ['app/settings/aaaa'](e: CustomEvent) {\r\n        this.log(e, '<-- specifically targeted');\r\n    }\r\n    ['app/settings/*'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n    ['**/settings/*'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n    ['**/*/*'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n    ['A'](e: CustomEvent) {\r\n        this.log(e);\r\n    }\r\n\r\n}\r\n\r\nexport { StateHandlers };\r\n","\r\nimport { Reactive as CommonSandbox } from '@motorman/core/sandbox';\r\nimport { Utilities } from '@motorman/core/utilities';\r\nimport { Director, ActionHandlers, StateHandlers, channels } from './director';\r\n\r\n// class Dependencies {};  // mock\r\n// var director = new Director({ channels, Dependencies, ActionHandlers, StateHandlers });\r\n\r\nclass Sandbox extends CommonSandbox {\r\n    \r\n}\r\n\r\nclass ServiceSandbox extends Sandbox {\r\n    public http: any = { };\r\n    \r\n    constructor(utils: Utilities, director: Director) {\r\n        super(director);\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nclass ComponentSandbox extends Sandbox {\r\n    \r\n    constructor(public element: any, director: Director) {\r\n        super(director);\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nexport { Sandbox, ServiceSandbox, ComponentSandbox };\r\n","\r\nimport { ISubscriber } from '../subscriber.interface';\r\nimport { Reactive as Director, IDirectorOptions } from '../director';\r\n\r\n\r\nclass Sandbox {\r\n    get utils() { return this.director.utils; }\r\n    get channels() { return this.director.channels; }\r\n\r\n    constructor(private director: Director) {\r\n        return this;\r\n    }\r\n\r\n    in(channel: string) {\r\n        return this.director.in(channel);\r\n    }\r\n    publish(channel: string, data?: any) {\r\n        return this.director.publish(channel, data);\r\n    }\r\n    subscribe(channel: string, handler: () => {}) {\r\n        return this.director.subscribe(channel, handler);\r\n    }\r\n    unsubscribe(channel: string, handler: () => {}) {\r\n        return this.director.unsubscribe(channel, handler);\r\n    }\r\n    attach(observer: ISubscriber) {\r\n        return this.director.attach(observer);\r\n    }\r\n    detach(observer: ISubscriber) {\r\n        return this.director.detach(observer);\r\n    }\r\n\r\n}\r\n\r\nexport { Sandbox };\r\n","\r\nclass CONSTANTS {\r\n    static readonly SELECTOR: string = 'v';\r\n}\r\n\r\nexport { CONSTANTS };\r\n","\r\nimport { Utilities } from '@motorman/core/utilities';\r\nimport { CONSTANTS } from './constants';\r\n\r\nconst {\r\n    SELECTOR,\r\n} = CONSTANTS;\r\n\r\nvar utils = new Utilities();\r\nclass DataDecorator {\r\n    \r\n    constructor(private dataset: any = {}) {\r\n        utils.extend(this, dataset);\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\nfunction bootstrap(target, core) {\r\n    var element = target;\r\n    var selector = this.selector;\r\n    var data: any = new DataDecorator(element.dataset);\r\n    var ex = /[\\s]+/img;\r\n    var slug = data[SELECTOR] || '';\r\n    var ids = slug.split(ex);\r\n    var children = element.children;// element.querySelectorAll(selector);\r\n    var components = [ ];\r\n    \r\n    var resolveScope = function resolveScope(parent, child) {\r\n        var isDirectDescendant = (child.parentNode === parent);\r\n        if (isDirectDescendant) bootstrap.call(this, child, this);\r\n    }.bind(core, element);\r\n    \r\n    if (!!slug) components = ids.map(core.bootstrap.bind(core, element, data));\r\n    Array.prototype.forEach.call(children, resolveScope);  // TODO: Optimize!!!\r\n    components.forEach( mountComponent.bind(core) );\r\n    \r\n    function mountComponent(component) {\r\n        if (!component) return;\r\n        var instance = component.instance, handleMount = instance.handleMount;\r\n        if (handleMount) handleMount.call(instance);\r\n    }\r\n    \r\n}\r\n\r\nexport { bootstrap };\r\n","\r\nimport { Element, attr, handler, message } from '@motorman/vertices';\r\n\r\n@Element({ name: 'x-app', template: `` })\r\nexport class AppComponent {\r\n    @attr() prop: string = '';\r\n    \r\n    constructor() {}\r\n    \r\n    @handler('click') handleClick(e: Event) {\r\n        \r\n    }\r\n    @message('SOMETHING:HAPPENED') handleMessage(e: CustomEvent) {\r\n        \r\n    }\r\n    \r\n}\r\n","\r\nimport { filter } from 'rxjs/operators';\r\n//\r\nimport { Environment } from '@motorman/models';\r\nimport { V, Element, attr, watch, handler, message, pipe } from '@motorman/vertices';\r\nimport { BackdropComponent } from '@motorman/vertices/sdk/components/backdrop/backdrop.component';\r\nimport { ModalComponent } from '@motorman/vertices/sdk/components/modal/modal.component';\r\n//\r\nimport { environment } from '../environments/environment';\r\nimport { ServiceSandbox, ComponentSandbox as Sandbox } from './core';\r\nimport { Director, ActionHandlers, StateHandlers, channels } from './core';\r\nimport { CONSTANTS, bootstrap } from './core';\r\nimport { AppComponent } from './app.component';\r\n\r\n\r\nclass TestService {\r\n            \r\n    constructor(private $: ServiceSandbox) {\r\n        // console.log('@ TestService', $);\r\n    }\r\n    \r\n    init() {\r\n        // console.log('@ TestService # init', this.$);\r\n        return this;\r\n    }\r\n    \r\n}\r\n\r\n@Element({ name: 'v-custom', template: `<h2>This is a template for {name}</h2>` })\r\nclass Component {\r\n    @attr() name: any = '';\r\n    public id: number = +'998';\r\n    \r\n    constructor(private $: Sandbox) {\r\n        var filterId = filter( (e: CustomEvent) => e.detail.id === this.id )\r\n          // , latest = last()\r\n          ;\r\n        // console.log('@ v-custom', $.element, $.element.template);\r\n        setTimeout( () => this.name = 'CLICK ME', (1000 * 3) );\r\n        // $.attach(this);\r\n        // $.in($.channels['JOHN:WILL:LIKE:THIS:STRATEGY']).pipe(filterId).subscribe(this.handleId);\r\n        // $.in($.channels['JOHN:WILL:LIKE:THIS:STRATEGY']).pipe(latest).subscribe(this.handleId);\r\n        // setTimeout( () => $.attach(this), (1000 * 2) );\r\n    }\r\n    \r\n    init(dataset: DOMStringMap) {\r\n        console.log('@ Component # dataset', dataset);\r\n    }\r\n    \r\n    attributeChangedCallback(attrName, oldVal, newVal) {\r\n        console.log('@ Custom # attributeChangedCallback', attrName, oldVal, newVal);\r\n    }\r\n    \r\n    @watch('name') watchName(val, old) {\r\n        console.log(`@v-custom: this.name was ${old} and is now ${val}`);\r\n    }\r\n    \r\n    @handler('click') handleClick(e: Event) {\r\n        console.log('# click', e);\r\n        this.name = 'now-this!!!';\r\n        setTimeout( () => this.name = 'CLICK ME', (1000 * 3) );\r\n    }\r\n    \r\n    next(e: CustomEvent) {\r\n        var { type, detail } = e;\r\n        var action = {\r\n            [ this.$.channels['JOHN:WILL:LIKE:THIS:STRATEGY'] ]: this.handleId,\r\n        }[ type ];\r\n        \r\n        console.log('@ next', type, detail);\r\n        action && setTimeout( () => action.call(this, e), (1000 * 5) );\r\n    }\r\n    error(error: any) {\r\n        // console.log('@ SomeComponent # error()', error);\r\n    }\r\n    complete() {\r\n        // console.log('@ SomeComponent # complete()');\r\n    }\r\n    \r\n    @pipe(filter) filterId = (e: CustomEvent) => e.detail.id === this.id;\r\n    @message('JOHN:WILL:LIKE:THIS:STRATEGY', 'filterId') handleId(e: CustomEvent) {\r\n        var { type, detail } = e;\r\n        console.log('@ handleId', type, detail);\r\n    }\r\n    \r\n    // public handleLatest = (e: CustomEvent) => {\r\n    //   var { type, detail } = e;\r\n    //   console.log('@ handleLatest', type, detail);\r\n    // };\r\n    \r\n}\r\n\r\n@Element({ name: 'v-other', template: `` })\r\nclass OtherComponent {\r\n    \r\n    constructor(private $: Sandbox) {\r\n        setTimeout( () => this.wait(), (1000 * 3) );\r\n        setTimeout( () => $.publish($.channels['MODAL:REQUESTED'], { active: '???' }), (1000 * 2) );\r\n    }\r\n    \r\n    wait() {\r\n        var { $ } = this;\r\n        $.publish($.channels['JOHN:WILL:LIKE:THIS:STRATEGY'], { id: 998, datum: 'A' });\r\n        $.publish($.channels['JOHN:WILL:LIKE:THIS:STRATEGY'], { id: 999, datum: 'B' });\r\n    }\r\n    \r\n}\r\n\r\nvar app = new (class Application {\r\n    \r\n    constructor(env: Environment) {\r\n        \r\n        // SERVICES\r\n        V(TestService);\r\n        // VERTICES COMPONENTS\r\n        V(BackdropComponent)(ModalComponent);\r\n        // APP COMPONENTS\r\n        V(AppComponent)(Component)(OtherComponent);\r\n        // setTimeout( () => V(Component), (1000 * 5) ); <-- THIS STILL BASICALLY FUNCTIONS\r\n        \r\n        // V.component('document', class DocumentComponent {\r\n            \r\n        //     constructor(private $: Sandbox) {\r\n        //         // console.log('@ DocumentComponent', $);\r\n        //     }\r\n            \r\n        //     init() {\r\n        //         // console.log('@ DocumentComponent # init', this.$);\r\n        //         return this;\r\n        //     }\r\n            \r\n        // });\r\n    \r\n        const {\r\n            SELECTOR,\r\n        } = CONSTANTS;\r\n        \r\n        class Dependencies {};  // mock\r\n        var director = new Director({ channels, Dependencies, ActionHandlers, StateHandlers });\r\n        var config = {\r\n            director,\r\n            selector: `[data-${SELECTOR}]`,\r\n            datasets: '[data-attribute]',\r\n            bootstrap,\r\n            decorators: { services: ServiceSandbox, components: Sandbox },\r\n        };\r\n        \r\n        window.addEventListener( 'load', () => V.config(config) );\r\n        \r\n    }\r\n    \r\n})(environment);\r\n\r\nexport { app };\r\n","\r\nimport { app } from './app/app';\r\nconsole.log(`app:`, app);\r\n"],"sourceRoot":""}